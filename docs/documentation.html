
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Intro &#8212; loanpy 2.0 beta documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/classic.css" />
    
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Welcome to loanpy’s documentation!" href="index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to loanpy’s documentation!"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">loanpy 2.0 beta documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Intro</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="module-__init__">
<span id="intro"></span><h1>Intro<a class="headerlink" href="#module-__init__" title="Permalink to this headline">¶</a></h1>
<a class="reference internal image-reference" href="_images/white_logo_dark_background.jpg"><img alt="_images/white_logo_dark_background.jpg" src="_images/white_logo_dark_background.jpg" style="width: 680.0px; height: 260.2px;" /></a>
<p>loanpy is a toolkit for solving various linguistic tasks such as:</p>
<blockquote>
<div><ul class="simple">
<li><p>predicting loanword adaptation (lateral transfers)</p></li>
<li><p>historical reconstruction of words (vertical transfers)</p></li>
<li><p>searching for potential (old) loanwords between two languages.</p></li>
</ul>
</div></blockquote>
<p>For an installation guide, click on the Cheese Shop logo. To see the newest but maybe less stable version, click on Octocat. For citation visit Zenodo:</p>
<a class="reference external image-reference" href="https://pypi.org/project/loanpy/"><img alt="_images/PyPI_logo.svg" height="92" src="_images/PyPI_logo.svg" width="123" /></a>
<a class="reference external image-reference" href="https://github.com/martino-vic/loanpy"><img alt="_images/Octocat.png" src="_images/Octocat.png" style="width: 160.0px; height: 133.0px;" /></a>
<a class="reference external image-reference" href="https://zenodo.org/record/4127115#.YHCQwej7SLQ"><img alt="_images/zenodo-gradient-200.png" src="_images/zenodo-gradient-200.png" style="width: 100.0px; height: 40.0px;" /></a>
</section>
<section id="for-usage">
<h1>For usage<a class="headerlink" href="#for-usage" title="Permalink to this headline">¶</a></h1>
<section id="module-qfysc">
<span id="qfysc-py"></span><h2>qfysc.py<a class="headerlink" href="#module-qfysc" title="Permalink to this headline">¶</a></h2>
<p>Quantify sound correspondences from etymological data.</p>
<section id="qfy">
<h3>Qfy<a class="headerlink" href="#qfy" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="qfysc.Qfy">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">qfysc.</span></span><span class="sig-name descname"><span class="pre">Qfy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">forms_csv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_language</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_language</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">most_frequent_phonotactics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">9999999</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phonotactic_inventory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'adapt'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connector</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scdictbase</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vfb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qfysc.Qfy" title="Permalink to this definition">¶</a></dt>
<dd><p>Read etymological data and customise the way in which it shall be quantified later. Has 9 attributes.</p>
<p>These 5 params will be passed on to loanpy.helpers.Etym to inherit its 7 attributes:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>forms_csv</strong> (<em>pathlib.PosixPath</em><em> | </em><em>str</em><em> | </em><em>None</em><em>, </em><em>default=None</em>) – The path to cldf’s forms.csv. For more details see loanpy.helpers.read_forms</p></li>
<li><p><strong>source_language</strong> (<em>str</em><em> (</em><em>options are listed in column &quot;ID&quot; in cldf / etc / languages.tsv</em><em>)</em><em>, </em><em>default=None</em>) – The computational source language (can differ from linguistic source). This is the data FROM which we make predictions. For more details see loanpy.helpers.Etym.</p></li>
<li><p><strong>target_language</strong> (<em>str</em><em> (</em><em>options are listed in column &quot;ID&quot; in cldf / etc / languages.tsv</em><em>)</em><em>, </em><em>default=None</em>) – The computational target language (can again differ from linguistic one). This is the language INTO which we make predictions. For more details see loanpy.helpers.Etym.</p></li>
<li><p><strong>most_frequent_phonotactics</strong> (<em>int</em><em>, </em><em>default=9999999</em>) – The n most frequent structures that we want to accept into the phonotactic inventory of the target language. Sometimes a good idea to omit rare ones.</p></li>
<li><p><strong>phonotactic_inventory</strong> (<em>None</em><em> | </em><em>set</em><em> | </em><em>list</em><em>, </em><em>default=None</em>) – All possible phonotactic structures in the target language. Will be extracted from target language if set to None. For more details see loanpy.helpers.Etym.read_phonotacticsinv.</p></li>
</ul>
</dd>
</dl>
<p>These 4 params are used in own __init__ function to define 4 attributes:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mode</strong> (<em>&quot;adapt&quot;</em><em> | </em><em>&quot;reconstruct&quot;</em><em>, </em><em>default=&quot;adapt&quot;</em>) – The mode in which sound correspondences will be extracted. Differences between the two modes: Different connectors, source and target gets flipped, different alignment. No phonotactic correspondences extracted if mode == “reconstruct”. Flows into self.mode. For more details see loanpy.qfysc.read_mode.</p></li>
<li><p><strong>connector</strong> (<em>tuple</em><em>, </em><em>default=None</em>) – The strings that connect the linguistic (!) source word with the target adapted or reconstructed one. Flows into self.connector. Set to None if default settings (“&lt;” and “&lt;*”) should be used. For more details see loanpy.qfysc.read_connector.</p></li>
<li><p><strong>scdictbase</strong> (<em>None</em><em> | </em><em>dict</em><em> | </em><em>pathlib.PosixPath</em><em>, </em><em>default=None</em>) – The sound correspondence dictionary base, a heuristic approach for predicting sound substitutions. loanpy.qfysc.Qfy.get_sound_corresp will combine sound substitutions gathered from etymological data with this dictionary. If combination should be skipped, set to None or {}. Flows into self.scdictbase. For more details see loanpy.helpers.Etym.get_scdictbase.</p></li>
<li><p><strong>vfb</strong> (<em>None</em><em> | </em><em>iterable</em><em>, </em><em>default=None</em><em>, </em><em>example: &quot;əœʌ&quot;</em>) – Placeholders for “any vowel”, “any front vowel”, “any back vowel”, as these can occur in etymological dictionaries. Tokeniser can only handle IPA-characters. Therefore placeholders have to be IPA-characters as well. Best is to choose IPA-characters that don’t occur in the phoneme inventory. By default, no placeholders are used. For a list of available ipa characters see ipa_all.csv’s column “ipa”</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.qfysc</span> <span class="kn">import</span> <span class="n">Qfy</span><span class="p">,</span> <span class="vm">__file__</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2forms</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;forms.csv&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qfy_obj</span> <span class="o">=</span> <span class="n">Qfy</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;reconstruct&quot;</span><span class="p">,</span> <span class="n">connector</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;from&quot;</span><span class="p">,</span> <span class="s2">&quot;from *&quot;</span><span class="p">],</span> <span class="n">scdictbase</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="s2">&quot;o&quot;</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;p&quot;</span><span class="p">,</span> <span class="s2">&quot;v&quot;</span><span class="p">]},</span> <span class="n">vfb</span><span class="o">=</span><span class="s2">&quot;əœʌ&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qfy_obj</span><span class="o">.</span><span class="n">mode</span>
<span class="go">&quot;reconstruct&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qfy_obj</span><span class="o">.</span><span class="n">connector</span>
<span class="go">&#39;from *&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qfy_obj</span><span class="o">.</span><span class="n">scdictbase</span>
<span class="go">{&quot;a&quot;: [&quot;e&quot;, &quot;o&quot;], &quot;b&quot;: [&quot;p&quot;, &quot;v&quot;]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qfy_obj</span><span class="o">.</span><span class="n">vfb</span>
<span class="go">&#39;əœʌ&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">qfy_obj</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>  <span class="c1"># 4 own +7 attributes inherited from loanpy.helpers.Etym</span>
<span class="go">11</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="get-sound-correspondences">
<h3>get sound correspondences<a class="headerlink" href="#get-sound-correspondences" title="Permalink to this headline">¶</a></h3>
<dl class="py method">
<dt class="sig sig-object py" id="qfysc.Qfy.get_sound_corresp">
<span class="sig-prename descclassname"><span class="pre">Qfy.</span></span><span class="sig-name descname"><span class="pre">get_sound_corresp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">write_to</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qfysc.Qfy.get_sound_corresp" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert an etymological dictionary to a dictionary of sound and phonotactic correspondences, their number of occurences, and IDs of cognate sets in which they occur. If self.mode==”reconstruct” we don’t extract phonotactic correspondences because that dimension is already captured through the alignment. Since in adapt we don’t capture this, we need to extract phonotactic correspondences from the data to later repair the structure based on that before substituting. This has to do with the different nature of lateral vs horizontal transfers: loanwords meet certain constraints immediately and need to be repaired immediately. While historical sound changes happen over a long period of time and I am not aware of an optimality theory based model with constraint-changes for historical linguistics. If it existed however,we could make vertical predictions with loanpy.adrc.Adrc.adapt.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>write_to</strong> (<em>None</em><em> | </em><em>pathlib.PosixPath</em><em> | </em><em>str</em><em>, </em><em>default=None</em>) – Indicate if results should be written to a text file. If yes, provide the path. None means that no file will be written.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of 6 dicts. Dicts 0, 1, 2 capture phonological correspondences, dicts 3, 4, 5 phonotactical ones. dict0/dict3: the actual correspondences, dict1/dict4: How often each correspondence occurs in the data, dict2/dict5: list of cognates in which each correspondence occurs. Dicts 4, 5, 6 will be empty if self.mode==”reconstruct”. Set mode in loanpy.qfysc.Qfy. Note: dictionary 5 contains some randomness because set() is involved, for details see loanpy.qfysc.Qfy.get_phonotactics_corresp.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>[dict, dict, dict, dict, dict, dict]</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.qfysc</span> <span class="kn">import</span> <span class="n">Qfy</span><span class="p">,</span> <span class="vm">__file__</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2forms</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;forms.csv&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qfy_obj</span> <span class="o">=</span> <span class="n">Qfy</span><span class="p">(</span><span class="n">forms_csv</span><span class="o">=</span><span class="n">path2forms</span><span class="p">,</span> <span class="n">source_language</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">target_language</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qfy_obj</span><span class="o">.</span><span class="n">get_sound_corresp</span><span class="p">()</span>
<span class="go">[{&#39;C&#39;: [&#39;x&#39;], &#39;a&#39;: [&#39;y&#39;], &#39;b&#39;: [&#39;&#39;], &#39;c&#39;: [&#39;z&#39;]}, {&#39;C&lt;b&#39;: 1, &#39;x&lt;C&#39;: 1, &#39;y&lt;a&#39;: 1, &#39;z&lt;c&#39;: 1}, {&#39;C&lt;b&#39;: [1], &#39;x&lt;C&#39;: [1], &#39;y&lt;a&#39;: [1], &#39;z&lt;c&#39;: [1]}, {&#39;VCC&#39;: [&#39;CVC&#39;]}, {&#39;CVC&lt;VCC&#39;: 1}, {&#39;CVC&lt;VCC&#39;: [1]}]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qfy_obj</span><span class="o">.</span><span class="n">scdict</span>
<span class="go">[{&#39;C&#39;: [&#39;x&#39;], &#39;a&#39;: [&#39;y&#39;], &#39;b&#39;: [&#39;&#39;], &#39;c&#39;: [&#39;z&#39;]}, {&#39;C&lt;b&#39;: 1, &#39;x&lt;C&#39;: 1, &#39;y&lt;a&#39;: 1, &#39;z&lt;c&#39;: 1}, {&#39;C&lt;b&#39;: [1], &#39;x&lt;C&#39;: [1], &#39;y&lt;a&#39;: [1], &#39;z&lt;c&#39;: [1]}, {&#39;VCC&#39;: [&#39;CVC&#39;]}, {&#39;CVC&lt;VCC&#39;: 1}, {&#39;CVC&lt;VCC&#39;: [1]}]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span> <span class="c1"># now reconstruct instead of adapt, and write file</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ast</span> <span class="kn">import</span> <span class="n">literal_eval</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">remove</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2scdict</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;example_scdict2delete.txt&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qfy_obj</span> <span class="o">=</span> <span class="n">Qfy</span><span class="p">(</span><span class="n">forms_csv</span><span class="o">=</span><span class="n">path2forms</span><span class="p">,</span> <span class="n">source_language</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">target_language</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;reconstruct&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qfy_obj</span><span class="o">.</span><span class="n">get_sound_corresp</span><span class="p">(</span><span class="n">write_to</span><span class="o">=</span><span class="n">path2scdict</span><span class="p">)</span>
<span class="go">[{&#39;#x&#39;: [&#39;-&#39;], &#39;-#&#39;: [&#39;-&#39;], &#39;y&#39;: [&#39;a&#39;], &#39;z#&#39;: [&#39;bc&#39;]}, {&#39;#x&lt;*-&#39;: 1, &#39;-#&lt;*-&#39;: 1, &#39;y&lt;*a&#39;: 1, &#39;z#&lt;*bc&#39;: 1}, {&#39;#x&lt;*-&#39;: [1], &#39;-#&lt;*-&#39;: [1], &#39;y&lt;*a&#39;: [1], &#39;z#&lt;*bc&#39;: [1]}, {}, {}, {}]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">literal_eval</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">path2scdict</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="go">[{&#39;#x&#39;: [&#39;-&#39;], &#39;-#&#39;: [&#39;-&#39;], &#39;y&#39;: [&#39;a&#39;], &#39;z#&#39;: [&#39;bc&#39;]}, {&#39;#x&lt;*-&#39;: 1, &#39;-#&lt;*-&#39;: 1, &#39;y&lt;*a&#39;: 1, &#39;z#&lt;*bc&#39;: 1}, {&#39;#x&lt;*-&#39;: [1], &#39;-#&lt;*-&#39;: [1], &#39;y&lt;*a&#39;: [1], &#39;z#&lt;*bc&#39;: [1]}, {}, {}, {}]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">remove</span><span class="p">(</span><span class="n">path2scdict</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
</section>
<section id="module-adrc">
<span id="adrc-py"></span><h2>adrc.py<a class="headerlink" href="#module-adrc" title="Permalink to this headline">¶</a></h2>
<p>Adapt or reconstruct words, i.e. surf horizontally and vertically through the network of life</p>
<section id="adrc">
<h3>Adrc<a class="headerlink" href="#adrc" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="adrc.Adrc">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">adrc.</span></span><span class="sig-name descname"><span class="pre">Adrc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">forms_csv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_language</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_language</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">most_frequent_phonotactics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">9999999</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phonotactic_inventory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connector</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scdictbase</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vfb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scdictlist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#adrc.Adrc" title="Permalink to this definition">¶</a></dt>
<dd><p>Read etymological data and information about it generated by loanpy.qfysc.py and use it to predict loanword adaptations (lateral transfers) and reconstructions (vertical transfers).</p>
<p>The first 9 parameters are passed on to loanpy.qfysc.Qfy to inherit 11 attributes (of which 7 are inherited from loanpy.helpers.Etym). The last parameter is passed on to __init__ to create 5 own attributes, so 16 attributes in total</p>
<p>Define own attributes:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>scdictlist</strong> (<em>pathlib.PosixPath</em><em> | </em><em>str</em><em> | </em><em>None</em>) – Path to data generated with loanpy.qfysc.Qfy.get_sound_corresp. (Dicts 0, 1, 2 capture phonological correspondences, dicts 3, 4, 5 phonotactical ones. dict0/dict3: the actual correspondences, dict1/dict4: How often each correspondence occurs in the data, dict2/dict5: list of cognates in which each correspondence occurs.</p>
</dd>
<dt class="field-even">Exmaple</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.adrc</span> <span class="kn">import</span> <span class="n">Adrc</span><span class="p">,</span> <span class="vm">__file__</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2folder</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2sc</span> <span class="o">=</span> <span class="n">path2folder</span> <span class="o">/</span> <span class="s2">&quot;sc_ad_3cogs.txt&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2forms</span> <span class="o">=</span> <span class="n">path2folder</span> <span class="o">/</span> <span class="s2">&quot;forms_3cogs_wot.csv&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span> <span class="o">=</span> <span class="n">Adrc</span><span class="p">(</span><span class="n">scdictlist</span><span class="o">=</span><span class="n">path2sc</span><span class="p">,</span> <span class="n">forms_csv</span><span class="o">=</span><span class="n">path2forms</span><span class="p">,</span> <span class="n">source_language</span><span class="o">=</span><span class="s2">&quot;WOT&quot;</span><span class="p">,</span> <span class="n">target_language</span><span class="o">=</span><span class="s2">&quot;EAH&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;reconstruct&quot;</span><span class="p">,</span> <span class="n">most_frequent_phonotactics</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">scdict</span>  <span class="c1"># sound correspondence dictionary</span>
<span class="go">{&#39;a&#39;: [&#39;a&#39;], &#39;d&#39;: [&#39;d&#39;], &#39;j&#39;: [&#39;j&#39;], &#39;l&#39;: [&#39;l&#39;], &#39;n&#39;: [&#39;n&#39;], &#39;t͡ʃː&#39;: [&#39;t͡ʃ&#39;], &#39;ɣ&#39;: [&#39;ɣ&#39;], &#39;ɯ&#39;: [&#39;i&#39;]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">sedict</span>  <span class="c1"># sum of examples dictionary</span>
<span class="go">{&#39;a&lt;a&#39;: 6, &#39;d&lt;d&#39;: 1, &#39;i&lt;ɯ&#39;: 1, &#39;j&lt;j&#39;: 1, &#39;l&lt;l&#39;: 1, &#39;n&lt;n&#39;: 1, &#39;t͡ʃ&lt;t͡ʃː&#39;: 1, &#39;ɣ&lt;ɣ&#39;: 2}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">edict</span>  <span class="c1"># examples dictionary</span>
<span class="go">{&#39;a&lt;a&#39;: [1, 2, 3], &#39;d&lt;d&#39;: [2], &#39;i&lt;ɯ&#39;: [1], &#39;j&lt;j&#39;: [3], &#39;l&lt;l&#39;: [2], &#39;n&lt;n&#39;: [3], &#39;t͡ʃ&lt;t͡ʃː&#39;: [1], &#39;ɣ&lt;ɣ&#39;: [1, 2]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">scdict_phonotactics</span>  <span class="c1"># phonotactic correspondence dictionary</span>
<span class="go">{&#39;VCCVC&#39;: [&#39;VCCVC&#39;], &#39;VCVC&#39;: [&#39;VCVC&#39;], &#39;VCVCV&#39;: [&#39;VCVCV&#39;]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">workflow</span>
<span class="go">OrderedDict()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">adrc_obj</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>  <span class="c1"># 5 own + 11 attributes inherited from loanpy.qfysc.Qfy</span>
<span class="go">16</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="adapt">
<h3>adapt<a class="headerlink" href="#adapt" title="Permalink to this headline">¶</a></h3>
<dl class="py method">
<dt class="sig sig-object py" id="adrc.Adrc.adapt">
<span class="sig-prename descclassname"><span class="pre">Adrc.</span></span><span class="sig-name descname"><span class="pre">adapt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ipastr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">howmany</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phonotactics_filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">repair_vowelharmony</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_by_nse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_repaired_phonotactics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_paths2repaired_phonotactics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deletion_cost</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">insertion_cost</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">49</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_workflow</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#adrc.Adrc.adapt" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a word as input and makes predictions based on available data and heuristics how it could be repaired when entering target language as a loan.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ipastr</strong> (<em>str</em>) – The non-tokenised input word. Should consist only of valid ipa-characters, as defined in ipa_all.csv’s column “ipa”, even though the tokeniser handles invalid characters quite well. Make sure this is not an empty string.</p></li>
<li><p><strong>howmany</strong> (<em>int</em><em>, </em><em>default=1</em>) – Indicate howmany guesses should be made.</p></li>
<li><p><strong>max_repaired_phonotactics</strong> (<em>int</em><em>, </em><em>default=1</em>) – Indicate howmany of the most similar available structures from the phonotactic inventory should be taken into consideration.</p></li>
<li><p><strong>max_paths2repaired_phonotactics</strong> (<em>int</em><em>, </em><em>default=1</em>) – Indicate in maximum howmany different ways each phonotactic structure should be repaired.</p></li>
<li><p><strong>deletion_cost</strong> (<em>int</em><em> | </em><em>float</em><em>, </em><em>default=100</em>) – The cost of deleting a phoneme</p></li>
<li><p><strong>insertion_cost</strong> (<em>int</em><em> | </em><em>float</em><em>, </em><em>default=49</em>) – The cost of inserting a phoneme</p></li>
<li><p><strong>repair_vowelharmony</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Indicate whether violations of front-back repair_vowelharmony should be repaired.</p></li>
<li><p><strong>cluster_filter</strong> (<em>bool</em><em>, </em><em>default=False</em>) – This is a filter. It throws out all words that contain vowel or consonant clusters that are not documented in the target language.</p></li>
<li><p><strong>sort_by_nse</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Indicate whether results should be sorted by their likelihood. Can be costly to calculate.</p></li>
<li><p><strong>phonotactics_filter</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Indicate whether words should be filtered out from the final result if their phonotactic profile does not occur in the phonotactic inventory of target language.</p></li>
<li><p><strong>show_workflow</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Indicate if the workflow should be attached to the output. Useful for debugging and makes it less black-boxy. The single steps are added as keys to the Adrc-attribute &lt;workflow&gt;. The number of keys varies between 2-5, depending on the arguments passed on to this function. Keys “tokenised” and “adapted_phonotactics” are always there. Keys “donor_phonotactics” and “predicted_phonotactics” are only added if param &lt;max_repaired_phonotactics&gt; was set to greater than 0. Key “adapted_vowelharmony” is only added if param &lt;repair_vowelharmony&gt; was set to True.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.adrc</span> <span class="kn">import</span> <span class="n">Adrc</span><span class="p">,</span> <span class="vm">__file__</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2folder</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;integration&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2sc</span> <span class="o">=</span> <span class="n">path2folder</span> <span class="o">/</span> <span class="s2">&quot;sc_ad_handmade.txt&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2forms</span> <span class="o">=</span> <span class="n">path2folder</span> <span class="o">/</span> <span class="s2">&quot;forms_3cogs_wot.csv&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span> <span class="o">=</span> <span class="n">Adrc</span><span class="p">(</span><span class="n">scdictlist</span><span class="o">=</span><span class="n">path2sc</span><span class="p">,</span> <span class="n">forms_csv</span><span class="o">=</span><span class="n">path2forms</span><span class="p">,</span> <span class="n">source_language</span><span class="o">=</span><span class="s2">&quot;WOT&quot;</span><span class="p">,</span> <span class="n">target_language</span><span class="o">=</span><span class="s2">&quot;EAH&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">adapt</span><span class="p">(</span><span class="n">ipastr</span><span class="o">=</span><span class="s2">&quot;dade&quot;</span><span class="p">,</span> <span class="n">howmany</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="go">&quot;dady, datʰy, dedy, detʰy, tʰady&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># repair phonotactics with data hard-coded in &quot;sc_ad_handmade.txt&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Usually this is the same as data extracted from forms.csv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># But now due to illustrative purposes they are different.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">adapt</span><span class="p">(</span><span class="n">ipastr</span><span class="o">=</span><span class="s2">&quot;dade&quot;</span><span class="p">,</span> <span class="n">howmany</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">max_repaired_phonotactics</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="go">&quot;dad, ded, tʰad, tʰed, dajdy, dejdy&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># max_paths2repaired_phonotactics=2 causes j to be inserted before AND after d</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">adapt</span><span class="p">(</span><span class="n">ipastr</span><span class="o">=</span><span class="s2">&quot;dade&quot;</span><span class="p">,</span> <span class="n">howmany</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">max_repaired_phonotactics</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">max_paths2repaired_phonotactics</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="go">&quot;dad, tʰad, dajdy, tʰajdy, dadjy, tʰadjy&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">vow2fb</span><span class="p">[</span><span class="s2">&quot;e&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;B&quot;</span>  <span class="c1"># let&#39;s assume &quot;e&quot; was a backvowel.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># repair repair_vowelharmony before substituting: dade-&gt;dadF</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">adapt</span><span class="p">(</span><span class="n">repair_vowelharmony</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ipastr</span><span class="o">=</span><span class="s2">&quot;dade&quot;</span><span class="p">,</span> <span class="n">howmany</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">max_repaired_phonotactics</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">max_paths2repaired_phonotactics</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="go">&quot;dad, tʰad, dajdæ, tʰajdæ, dujdy, tʰujdy&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># phonotactic inventory for phonotactics_filter is calculated from forms.csv!</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># contains only structures of the 3 words occuring in the target lg EAH</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">phonotactic_inventory</span>  <span class="c1"># this will filter out all results</span>
<span class="go">{&#39;VCVC&#39;, &#39;VCVCV&#39;, &#39;VCCVC&#39;}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">adapt</span><span class="p">(</span><span class="n">phonotactics_filter</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">repair_vowelharmony</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ipastr</span><span class="o">=</span><span class="s2">&quot;dade&quot;</span><span class="p">,</span> <span class="n">howmany</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">max_repaired_phonotactics</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">max_paths2repaired_phonotactics</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="go">&#39;wrong phonotactics&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">phonotactic_inventory</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;CVCCV&#39;</span><span class="p">)</span>  <span class="c1"># so let&#39;s assume CVCCV was in the inventory</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">adapt</span><span class="p">(</span><span class="n">phonotactics_filter</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">repair_vowelharmony</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ipastr</span><span class="o">=</span><span class="s2">&quot;dade&quot;</span><span class="p">,</span> <span class="n">howmany</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">max_repaired_phonotactics</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">max_paths2repaired_phonotactics</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="go">&quot;dajdæ, tʰajdæ, dujdy, tʰujdy, dadjæ, tʰadjæ&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># now let&#39;s filter out all clusters undocumented in forms.csv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">clusters</span>  <span class="c1"># only these clusters are allowed</span>
<span class="go">{&#39;ld&#39;, &#39;t͡ʃ&#39;, &#39;j&#39;, &#39;ɣ&#39;, &#39;a&#39;, &#39;n&#39;, &#39;ia&#39;}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">adapt</span><span class="p">(</span><span class="n">cluster_filter</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">phonotactics_filter</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">repair_vowelharmony</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ipastr</span><span class="o">=</span><span class="s2">&quot;dade&quot;</span><span class="p">,</span> <span class="n">howmany</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">max_repaired_phonotactics</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">max_paths2repaired_phonotactics</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="go">&quot;wrong clusters&quot;</span>
<span class="gp">&gt;&gt;&gt; </span> <span class="c1"># let&#39;s use a different sound correspondence file</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2sc</span> <span class="o">=</span> <span class="n">path2folder</span> <span class="o">/</span> <span class="s2">&quot;sc_ad_handmade2.txt&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span> <span class="o">=</span> <span class="n">Adrc</span><span class="p">(</span><span class="n">scdictlist</span><span class="o">=</span><span class="n">path2sc</span><span class="p">,</span> <span class="n">forms_csv</span><span class="o">=</span><span class="n">path2forms</span><span class="p">,</span> <span class="n">source_language</span><span class="o">=</span><span class="s2">&quot;WOT&quot;</span><span class="p">,</span> <span class="n">target_language</span><span class="o">=</span><span class="s2">&quot;EAH&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">phonotactic_inventory</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;CVCCV&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># let&#39;s ramp up the combinatorics</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">adapt</span><span class="p">(</span><span class="n">howmany</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">cluster_filter</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">phonotactics_filter</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">repair_vowelharmony</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ipastr</span><span class="o">=</span><span class="s2">&quot;dade&quot;</span><span class="p">,</span> <span class="n">max_repaired_phonotactics</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">max_paths2repaired_phonotactics</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="go">&#39;t͡ʃalda&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">clusters</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">)</span>  <span class="c1"># let&#39;s assume d was an allowed cluster</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">adapt</span><span class="p">(</span><span class="n">howmany</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">cluster_filter</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">phonotactics_filter</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">repair_vowelharmony</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ipastr</span><span class="o">=</span><span class="s2">&quot;dade&quot;</span><span class="p">,</span> <span class="n">max_repaired_phonotactics</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">max_paths2repaired_phonotactics</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="go">&#39;dalda, t͡ʃalda&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># now sort results by likelihood (nse) and document workflow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">adapt</span><span class="p">(</span><span class="n">sort_by_nse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">show_workflow</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">howmany</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">cluster_filter</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">phonotactics_filter</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">repair_vowelharmony</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ipastr</span><span class="o">=</span><span class="s2">&quot;dade&quot;</span><span class="p">,</span> <span class="n">max_repaired_phonotactics</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">max_paths2repaired_phonotactics</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="go">&#39;t͡ʃalda, dalda&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">workflow</span>
<span class="go">OrderedDict([(&#39;tokenised&#39;, [[&#39;d&#39;, &#39;a&#39;, &#39;d&#39;, &#39;e&#39;]]), (&#39;donor_phonotactics&#39;, [&#39;CVCV&#39;]), (&#39;predicted_phonotactics&#39;, [[&#39;CVC&#39;, &#39;CVCCV&#39;]]), (&#39;adapted_phonotactics&#39;, [[[&#39;d&#39;, &#39;a&#39;, &#39;d&#39;], [&#39;d&#39;, &#39;a&#39;, &#39;C&#39;, &#39;d&#39;, &#39;e&#39;], [&#39;d&#39;, &#39;a&#39;, &#39;d&#39;, &#39;C&#39;, &#39;e&#39;]]]), (&#39;adapted_vowelharmony&#39;, [[[&#39;d&#39;, &#39;a&#39;, &#39;d&#39;], [&#39;d&#39;, &#39;a&#39;, &#39;C&#39;, &#39;d&#39;, &#39;e&#39;],   [&#39;d&#39;, &#39;a&#39;, &#39;d&#39;, &#39;C&#39;, &#39;e&#39;]]]), (&#39;before_combinatorics&#39;, [[[[&#39;d&#39;, &#39;t͡ʃ&#39;], [&#39;a&#39;, &#39;e&#39;], [&#39;d&#39;, &#39;t͡ʃ&#39;]], [[&#39;d&#39;, &#39;t͡ʃ&#39;], [&#39;a&#39;, &#39;e&#39;], [&#39;l&#39;], [&#39;d&#39;, &#39;t͡ʃ&#39;], [&#39;e&#39;, &#39;a&#39;]],   [[&#39;d&#39;, &#39;t͡ʃ&#39;], [&#39;a&#39;, &#39;e&#39;], [&#39;d&#39;, &#39;t͡ʃ&#39;], [&#39;l&#39;], [&#39;e&#39;, &#39;a&#39;]]]])])</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="reconstruct">
<h3>reconstruct<a class="headerlink" href="#reconstruct" title="Permalink to this headline">¶</a></h3>
<dl class="py method">
<dt class="sig sig-object py" id="adrc.Adrc.reconstruct">
<span class="sig-prename descclassname"><span class="pre">Adrc.</span></span><span class="sig-name descname"><span class="pre">reconstruct</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ipastr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">howmany</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clusterised</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phonotactics_filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vowelharmony_filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_by_nse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#adrc.Adrc.reconstruct" title="Permalink to this definition">¶</a></dt>
<dd><p>Predicts past forms of a word based on data. Should theoretically also work for forward reconstructions, but not tested yet. Word initial and word final sounds/clusters are tagged with an “#”. In addition to this, every word gets a “#-” and a “-#” slapped to its front and back, to capture prefixes and suffixes that may have appeared or disappeared. If parameters &lt;phonotactics_filter&gt;, &lt;vowelharmony_filter&gt; and &lt;sort_by_nse&gt; are all set to False, the output will be a regular expression of the type “^(a|b)(c|d)(e)$”. If one of those parameters is set to True, combinatorics will be applied and the outputted regular expression will be of the type “(^ace$|^ade$|^bce$|^bde$)”.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ipastr</strong> (<em>str</em>) – The non-tokenised input word. Should consist only of valid ipa-characters, as defined in ipa_all.csv’s column “ipa”, even though the tokeniser handles invalid characters quite well. Make sure this is not an empty string.</p></li>
<li><p><strong>howmany</strong> (<em>int</em><em>, </em><em>default=1</em>) – Indicate howmany guesses should be made.</p></li>
<li><p><strong>clusterised</strong> (<em>bool</em><em>, </em><em>default=True</em>) – If set to True, this will slice up the input word into consonant and vowel clusters and look for those keys in the sound change dictionary.</p></li>
<li><p><strong>phonotactics_filter</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Indicate whether words should be filtered out from the final result if their phonotactic profile does not occur in the phonotactic inventory of target language.</p></li>
<li><p><strong>vowelharmony_filter</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Indicate whether words violating the constraint front-back vowelharmony_filter (a word can contain only front or only back vowels) should be filtered.</p></li>
<li><p><strong>sort_by_nse</strong> – Indicate whether results should be sorted by their normalised sum of examples (likelihood measure for etymologies). Can be costly to calculate but still cheaper and more elegant than replacing itertool’s product function, which does this (from its documentation): “The leftmost iterators are in the outermost for-loop, so the output tuples cycle in a manner similar to an odometer (with the rightmost element changing on every iteration)”         :type sort_by_nse: bool, default=False</p></li>
<li><p><strong>args</strong> – This does nothing. Just so sanity.eval_one to be able         to pass on a consistent list of args to both adapt and reconstruct.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A regular expression approximating the indicated number of predicted reconstructions</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.adrc</span> <span class="kn">import</span> <span class="n">Adrc</span><span class="p">,</span> <span class="vm">__file__</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2folder</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;integration&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2sc</span> <span class="o">=</span> <span class="n">path2folder</span> <span class="o">/</span> <span class="s2">&quot;sc_rc_3cogs.txt&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span> <span class="o">=</span> <span class="n">Adrc</span><span class="p">(</span><span class="n">scdictlist</span><span class="o">=</span><span class="n">path2sc</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;reconstruct&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">reconstruct</span><span class="p">(</span><span class="s2">&quot;kriekrie&quot;</span><span class="p">)</span>  <span class="c1"># clusterise, missing from data</span>
<span class="go">&#39;#kr, ie, kr, ie# not old&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">reconstruct</span><span class="p">(</span><span class="s2">&quot;kriekrie&quot;</span><span class="p">,</span> <span class="n">clusterised</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># tokenise</span>
<span class="go">&#39;#k, i, e, k, i, e# not old&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">reconstruct</span><span class="p">(</span><span class="s2">&quot;aːruː&quot;</span><span class="p">)</span>
<span class="go">&#39;^(a)(n)(a)(at͡ʃi)$&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">reconstruct</span><span class="p">(</span><span class="s2">&quot;aːruː&quot;</span><span class="p">,</span> <span class="n">howmany</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="go">&#39;^(a)(n)(a)(at͡ʃi|ɣ)$&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2forms</span> <span class="o">=</span> <span class="n">path2folder</span> <span class="o">/</span> <span class="s2">&quot;forms_3cogs_wot.csv&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># read etymological data to get phonotactic inventory for filter</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span> <span class="o">=</span> <span class="n">Adrc</span><span class="p">(</span><span class="n">forms_csv</span><span class="o">=</span><span class="n">path2forms</span><span class="p">,</span> <span class="n">source_language</span><span class="o">=</span><span class="s2">&quot;H&quot;</span><span class="p">,</span> <span class="n">target_language</span><span class="o">=</span><span class="s2">&quot;EAH&quot;</span><span class="p">,</span> <span class="n">scdictlist</span><span class="o">=</span><span class="n">path2sc</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;reconstruct&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">reconstruct</span><span class="p">(</span><span class="s2">&quot;aːruː&quot;</span><span class="p">,</span> <span class="n">howmany</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">phonotactics_filter</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># only CVCV in inventory</span>
<span class="go">&#39;^anaɣ$&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">reconstruct</span><span class="p">(</span><span class="s2">&quot;aːruː&quot;</span><span class="p">,</span> <span class="n">howmany</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">phonotactics_filter</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># low howmany -&gt; empty filter</span>
<span class="go">&#39;wrong phonotactics&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">vow2fb</span><span class="p">[</span><span class="s2">&quot;i&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;B&quot;</span>  <span class="c1"># let&#39;s assume &quot;i&quot; was a back vowel</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">reconstruct</span><span class="p">(</span><span class="s2">&quot;aːruː&quot;</span><span class="p">,</span> <span class="n">howmany</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">vowelharmony_filter</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">&#39;^anaɣ$&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># &quot;anaat͡ʃi&quot; got filtered out b/c it contains a front and back vowel</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># violation of constraint &quot;vowelharmony_filter&quot; in terms of optimality theory</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">reconstruct</span><span class="p">(</span><span class="s2">&quot;aːruː&quot;</span><span class="p">,</span> <span class="n">howmany</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">vowelharmony_filter</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># low howmany -&gt; empty filter</span>
<span class="go">&#39;wrong vowel harmony&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">vow2fb</span><span class="p">[</span><span class="s2">&quot;i&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;F&quot;</span>  <span class="c1"># make &quot;i&quot; a front vowel again</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">reconstruct</span><span class="p">(</span><span class="s2">&quot;aːruː&quot;</span><span class="p">,</span> <span class="n">howmany</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">vowelharmony_filter</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># nothing gets filtered</span>
<span class="go">&quot;^anaat͡ʃi$|^anaɣ$&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">reconstruct</span><span class="p">(</span><span class="s2">&quot;aːruː&quot;</span><span class="p">,</span> <span class="n">howmany</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">sort_by_nse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># examples per phoneme divided by word length is higher for &quot;anaɣ&quot;</span>
<span class="go">&quot;^anaɣ$|^anaat͡ʃi$&quot;</span>
</pre></div>
</div>
</dd></dl>

</section>
</section>
<section id="module-sanity">
<span id="sanity-py"></span><h2>sanity.py<a class="headerlink" href="#module-sanity" title="Permalink to this headline">¶</a></h2>
<p>Check how sane the model is by evaluating predictions.</p>
<section id="evaluate-all">
<h3>evaluate all<a class="headerlink" href="#evaluate-all" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="sanity.eval_all">
<span class="sig-prename descclassname"><span class="pre">sanity.</span></span><span class="sig-name descname"><span class="pre">eval_all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">forms_csv</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_language</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_language</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'adapt'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">most_frequent_phonotactics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">9999999</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phonotactic_inventory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connector</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scdictbase</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vfb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">guesslist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[10,</span> <span class="pre">50,</span> <span class="pre">100,</span> <span class="pre">500,</span> <span class="pre">1000]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clusters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phonotactics_filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vowelharmony</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_by_nse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_repaired_phonotactics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_paths2repaired_phonotactics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deletion_cost</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">insertion_cost</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">49</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_workflow</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path2cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">crossval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">writesc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">write_to</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sanity.eval_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Trains crossvalidated models, evaluates and visualises predictions.     23 args in total, only 3 positional. Best to run this from a loop     with different parameter settings and decorated with &#64;loanpy.sanity.cache</p>
<p>The first 9 args are passed on to     loanpy.adrc.Adrc.__init__, out of which the first 3 are positional:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>forms_csv</strong> (<em>pathlib.PosixPath</em><em> | </em><em>str</em>) – The path to cldf’s forms.csv of the etymological     dictionary. Will be used to initiate loanpy.adrc.Adrc. For more details     see     loanpy.helpers.read_forms.</p></li>
<li><p><strong>target_language</strong> (<em>str</em><em> (</em><em>options are listed in column &quot;ID&quot; in     cldf / etc / languages.tsv</em><em>)</em><em>, </em><em>default=None</em>) – The computational target language.     Will be used to     initiate loanpy.adrc.Adrc. For more details see loanpy.helpers.Etym.</p></li>
<li><p><strong>source_language</strong> (<em>str</em><em> (</em><em>options are listed in column &quot;ID&quot; in     cldf / etc / languages.tsv</em><em>)</em><em>, </em><em>default=None</em>) – The computational source language.     Will be used to     initiate loanpy.adrc.Adrc. For more details see loanpy.helpers.Etym.</p></li>
<li><p><strong>mode</strong> (<em>&quot;adapt&quot;</em><em> | </em><em>&quot;reconstruct&quot;</em><em>, </em><em>default=&quot;adapt&quot;</em>) – Indicate whether predictions should be made with     loanpy.adrc.Adrc.reconstruct or loanpy.adrc.Adrc.adapt (also     sound correspondences     will be extracted with loanpy.qfysc.Qfy.get_sound_corresp in     the given mode).     See also loanpy.qfysc.Qfy for more details.</p></li>
<li><p><strong>most_frequent_phonotactics</strong> (<em>int</em><em>, </em><em>default=9999999</em>) – The n most frequent structures     to accept into the target language’s phonotactic inventory.     For more details     see loanpy.helpers.Etym.read_phonotacticsinv.</p></li>
<li><p><strong>phonotactic_inventory</strong> (<em>list</em><em>, </em><em>default=None</em>) – Chance to plug in phonotactic     inventory manually. If None,     will be extracted automatically from data. For more details     see loanpy.helpers.Etym.read_phonotacticsinv.</p></li>
<li><p><strong>connector</strong> (<em>iterable of len 2</em>) – The string that connects the left side of an etymology     with the right side for adapting vs reconstructing. For more details see     loanpy.qfysc.read_connector</p></li>
<li><p><strong>scdictbase</strong> (<em>None</em><em> | </em><em>pathlib.PosixPath</em><em> | </em><em>dict</em>) – Indicate whether sound correspondences based     on data should be combined with the (rather large) dictionary of     heuristic correspondences. For pitfalls see param &lt;writesc&gt;. Don’t     pass a boolean. None means no, pathlib.PosixPath, dict, or str means yes.</p></li>
<li><p><strong>vfb</strong> – Indicate whether there should be placeholder vowels.     For more details see loanpy.qfysc.Qfy.</p></li>
</ul>
</dd>
</dl>
<p>The next 5 args are passed on to loanpy.adrc.Adrc.adapt if     mode=”adapt” but to loanpy.adrc.Adrc.reconstruct if mode=”reconstruct”:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>guesslist</strong> (<em>list of int</em>) – The list of number of guesses to be made. Will be     passed into loanpy.adrc.Adrc.adapt’s or loanpy.adrc.Adrc.reconstruct’s     parameter &lt;howmany&gt; in a loop. Loop breaks as soons as     prediction was correct.</p></li>
<li><p><strong>clusters</strong> (<em>bool</em><em>, </em><em>def=False</em>) – Will be passed to loanpy.adrc.Adrc.adapt’s parameter     &lt;cluster_filter&gt; or loanpy.adrc.Adrc.reconstruct’s parameter     &lt;clusterised&gt;.     Indicate whether predictions that contain consonant or     vowel clusters that are not documented in the target language should be     filtered out if passed on to adapt() or if the tokeniser should     clusterise the input-word and look in the sound correspondence dictionary     for clusters as keys to predictions if passed on to reconstruct().</p></li>
<li><p><strong>phonotactics_filter</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Indicate if predictions made by     loanpy.adrc.Adrc.adapt and loanpy.adrc.Adrc.reconstruct     should be filtered out if they consist of a     phonotactic structure that is not contained in the language’s     phonotactic inventory. For more details see     loanpy.helpers.Etym.read_phonotacticsinv.</p></li>
<li><p><strong>vowelharmony</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Will be passed to loanpy.adrc.Adrc.adapt’s     parameter &lt;repair_vowelharmony&gt; or     loanpy.adrc.Adrc.reconstruct’s parameter &lt;vowelharmony_filter&gt;.     Indicate whether vowelharmony should be repaired     if passed on to adapt() or if results violating the constraint     “front-back     vowelharmony” should be filtered out if passed on to reconstruct().</p></li>
<li><p><strong>sort_by_nse</strong> (<em>bool</em><em> | </em><em>int</em><em>, </em><em>default=False</em>) – Indicate if or howmany predictions     should be sorted by likelihood. True and False will sort all or none,     just like float(“inf”) and 0. Passing an Integer will not sort the entire     output. Instead it will pick as many     of the words with the highest NSE (likelihood) as indicated.     This can save quite some unnecessary calculations.</p></li>
</ul>
</dd>
</dl>
<p>The next 5 args are passed on to loanpy.adrc.Adrc.adapt if     mode=”adapt” but if     mode=”reconstruct” they will not be used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>max_repaired_phonotactics</strong> (<em>int</em><em>, </em><em>default=1</em>) – The maximum number of phonotactic     strucutres into which     the original string should be transformed. Will be passed into     loanpy.adrc.Adrc.adapt’s parameter &lt;max_repaired_phonotactics&gt;</p></li>
<li><p><strong>max_paths2repaired_phonotactics</strong> (<em>int</em><em>, </em><em>default=1</em>) – The maximum number of     cheapest paths through which a     phonotactic structure can be repaired. Will be passed into     loanpy.adrc.Adrc.adapt’s parameter &lt;max_paths2repaired_phonotactics&gt;</p></li>
<li><p><strong>deletion_cost</strong> (<em>int</em><em>, </em><em>float</em><em>, </em><em>default=100</em>) – The cost of deleting a phoneme</p></li>
<li><p><strong>insertion_cost</strong> (<em>int</em><em>, </em><em>float</em><em>, </em><em>default=49</em>) – The cost of inserting a phoneme</p></li>
<li><p><strong>show_workflow</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Indicate whether the workflow should be     displayed in the output of loanpy.adrc.Adrc.adapt. Useful for debugging.</p></li>
</ul>
</dd>
</dl>
<p>The next 4 args are not passed on but will be used in this module.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path2cache</strong> (<em>pathlib.PosixPath</em><em> | </em><em>str</em><em>, </em><em>None</em><em>, </em><em>False</em><em>, </em><em>default=False</em>) – The path to the csv-file in which information     about input-parameters and evaluated results is stored. If path points to     a non-existent file, the indicated file will be created.     If set to None, it will be written to cldf’s folder “etc” (concluded from     the path provided in parameter &lt;forms_csv&gt;) and will be called     f”opt_param_{target_language}_{source_language}”.     If set to False, this file will be ignored and no data written to it.     Only passed to cache if its written around this function as a decorator.    For more information see loanpy.sanity.cache.</p></li>
<li><p><strong>crossval</strong> (<em>bool</em>) – Indicate if results should be cross-validated. If true,     the model with which we predict an adaptation or a reconstruction     of a word will be trained without that word. That means that all 3     inventories (phoneme, clusters, phonotactic) are also concluded     from data that excludes that specific row.</p></li>
<li><p><strong>writesc</strong> (<em>bool</em><em>, </em><em>def=False</em>) – Indicate if loanpy.qfysc.Qfy.get_sound_corresp should     write its output to a file. If yes and if crossval is True,     provide a path to a <em>folder</em> (!). If yes and crossval is False,     provide a path to a file.     This is useful for debugging.     Careful: Since one file will be written in every     round of the cross-validation loop (as many iterations as there are     predictions to evaluate), the total storage room taken up by     the files can     get large. E.g. if we want to evaluate 500 words and scdictbase is     1.6MB, the entire folder will take up 500*1.6MB. There are two ways to     avoid this: If writesc=True, make sure to set either crossval=False,     this will     only write one soundchange.txt file. Or set scdictbase=None,     since this is     the part that takes up the most storage. Predictions will be blurred     in both     cases but for debugging this is usually enough.</p></li>
<li><p><strong>write_to</strong> (<em>None</em><em> | </em><em>pathlib.PosixPath</em><em> | </em><em>str</em><em>, </em><em>default=None</em>) – Indicate whether results should be written to a     csv-file and plotted to a jpg. If yes, provide the path to the file     including the “.csv”-extension.     None means that no file     will be written.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Adds two columns to the input data frame: “guesses”,     which indicate     howmany guesses were necessary to make the correct prediction (if inf,     all predictions were wrong) and best guess, which shows the closest guess (if     combinatorics were applied, this is 1 word, in case of (a)(b)(c) type regexes     the entire regex is just kept.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.core.frame.DataFrame</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.sanity</span> <span class="kn">import</span> <span class="n">eval_all</span><span class="p">,</span> <span class="vm">__file__</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2cog27</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span>     <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;forms_27cogs.csv&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2out</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;output_files&quot;</span> <span class="o">/</span>     <span class="s2">&quot;eval_27cogs.csv&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">eval_all</span><span class="p">(</span><span class="n">forms_csv</span><span class="o">=</span><span class="n">path2cog27</span><span class="p">,</span> <span class="n">target_language</span><span class="o">=</span><span class="s2">&quot;EAH&quot;</span><span class="p">,</span> <span class="n">source_language</span><span class="o">=</span><span class="s2">&quot;WOT&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;reconstruct&quot;</span><span class="p">,</span> <span class="n">clusters</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">sort_by_nse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">write_to</span><span class="o">=</span><span class="n">path2out</span><span class="p">)</span>
<span class="go">[inspect result in folder output_files]</span>
</pre></div>
</div>
</dd></dl>

</section>
</section>
<section id="module-loanfinder">
<span id="loanfinder-py"></span><h2>loanfinder.py<a class="headerlink" href="#module-loanfinder" title="Permalink to this headline">¶</a></h2>
<p>Find (old) loanwords between two languages</p>
<section id="search">
<h3>Search<a class="headerlink" href="#search" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="loanfinder.Search">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">loanfinder.</span></span><span class="sig-name descname"><span class="pre">Search</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path2donordf=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path2recipdf=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">donorcol='ad'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recipcol='rc'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phondist=0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phondist_msr='hamming_feature_edit_distance'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">semsim=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">semsim_msr=&lt;function</span> <span class="pre">gensim_multiword&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scdictlist_ad=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scdictlist_rc=None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanfinder.Search" title="Permalink to this definition">¶</a></dt>
<dd><p>Define the two word lists, the measurements to calculate phonological distance and semantic similarity and the thresholds below or above which to accept matches.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path2donordf</strong> (<em>pathlib.PosixPath</em><em> | </em><em>str</em><em> | </em><em>None</em><em>, </em><em>default=None</em>) – The path to forms.csv of the donor language containing a column of predicted adaptations into the recipient language.</p></li>
<li><p><strong>path2recipdf</strong> (<em>pathlib.PosixPath</em><em> | </em><em>str</em><em> | </em><em>None</em><em>, </em><em>default=None</em>) – The path to forms.csv of the recipient language, containing a column of predicted backward-reconstructions stored as regular expressions.</p></li>
<li><p><strong>donorcol</strong> (<em>str</em><em>, </em><em>default=&quot;ad&quot;</em>) – The name of the column in the donor language’s forms.csv containing a column of predicted adaptations into the tentative recipient language.</p></li>
<li><p><strong>recipcol</strong> (<em>str</em><em>, </em><em>default=&quot;rc&quot;</em>) – The name of the column in the recipient language’s forms.csv containing a column of words in that language. If we are searching for old loanwords, this column can consist of regular expressions that represent backward reconstructions of present-day words.</p></li>
<li><p><strong>phondist</strong> (<em>int</em><em>, </em><em>default=0</em>) – The maximal phonological distance between two words. By default, matches have to be identical.</p></li>
<li><p><strong>phondist_msr</strong> (<em>&quot;doglo_prime_distance&quot;</em><em> |             </em><em>&quot;dolgo_prime_distance_div_maxlen&quot;</em><em> | </em><em>&quot;fast_levenshtein_distance&quot;</em><em> | </em><em>&quot;fast_levenshtein_distance_div_maxlen&quot;</em><em> | </em><em>&quot;feature_difference&quot;</em><em> | </em><em>&quot;feature_edit_distance&quot;</em><em> | </em><em>&quot;feature_edit_distance_div_maxlen&quot;</em><em> | </em><em>&quot;hamming_feature_edit_distance&quot;</em><em> | </em><em>&quot;hamming_feature_edit_distance_div_maxlen&quot;</em><em> | </em><em>&quot;hamming_substitution_cost&quot;</em><em> | </em><em>&quot;jt_feature_edit_distance&quot;</em><em> | </em><em>&quot;jt_feature_edit_distance_div_maxlen&quot;</em><em> | </em><em>&quot;jt_hamming_feature_edit_distance&quot;</em><em> | </em><em>&quot;jt_hamming_feature_edit_distance_div_maxlen&quot;</em><em> | </em><em>&quot;jt_weighted_feature_edit_distance&quot;</em><em> | </em><em>&quot;jt_weighted_feature_edit_distance_div_maxlen&quot;</em><em> | </em><em>&quot;levenshtein_distance&quot;</em><em>, </em><em>default=&quot;hamming_feature_edit_distance&quot;</em>) – The name of the phonological distance measure, which has to be a method of panphon.distance.Distance</p></li>
<li><p><strong>semsim</strong> (<em>int</em><em> (</em><em>float between -1 and 1 for gensim</em><em>)</em>) – The minimal semantic similarity between the meaning of words. By default, meaning have to be identical</p></li>
<li><p><strong>semsim_msr</strong> (<em>function of type func</em><em>(</em><em>a:str</em><em>, </em><em>b:str</em><em>) </em><em>-&gt; int</em>) – The function with which to measure semantic similarity.</p></li>
<li><p><strong>scdictlist_ad</strong> (<em>list of 6 dicts. Dicts 0</em><em>, </em><em>1</em><em>, </em><em>2 capture phonological correspondences</em><em>, </em><em>dicts 3</em><em>, </em><em>4</em><em>, </em><em>5 phonotactical ones. dict0/dict3: the actual correspondences</em><em>, </em><em>dict1/dict4: How often they occur in the data</em><em>, </em><em>dict2/dict5: list of cognates in which they occur.</em>) – list of correspondence dictionaries between tentative donor and recipient language generated with loanpy.qfysc.get_sound_corresp. Not a dictionary, therefore sequence important. Will be used in loanpy.loanfinder.Search.likeliestphonmatch to calculate likelihood (nse) from predicted adaptation vs source word.</p></li>
<li><p><strong>scdictlist_rc</strong> (<em>list of 6 dicts. Dicts 0</em><em>, </em><em>1</em><em>, </em><em>2 capture phonological correspondences</em><em>, </em><em>dicts 3</em><em>, </em><em>4</em><em>, </em><em>5 phonotactical ones. dict0/dict3: the actual correspondences</em><em>, </em><em>dict1/dict4: How often they occur in the data</em><em>, </em><em>dict2/dict5: list of cognates in which they occur.</em>) – list of correspondence dictionaries between present-day language and past stage of that language generated with loanpy.qfysc.get_sound_corresp. Not a dictionary, therefore sequence important. Will be used in loanpy.loanfinder.Search.likeliestphonmatch to calculate likelihood (nse) from predicted reconstruction vs source word.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.loanfinder</span> <span class="kn">import</span> <span class="n">Search</span><span class="p">,</span> <span class="vm">__file__</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2rec</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span><span class="o">/</span> <span class="s2">&quot;hun.csv&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2don</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span><span class="o">/</span> <span class="s2">&quot;got.csv&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2sc_ad</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;sc_ad_3cogs.txt&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2sc_rc</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;sc_rc_3cogs.txt&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">search_obj</span> <span class="o">=</span> <span class="n">Search</span><span class="p">(</span><span class="n">path2donordf</span><span class="o">=</span><span class="n">path2don</span><span class="p">,</span> <span class="n">path2recipdf</span><span class="o">=</span><span class="n">path2rec</span><span class="p">,</span> <span class="n">scdictlist_ad</span><span class="o">=</span><span class="n">path2sc_ad</span><span class="p">,</span> <span class="n">scdictlist_rc</span><span class="o">=</span><span class="n">path2sc_rc</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="loans">
<h3>loans<a class="headerlink" href="#loans" title="Permalink to this headline">¶</a></h3>
<dl class="py method">
<dt class="sig sig-object py" id="loanfinder.Search.loans">
<span class="sig-prename descclassname"><span class="pre">Search.</span></span><span class="sig-name descname"><span class="pre">loans</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">write_to</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">postprocess</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">merge_with_rest</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanfinder.Search.loans" title="Permalink to this definition">¶</a></dt>
<dd><p>Searches for phonological matches and calculates their semantic similarity. Returns candidate list of loans.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>write_to</strong> (<em>pathlib.PosixPath</em><em> | </em><em>str</em><em> | </em><em>None</em><em> | </em><em>False</em><em>, </em><em>default=False</em>) – indicate if results should be written to file. If yes, provide path.</p></li>
<li><p><strong>postprocess</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Indicate if results should be postprocessed. See loanpy.loanfinder.Search.postprocess for more details</p></li>
<li><p><strong>merge_with_rest</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Indicate if additional info from input data frame columns should be copied into the output data frame. Helps with quick debugging sometimes. See loanpy.loanfinder.Search.merge_with_rest for more details</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>data frame with potential loanwords</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.core.series.Series</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.loanfinder</span> <span class="kn">import</span> <span class="n">Search</span><span class="p">,</span> <span class="vm">__file__</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.helpers</span> <span class="kn">import</span> <span class="n">plug_in_model</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">gensim.models</span> <span class="kn">import</span> <span class="n">word2vec</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">gensim.test.utils</span> <span class="kn">import</span> <span class="n">common_texts</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">in_got</span> <span class="o">=</span> <span class="n">path2donordf</span><span class="o">=</span><span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;loans_got.csv&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">in_hun</span> <span class="o">=</span> <span class="n">path2donordf</span><span class="o">=</span><span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;loans_hun.csv&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">search_obj</span> <span class="o">=</span> <span class="n">Search</span><span class="p">(</span><span class="n">in_got</span><span class="p">,</span> <span class="n">in_hun</span><span class="p">,</span> <span class="n">semsim</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># plug in dummy vectors, api (default) would need internet + a minute to load</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plug_in_model</span><span class="p">(</span><span class="n">word2vec</span><span class="o">.</span><span class="n">Word2Vec</span><span class="p">(</span><span class="n">common_texts</span><span class="p">,</span> <span class="n">min_count</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">wv</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">search_obj</span><span class="o">.</span><span class="n">loans</span><span class="p">()</span>
<span class="go">    match recipdf_idx        Meaning_x     Meaning_y gensim_multiword</span>
<span class="go"> 0  blub       0       computer, interface   human      0.109408</span>
</pre></div>
</div>
</dd></dl>

</section>
</section>
</section>
<section id="for-internal-calls">
<h1>For internal calls<a class="headerlink" href="#for-internal-calls" title="Permalink to this headline">¶</a></h1>
<section id="module-loanpy.helpers">
<span id="helpers-py"></span><h2>helpers.py<a class="headerlink" href="#module-loanpy.helpers" title="Permalink to this headline">¶</a></h2>
<p>Contains helper functions and class Etym, which are called by other modules. But some functions may be useful for other linguistic tasks.</p>
<dl class="py class">
<dt class="sig sig-object py" id="loanpy.helpers.Etym">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">loanpy.helpers.</span></span><span class="sig-name descname"><span class="pre">Etym</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">forms_csv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_language</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_language</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phoneme_inventory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_inventory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phonotactic_inventory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distance_measure</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'weighted_feature_edit_distance'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">most_frequent_phonotactics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">9999999</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.helpers.Etym" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class that is based on 2 datasets: The first is static, and is ipa_all.csv from panphon, together with its “spinoff” cvfb.txt. The second has to be defined through the init args and will be data extracted from a forms.csv (cldf data standard, insert link here later). The class methods eventually all rely on panphon / data / “ipa_all.csv”. loanpy’s ipa_all.csv is slightly modified but I didn’t keep track of the modifications. I remember that I changed the status of the glottal stop at least. And added “C”, “V” to the bottom. Todo: Plug back in the original ipa_all.csv.Define consonants, vowels, front vowels, and back vowels based on David R. Mortensen, Patrick Littell, Akash Bharadwaj, Kartik Goyal, Chris Dyer, Lori Levin (2016). “PanPhon: A Resource for Mapping IPA Segments to Articulatory Feature Vectors.” Proceedings of COLING 2016, the 26th International Conference on Computational Linguistics: Technical Papers, pages 3475–3484, Osaka, Japan, December 11-17 2016. (Based on SPE by Chomsyk&amp;Halle). Turn forms.csv into a pandas data frame, and extract following information from it: phoneme phoneme_inventory: a set of all phonemes that occur in the language’s words, cluster_inventory: a set of all consonant and vowel cluster_inventory occuring in the language, phonotactic_inventory: a list of phonotactic structures that occur in the language, sorted according to their frequency</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>forms_csv</strong> (<em>pathlib.PosixPath</em><em> | </em><em>str</em><em> | </em><em>None</em>) – a forms.csv of the cldf data standard (<a class="reference external" href="https://cldf.clld.org/">https://cldf.clld.org/</a>)</p></li>
<li><p><strong>source_language</strong> (<em>str</em>) – The technical source language as defined in cldf’s etc / “languages.tsv”. This can be confusing, as sometimes the technical source language for the predictions can be the linguistic target language, e.g. when we are backward reconstructing. But when we are adapting loanwords the technical and the linguistic source word are usually the same.</p></li>
<li><p><strong>target_language</strong> (<em>str</em>) – The technical target language as defined in cldf’s etc / “languages.tsv”. For caveats see param source_language</p></li>
<li><p><strong>phoneme_inventory</strong> (<em>None</em><em> | </em><em>list</em><em> | </em><em>set</em>) – The phoneme phoneme_inventory. If None, it will be extracted automatically from forms.csv</p></li>
<li><p><strong>cluster_inventory</strong> (<em>None</em><em> | </em><em>list</em><em> | </em><em>set</em>) – All consonant and vowel cluster_inventory that occur in the language. If None, will be automatically extracted from forms.csv</p></li>
<li><p><strong>phonotactic_inventory</strong> (<em>None</em><em> | </em><em>list</em><em> | </em><em>set</em>) – All phonetic structures (“CVCV”) that occur in the language</p></li>
<li><p><strong>distance_measure</strong> (<em>function</em>) – The distance measure. See help(read_dst)</p></li>
<li><p><strong>phonotactics_most_frquent</strong> (<em>int</em>) – The how many most frequently occuring phonotactic structures should we allow to be part of the phoneme_inventory.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.helpers</span> <span class="kn">import</span> <span class="n">Etym</span><span class="p">,</span> <span class="vm">__file__</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2forms</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;integration&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;forms.csv&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">etym_obj</span> <span class="o">=</span> <span class="n">Etym</span><span class="p">(</span><span class="n">forms_csv</span><span class="o">=</span><span class="n">path2forms</span><span class="p">,</span> <span class="n">source_language</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">target_language</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">etym_obj</span><span class="o">.</span><span class="n">phon2cv</span><span class="p">[</span><span class="s2">&quot;k&quot;</span><span class="p">]</span>
<span class="go">&#39;C&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">etym_obj</span><span class="o">.</span><span class="n">vow2fb</span><span class="p">[</span><span class="s2">&quot;e&quot;</span><span class="p">]</span>
<span class="go">&#39;F&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">etym_obj</span><span class="o">.</span><span class="n">distance_measure</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">)</span>
<span class="go">0.25</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">etym_obj</span><span class="o">.</span><span class="n">dfety</span>
<span class="go">      Target_Form Source_Form  Cognacy</span>
<span class="go">0         xyz         abc        1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">etym_obj</span><span class="o">.</span><span class="n">phoneme_inventory</span>
<span class="go">{&#39;y&#39;, &#39;z&#39;, &#39;x&#39;}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">etym_obj</span><span class="o">.</span><span class="n">cluster_inventory</span>
<span class="go">{&#39;y&#39;, &#39;z&#39;, &#39;x&#39;}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">etym_obj</span><span class="o">.</span><span class="n">phonotactic_inventory</span>
<span class="go">{&#39;CVC&#39;}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">etym_obj</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>
<span class="go">7</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="loanpy.helpers.Etym.adapt_harmony">
<span class="sig-name descname"><span class="pre">adapt_harmony</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ipalist</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.helpers.Etym.adapt_harmony" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.adrc.Adrc.adapt. Counts how many front and back vowels there are in a word. If there are more back than front vowels, all front vowels will be replaced by a “B”, if there are more front than back vowels, the back vowels will be replaced by “F”, and if the word has equally many front as back vowels, both options will be returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ipalist</strong> (<em>list of str</em><em> | </em><em>str</em>) – a list or a string of phonemes</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a tokenised word with repaired vowelharmony</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list of listt of str</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.helpers</span> <span class="kn">import</span> <span class="n">Etym</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hp</span> <span class="o">=</span> <span class="n">Etym</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hp</span><span class="o">.</span><span class="n">adapt_harmony</span><span class="p">(</span><span class="s1">&#39;kɛsthɛj&#39;</span><span class="p">)</span>
<span class="go">[[&#39;k&#39;, &#39;ɛ&#39;, &#39;s&#39;, &#39;t&#39;, &#39;h&#39;, &#39;ɛ&#39;, &#39;j&#39;]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hp</span><span class="o">.</span><span class="n">adapt_harmony</span><span class="p">([</span><span class="s1">&#39;ɒ&#39;</span><span class="p">,</span> <span class="s1">&#39;l&#39;</span><span class="p">,</span> <span class="s1">&#39;ʃ&#39;</span><span class="p">,</span> <span class="s1">&#39;oː&#39;</span><span class="p">,</span> <span class="s1">&#39;ø&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="s1">&#39;ʃ&#39;</span><span class="p">])</span>
<span class="go">[[&#39;ɒ&#39;, &#39;l&#39;, &#39;ʃ&#39;, &#39;oː&#39;, &#39;B&#39;, &#39;r&#39;, &#39;ʃ&#39;]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hp</span><span class="o">.</span><span class="n">adapt_harmony</span><span class="p">([</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;eː&#39;</span><span class="p">,</span> <span class="s1">&#39;l&#39;</span><span class="p">,</span> <span class="s1">&#39;ɒ&#39;</span><span class="p">,</span> <span class="s1">&#39;t&#39;</span><span class="p">,</span> <span class="s1">&#39;ɛ&#39;</span><span class="p">,</span> <span class="s1">&#39;l&#39;</span><span class="p">,</span> <span class="s1">&#39;ɛ&#39;</span><span class="p">,</span> <span class="s1">&#39;p&#39;</span><span class="p">])</span>
<span class="go">[[&#39;b&#39;, &#39;eː&#39;, &#39;l&#39;, &#39;F&#39;, &#39;t&#39;, &#39;ɛ&#39;, &#39;l&#39;, &#39;ɛ&#39;, &#39;p&#39;]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hp</span><span class="o">.</span><span class="n">adapt_harmony</span><span class="p">([</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;ɒ&#39;</span><span class="p">,</span> <span class="s1">&#39;l&#39;</span><span class="p">,</span> <span class="s1">&#39;ɒ&#39;</span><span class="p">,</span> <span class="s1">&#39;t&#39;</span><span class="p">,</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="s1">&#39;ɛ&#39;</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="s1">&#39;ɛ&#39;</span><span class="p">,</span> <span class="s1">&#39;ʃ&#39;</span><span class="p">,</span> <span class="s1">&#39;ɛ&#39;</span><span class="p">])</span>
<span class="go">[[&#39;b&#39;, &#39;F&#39;, &#39;l&#39;, &#39;F&#39;, &#39;t&#39;, &#39;F&#39;, &#39;n&#39;, &#39;k&#39;, &#39;ɛ&#39;, &#39;n&#39;, &#39;ɛ&#39;, &#39;ʃ&#39;, &#39;ɛ&#39;], [&#39;b&#39;, &#39;ɒ&#39;, &#39;l&#39;, &#39;ɒ&#39;, &#39;t&#39;, &#39;o&#39;, &#39;n&#39;, &#39;k&#39;, &#39;B&#39;, &#39;n&#39;, &#39;B&#39;, &#39;ʃ&#39;, &#39;B&#39;]]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="loanpy.helpers.Etym.get_fb">
<span class="sig-name descname"><span class="pre">get_fb</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ipalist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">turnto</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'F'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.helpers.Etym.get_fb" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by adapt_harmony. Turns front vowels to back ones if turnto=”B”, but turns back vowels to front ones if turnto=”F”</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ipalist</strong> (<em>list</em>) – a tokenised ipa-string</p></li>
<li><p><strong>turnto</strong> (<em>{&quot;F&quot;</em><em>, </em><em>&quot;B&quot;}</em>) – turn back vowels to front ones or vice verse</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a tokenised word with some vowels replaced by “F” or “B”.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy</span> <span class="kn">import</span> <span class="n">helpers</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hp</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">Etym</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hp</span><span class="o">.</span><span class="n">get_fb</span><span class="p">([</span><span class="s1">&#39;ɒ&#39;</span><span class="p">,</span> <span class="s1">&#39;l&#39;</span><span class="p">,</span> <span class="s1">&#39;ʃ&#39;</span><span class="p">,</span> <span class="s1">&#39;oː&#39;</span><span class="p">,</span> <span class="s1">&#39;ø&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="s1">&#39;ʃ&#39;</span><span class="p">],</span> <span class="n">turnto</span><span class="o">=</span><span class="s2">&quot;B&quot;</span><span class="p">)</span>
<span class="go">[&#39;ɒ&#39;, &#39;l&#39;, &#39;ʃ&#39;, &#39;oː&#39;, &#39;B&#39;, &#39;r&#39;, &#39;ʃ&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="loanpy.helpers.Etym.get_inventories">
<span class="sig-name descname"><span class="pre">get_inventories</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">phoneme_inventory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_inventory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phonotactic_inventory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">most_frequent_phonotactics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">9999999</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.helpers.Etym.get_inventories" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="loanpy.helpers.Etym.get_scdictbase">
<span class="sig-name descname"><span class="pre">get_scdictbase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">write_to</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">most_common</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">inf</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.helpers.Etym.get_scdictbase" title="Permalink to this definition">¶</a></dt>
<dd><p>Call manually in the beginning. Loop through ipa_all.csv and rank most similar phonemes from phoneme_inventory. Could also turn ipa_all.csv into a square of 6358*6358 phonemes and just use that file for all future cases but that would use an estimated 500MB per type of distance measure. So more economical to calculate it this way. Will still, depending on size of phoneme phoneme_inventory, take up about 2MB. result is returned, assigned to self.scdictbase and optionally written. Usually there is very little data available on sound substitutions and the ones available give only very small instight into all possibilities. The idea here is therefore that any sound that is not contained in a language’s phoneme phoneme_inventory will be replaced by the most similar available one(s). The available sound substitutions based on etymological data will be combined with this heuristics, if available.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>write_to</strong> (<em>None</em><em> | </em><em>&lt;class 'pathlib.PosixPath'&gt;</em><em> | </em><em>str</em>) – If or where the output should be written.</p></li>
<li><p><strong>most_common</strong> – Add only this many most similar phonemes to scdictbase. By default the entire phoneme phoneme_inventory will be ranked.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A heuristic approach to sound substitution in loanword adaptation</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.helpers</span> <span class="kn">import</span> <span class="n">Etym</span><span class="p">,</span> <span class="vm">__file__</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">etym_obj</span> <span class="o">=</span> <span class="n">Etym</span><span class="p">(</span><span class="n">forms_csv</span><span class="o">=</span><span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;integration&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;forms.csv&quot;</span><span class="p">,</span> <span class="n">source_language</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">target_language</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">etym_obj</span><span class="o">.</span><span class="n">get_scdictbase</span><span class="p">()</span>
<span class="go">(returns the entire dictionary with phoneme_inventory ranked according to similarity)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">etym_obj</span><span class="o">.</span><span class="n">scdictbase</span><span class="p">[</span><span class="s2">&quot;i&quot;</span><span class="p">]</span>
<span class="go">[&quot;y&quot;, &quot;x&quot;, &quot;z&quot;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="loanpy.helpers.Etym.harmony">
<span class="sig-name descname"><span class="pre">harmony</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ipalist</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.helpers.Etym.harmony" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.helpers.Etym.adapt_harmony and loanpy.adrc.Adrc.reconstruct. Returns True if there are only front or only back vowels in a word else False.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ipalist</strong> (<em>{list of str</em><em>, </em><em>str}</em>) – the word that should be analysed</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Does the word have front-back vowelharmony?</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy</span> <span class="kn">import</span> <span class="n">helpers</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hp</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">Etym</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hp</span><span class="o">.</span><span class="n">harmony</span><span class="p">(</span><span class="s2">&quot;bot͡sibot͡si&quot;</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy</span> <span class="kn">import</span> <span class="n">helpers</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hp</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">Etym</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hp</span><span class="o">.</span><span class="n">harmony</span><span class="p">([</span><span class="s2">&quot;t&quot;</span><span class="p">,</span> <span class="s2">&quot;ɒ&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="s2">&quot;k&quot;</span><span class="p">,</span> <span class="s2">&quot;ɒ&quot;</span><span class="p">])</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="loanpy.helpers.Etym.rank_closest">
<span class="sig-name descname"><span class="pre">rank_closest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ph</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">howmany</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">inf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.helpers.Etym.rank_closest" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by get_scdictbase. Sort self.phoneme_inventory by distance to input-phoneme.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ph</strong> (<em>str</em><em> (</em><em>valid chars: col &quot;ipa&quot; in ipa_all.csv</em><em>)</em>) – phoneme to which to rank the phoneme_inventory</p></li>
<li><p><strong>howmany</strong> (<em>{int</em><em>, </em><em>float</em><em>(</em><em>&quot;inf&quot;</em><em>)</em><em>}</em>) – howmany of the most similar to pick</p></li>
<li><p><strong>inv</strong> (<em>list</em><em> | </em><em>set</em>) – To plug in phoneme phoneme_inventory manually if necessary</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the phoneme phoneme_inventory ranked by similarity (most similar first)</p>
</dd>
<dt class="field-odd">Rytpe</dt>
<dd class="field-odd"><p>str (elements separates by “, “)</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.helpers</span> <span class="kn">import</span> <span class="n">Etym</span><span class="p">,</span> <span class="vm">__file__</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">etym_obj</span> <span class="o">=</span> <span class="n">Etym</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">etym_obj</span><span class="o">.</span><span class="n">rank_closest</span><span class="p">(</span><span class="n">ph</span><span class="o">=</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="n">inv</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="s2">&quot;t&quot;</span><span class="p">,</span> <span class="s2">&quot;l&quot;</span><span class="p">],</span> <span class="n">howmany</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="go">&#39;t&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">etym_obj</span> <span class="o">=</span> <span class="n">Etym</span><span class="p">(</span><span class="n">phoneme_inventory</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">etym_obj</span><span class="o">.</span><span class="n">rank_closest</span><span class="p">(</span><span class="n">ph</span><span class="o">=</span><span class="s2">&quot;d&quot;</span><span class="p">)</span>
<span class="go">&#39;b, c, a&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="loanpy.helpers.Etym.rank_closest_phonotactics">
<span class="sig-name descname"><span class="pre">rank_closest_phonotactics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">struc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">howmany</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">9999999</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.helpers.Etym.rank_closest_phonotactics" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.qfysc.Qfy.get_phonotactics_corresp. Sort self.phonotactic_inventory by distance to given phonotactic structure using editdistance with two operations (insert (cost: 49), delete (cost: 100)).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>struc</strong> (<em>str</em><em> (</em><em>consisting of &quot;C&quot;s and &quot;V&quot;s only</em><em>)</em>) – The phonetic structure to which to rank the phoneme_inventory</p></li>
<li><p><strong>howmany</strong> (<em>{int</em><em>, </em><em>float</em><em>(</em><em>&quot;inf&quot;</em><em>)</em><em>}</em>) – Howmany of the most similar structures should be picked</p></li>
<li><p><strong>inv</strong> (<em>list</em><em> | </em><em>set</em>) – To plug in the phonotactic structure phoneme_inventory manually if necessary</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the phonotactic phoneme_inventory ranked by similarity (most similar first)</p>
</dd>
<dt class="field-odd">Rytpe</dt>
<dd class="field-odd"><p>str (elements separates by “, “)</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.helpers</span> <span class="kn">import</span> <span class="n">Etym</span><span class="p">,</span> <span class="vm">__file__</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">etym_obj</span> <span class="o">=</span> <span class="n">Etym</span><span class="p">(</span><span class="n">phonotactic_inventory</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;CVC&quot;</span><span class="p">,</span> <span class="s2">&quot;CVCVV&quot;</span><span class="p">,</span> <span class="s2">&quot;CCCC&quot;</span><span class="p">,</span> <span class="s2">&quot;VVVVVV&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">etym_obj</span><span class="o">.</span><span class="n">rank_closest_phonotactics</span><span class="p">(</span><span class="n">struc</span><span class="o">=</span><span class="s2">&quot;CVCV&quot;</span><span class="p">,</span> <span class="n">howmany</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="go">&#39;CVCVV&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">etym_obj</span> <span class="o">=</span> <span class="n">Etym</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">etym_obj</span><span class="o">.</span><span class="n">rank_closest_phonotactics</span><span class="p">(</span><span class="n">struc</span><span class="o">=</span><span class="s2">&quot;CVCV&quot;</span><span class="p">,</span> <span class="n">howmany</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">inv</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;CVC&quot;</span><span class="p">,</span> <span class="s2">&quot;CVCVV&quot;</span><span class="p">,</span> <span class="s2">&quot;CCCC&quot;</span><span class="p">,</span> <span class="s2">&quot;VVVVVV&quot;</span><span class="p">])</span>
<span class="go">&quot;CVCVV, CVC, CCCC&quot;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="loanpy.helpers.Etym.read_inventory">
<span class="sig-name descname"><span class="pre">read_inventory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inv</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func=functools.partial(&lt;function</span> <span class="pre">tokenise&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replace=True)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.helpers.Etym.read_inventory" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.helpers.Etym.__init__;     Calculates and returns phoneme phoneme_inventory from a list of words.     Param &lt;inv&gt; is if phoneme_inventory should not be calculated but manually plugged in.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inv</strong> (<em>set</em>) – a set of phonemes that occure in given language.     if inv is None, inv will be calculated from forms else inv will be returned.</p></li>
<li><p><strong>forms</strong> (<em>list of str</em>) – a list of words occuring in giving language</p></li>
<li><p><strong>func</strong> (<em>function</em>) – the tokeniser to split words into phonemes</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The phoneme phoneme_inventory of the language</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>set | None | same as input type</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.helpers</span> <span class="kn">import</span> <span class="n">read_inventory</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">read_inventory</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span>  <span class="p">[</span><span class="s2">&quot;fdedaeda&quot;</span><span class="p">,</span> <span class="s2">&quot;badea&quot;</span><span class="p">,</span> <span class="s2">&quot;fdddedab&quot;</span><span class="p">])</span>
<span class="go">{&#39;b&#39;, &#39;d&#39;, &#39;f&#39;, &#39;a&#39;, &#39;e&#39;}</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.helpers</span> <span class="kn">import</span> <span class="n">read_inventory</span><span class="p">,</span> <span class="n">clusterise</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">read_inventory</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span>  <span class="p">[</span><span class="s2">&quot;fdedaeda&quot;</span><span class="p">,</span> <span class="s2">&quot;badea&quot;</span><span class="p">,</span> <span class="s2">&quot;fdddedab&quot;</span><span class="p">],</span> <span class="n">clusterise</span><span class="p">)</span>
<span class="go">{&#39;b&#39;, &#39;ea&#39;, &#39;d&#39;, &#39;fd&#39;, &#39;a&#39;, &#39;ae&#39;, &#39;fddd&#39;, &#39;e&#39;}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="loanpy.helpers.Etym.read_phonotacticsinv">
<span class="sig-name descname"><span class="pre">read_phonotacticsinv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">phonotactic_inventory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">howmany</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">9999999</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.helpers.Etym.read_phonotacticsinv" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.helpers.Etym.__init__; Returns phoneme_inventory of the most frequent x phonotactic structures. Caveat: The map function seems to swallow errors that would be otherwise triggered by Counter. E.g. if you use a float (including float(“inf”)) for param &lt;howmany&gt;, an empty string will be returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>phonotactic_inventory</strong> (<em>None</em><em> | </em><em>list</em><em> | </em><em>set</em><em> | </em><em>same type as input</em>) – Possibility to plug in the phoneme_inventory manually.</p></li>
<li><p><strong>forms</strong> (<em>list</em><em> | </em><em>None</em>) – a list of words in a language</p></li>
<li><p><strong>howmany</strong> (<em>int</em>) – howmany most frequent structures should be added to phoneme_inventory</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>all possible phonotactic structures documented in the data</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.helpers</span> <span class="kn">import</span> <span class="n">Etym</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">etym</span> <span class="o">=</span> <span class="n">Etym</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">etym</span><span class="o">.</span><span class="n">read_phonotacticsinv</span><span class="p">(</span><span class="n">forms</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;ab&quot;</span><span class="p">,</span> <span class="s2">&quot;ab&quot;</span><span class="p">,</span> <span class="s2">&quot;aa&quot;</span><span class="p">,</span> <span class="s2">&quot;bb&quot;</span><span class="p">,</span> <span class="s2">&quot;bb&quot;</span><span class="p">,</span> <span class="s2">&quot;bb&quot;</span><span class="p">])</span>
<span class="go">{&#39;VV&#39;, &#39;CC&#39;, &#39;VC&#39;}</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.helpers</span> <span class="kn">import</span> <span class="n">Etym</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">etym</span><span class="p">,</span> <span class="n">forms</span> <span class="o">=</span> <span class="n">Etym</span><span class="p">(),</span> <span class="p">[</span><span class="s2">&quot;ab&quot;</span><span class="p">,</span> <span class="s2">&quot;ab&quot;</span><span class="p">,</span> <span class="s2">&quot;aa&quot;</span><span class="p">,</span> <span class="s2">&quot;bb&quot;</span><span class="p">,</span> <span class="s2">&quot;bb&quot;</span><span class="p">,</span> <span class="s2">&quot;bb&quot;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">etym</span><span class="o">.</span><span class="n">read_phonotacticsinv</span><span class="p">(</span><span class="n">forms</span><span class="o">=</span><span class="n">forms</span><span class="p">,</span> <span class="n">howmany</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="go">[&#39;CC&#39;] # b/c that&#39;s the nr 1 most frequent structure</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.helpers</span> <span class="kn">import</span> <span class="n">Etym</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">etym</span><span class="p">,</span> <span class="n">forms</span> <span class="o">=</span> <span class="n">Etym</span><span class="p">(),</span> <span class="p">[</span><span class="s2">&quot;ab&quot;</span><span class="p">,</span> <span class="s2">&quot;ab&quot;</span><span class="p">,</span> <span class="s2">&quot;aa&quot;</span><span class="p">,</span> <span class="s2">&quot;bb&quot;</span><span class="p">,</span> <span class="s2">&quot;bb&quot;</span><span class="p">,</span> <span class="s2">&quot;bb&quot;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">etym</span><span class="o">.</span><span class="n">read_phonotacticsinv</span><span class="p">(</span><span class="n">forms</span><span class="o">=</span><span class="n">forms</span><span class="p">,</span> <span class="n">howmany</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="go">[&#39;CC&#39;, &#39;VC&#39;] # b/c that&#39;s the 2 most frequent structures</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="loanpy.helpers.Etym.word2phonotactics_keepcv">
<span class="sig-name descname"><span class="pre">word2phonotactics_keepcv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ipa_in</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.helpers.Etym.word2phonotactics_keepcv" title="Permalink to this definition">¶</a></dt>
<dd><p>Not called by any function. Returns the phonotactic profile of an ipa-string while keeping Cs and Vs. Originally written for sanity.py but currently not used anywhere.</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy</span> <span class="kn">import</span> <span class="n">helpers</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hp</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">Etym</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hp</span><span class="o">.</span><span class="n">word2phonotactics_keepcv</span><span class="p">(</span><span class="s2">&quot;CloVl&quot;</span><span class="p">)</span>
<span class="go">&#39;CCVVC&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="loanpy.helpers.Etym.word2struc">
<span class="sig-name descname"><span class="pre">word2struc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ipa_in</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.helpers.Etym.word2struc" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.helpers.Etym.__init__; loanpy.qfysc.Qfy.get_phonotactics_corresp, loanpy.adrc.Adrc.adapt, loanpy.adrc.Adrc.adapt_phonotactics, loanpy.adrc.Adrc.reconstruct, and loanpy.santiy.write_workflow.</p>
<p>Returns the phonotactic profile of an ipa-string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ipa_in</strong> (<em>str</em><em> | </em><em>list</em>) – a string or list consisting of IPA-characters. if input is string, it will be tokenised.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the phonotactic profile of the word</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy</span> <span class="kn">import</span> <span class="n">helpers</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hp</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">Etym</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hp</span><span class="o">.</span><span class="n">word2struc</span><span class="p">(</span><span class="s2">&quot;lol&quot;</span><span class="p">)</span>
<span class="go">&#39;CVC&#39;</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="loanpy.helpers.InventoryMissingError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">loanpy.helpers.</span></span><span class="sig-name descname"><span class="pre">InventoryMissingError</span></span><a class="headerlink" href="#loanpy.helpers.InventoryMissingError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>Called by lonapy.helpers.Etym.rank_closest and loanpy.helpers.Etym.rank_closest_phonotactics if neither forms.csv is defined nor the phonotactic/phoneme phoneme_inventory is plugged in.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="loanpy.helpers.apply_edit">
<span class="sig-prename descclassname"><span class="pre">loanpy.helpers.</span></span><span class="sig-name descname"><span class="pre">apply_edit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">word</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">editops</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.helpers.apply_edit" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.adrc.Adrc.adapt_phonotactics. Applies a list of human readable edit operations to a string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>word</strong> (<em>an iterable</em><em> (</em><em>e.g. list of phonemes</em><em>, or </em><em>string</em><em>)</em>) – The input word</p></li>
<li><p><strong>editops</strong> (<em>list</em><em> or </em><em>tuple of strings</em>) – list of (human readable) edit operations</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>transformed input word</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list of str</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.helpers</span> <span class="kn">import</span> <span class="n">apply_edit</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">apply_edit</span><span class="p">([</span><span class="s2">&quot;l&quot;</span><span class="p">,</span> <span class="s2">&quot;ó&quot;</span><span class="p">],</span> <span class="p">(</span><span class="s1">&#39;substitute l by h&#39;</span><span class="p">,</span> <span class="s1">&#39;keep ó&#39;</span><span class="p">))</span>
<span class="go">[&#39;h&#39;, &#39;ó&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">apply_edit</span><span class="p">(</span><span class="s2">&quot;ló&quot;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;keep C&#39;</span><span class="p">,</span> <span class="s1">&#39;insert C&#39;</span><span class="p">,</span> <span class="s1">&#39;insert V&#39;</span><span class="p">,</span> <span class="s1">&#39;keep V&#39;</span><span class="p">))</span>
<span class="go">[&#39;l&#39;, &#39;C&#39;, &#39;V&#39;, &#39;ó&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">apply_edit</span><span class="p">(</span><span class="s2">&quot;ló&quot;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;insert C&#39;</span><span class="p">,</span> <span class="s1">&#39;keep C&#39;</span><span class="p">,</span> <span class="s1">&#39;insert V&#39;</span><span class="p">,</span> <span class="s1">&#39;keep V&#39;</span><span class="p">))</span>
<span class="go">[&#39;C&#39;, &#39;l&#39;, &#39;V&#39;, &#39;ó&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="loanpy.helpers.cldf2pd">
<span class="sig-prename descclassname"><span class="pre">loanpy.helpers.</span></span><span class="sig-name descname"><span class="pre">cldf2pd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dfforms</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_language</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_language</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.helpers.cldf2pd" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Called by loanpy.helpers.Etym.__init__; Converts a cldf-csv to a pandas data frame. Returns None if dfforms is None, so class can be initiated without args too. Runs through forms.csv and creates a new data frame the following way: Checks if a cognate set contains words from both, source and target language. If yes: word from source lg goes to column “Source_Form”, word from target lg goes to column “Target_Form” and the number of the cognate set goes to column “Cognacy”. Note that if a cognate set doesn’t contain words from src and tgt lg, that cognate set is skipped.</p>
<dl class="field-list simple">
<dt class="field-odd">param dfforms</dt>
<dd class="field-odd"><p>Takes the output of read_forms() as input</p>
</dd>
<dt class="field-even">type dfforms</dt>
<dd class="field-even"><p>&lt;class ‘pandas.core.frame.DataFrame’&gt; | None</p>
</dd>
</dl>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>source_language</strong> – <p>The languages who’s cognates go to column “Source_Forms”
:type source_language: &lt;str&gt;</p>
<dl class="field-list simple">
<dt class="field-odd">param target_language</dt>
<dd class="field-odd"><p>The languages who’s cognates go to column “Target_Forms”</p>
</dd>
<dt class="field-even">type target_language</dt>
<dd class="field-even"><p>&lt;str&gt;</p>
</dd>
<dt class="field-odd">returns</dt>
<dd class="field-odd"><p>forms.csv data frame with re-positioned information</p>
</dd>
<dt class="field-even">rtype</dt>
<dd class="field-even"><p>&lt;class ‘pandas.core.frame.DataFrame’&gt; | None</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.helpers</span> <span class="kn">import</span> <span class="vm">__file__</span><span class="p">,</span> <span class="n">cldf2pd</span><span class="p">,</span> <span class="n">read_forms</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2forms</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;forms.csv&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">forms</span> <span class="o">=</span> <span class="n">read_forms</span><span class="p">(</span><span class="n">path2forms</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cldf2pd</span><span class="p">(</span><span class="n">forms</span><span class="p">,</span> <span class="n">source_language</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">target_language</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="go">      Target_Form Source_Form  Cognacy</span>
<span class="go">0         xyz         abc        1</span>
</pre></div>
</div>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="loanpy.helpers.combine_ipalists">
<span class="sig-prename descclassname"><span class="pre">loanpy.helpers.</span></span><span class="sig-name descname"><span class="pre">combine_ipalists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wrds</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.helpers.combine_ipalists" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.adrc.Adrc.adapt. Combines and flattens a list of lists of sound change lists.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>wrds</strong> (<em>list of lists of lists of str</em>) – list of words consisting of lists of sound change lists</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a list of words without empty strings as elements</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list of strings</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.helpers</span> <span class="kn">import</span> <span class="n">combine_ipalists</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">combine_ipalists</span><span class="p">([[[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;c&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;d&quot;</span><span class="p">]],</span> <span class="p">[[</span><span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="s2">&quot;f&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;g&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;h&quot;</span><span class="p">]]])</span>
<span class="go">[&#39;acd&#39;, &#39;bcd&#39;, &#39;egh&#39;, &#39;fgh&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="loanpy.helpers.edit_distance_with2ops">
<span class="sig-prename descclassname"><span class="pre">loanpy.helpers.</span></span><span class="sig-name descname"><span class="pre">edit_distance_with2ops</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">string1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">string2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">w_del</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">w_ins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">49</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.helpers.edit_distance_with2ops" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.helpers.Etym.rank_closest_phonotactics and loanpy.qfysc.Qfy.get_phonotactics_corresp. Takes two strings and calculates their similarity by only allowing two operations: insertion and deletion. In line with the “Threshold Principle” by Carole Paradis and Darlene LaCharité (1997) the distance is weighted in a way that two insertions are cheaper than one deletion: “The problem is really not very different from the dilemma of a landlord stuck with a limited budget for maintenance and a building which no longer meets municipal guidelines. Beyond a certain point, renovating is not viable (there are too many steps to be taken) and demolition is in order. Similarly, we posit that I) languages have a limited budget for adapting ill- formed phonological structures, and that 2) the limit for the budget is universally set at two steps, beyond which a repair by ‘demolition’ may apply. In other words, we predict that a segment is deleted if (but only if) its rescue is too costly in terms of the Threshold Principle” (p.385, Preservation and Minimality in Loanword Adaptation, Author(s): Carole Paradis and Darlene Lacharité, Source: Journal of Linguistics , Sep., 1997, Vol. 33, No. 2 (Sep., 1997), pp. 379-430, Published by: Cambridge University Press, Stable URL: <a class="reference external" href="http://www.jstor.com/stable/4176422">http://www.jstor.com/stable/4176422</a>). The code is based on a post by ita_c on <a class="reference external" href="https://www.geeksforgeeks.org/edit-distance-and-lcs-longest-common-subsequence">https://www.geeksforgeeks.org/edit-distance-and-lcs-longest-common-subsequence</a> (last access: 11.feb.2021)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>string1</strong> (<em>str</em>) – The first of two strings to be compared to each other</p></li>
<li><p><strong>string2</strong> (<em>str</em>) – The second of two strings to be compared to each other</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The distance between two input strings</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.helpers</span> <span class="kn">import</span> <span class="n">edit_distance_with2ops</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">edit_distance_with2ops</span><span class="p">(</span><span class="s2">&quot;hey&quot;</span><span class="p">,</span><span class="s2">&quot;hey&quot;</span><span class="p">)</span>
<span class="go">0.0</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.helpers</span> <span class="kn">import</span> <span class="n">edit_distance_with2ops</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">edit_distance_with2ops</span><span class="p">(</span><span class="s2">&quot;hey&quot;</span><span class="p">,</span><span class="s2">&quot;he&quot;</span><span class="p">)</span>
<span class="go">1.0</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.helpers</span> <span class="kn">import</span> <span class="n">edit_distance_with2ops</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">edit_distance_with2ops</span><span class="p">(</span><span class="s2">&quot;hey&quot;</span><span class="p">,</span><span class="s2">&quot;heyy&quot;</span><span class="p">)</span>
<span class="go">0.4</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="loanpy.helpers.editops">
<span class="sig-prename descclassname"><span class="pre">loanpy.helpers.</span></span><span class="sig-name descname"><span class="pre">editops</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">howmany_paths</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">w_del</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">w_ins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">49</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.helpers.editops" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.adrc.Adrc.adapt_phonotactics. Takes two strings and returns all paths of cheapest edit operations between them.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>s1</strong> (<em>iterable</em><em>, </em><em>e.g. str</em><em> or </em><em>list</em>) – The first of two iterables to be compared to each other</p></li>
<li><p><strong>s2</strong> (<em>iterable</em><em>, </em><em>e.g. str</em><em> or </em><em>list</em>) – The second of two iterables to be compared to each other</p></li>
<li><p><strong>howmany_paths</strong> (<em>int</em><em>, </em><em>default=1</em>) – The number of shortest paths that should be returned.</p></li>
<li><p><strong>w_del</strong> (<em>int</em><em>, </em><em>default=100</em>) – The weight (cost) of deletions</p></li>
<li><p><strong>w_ins</strong> (<em>int</em><em>, </em><em>default=49</em>) – The weight (cost) of insertions, according to TCRS 2 insertions are cheaper than 1 deletion by default.</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.helpers</span> <span class="kn">import</span> <span class="n">editops</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">editops</span><span class="p">(</span><span class="s2">&quot;Budapest&quot;</span><span class="p">,</span> <span class="s2">&quot;Bukarest&quot;</span><span class="p">)</span>
<span class="go">[(&#39;keep B&#39;, &#39;keep u&#39;, &#39;substitute d by k&#39;, &#39;keep a&#39;, &#39;substitute p by r&#39;, &#39;keep e&#39;, &#39;keep s&#39;, &#39;keep t&#39;)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">editops</span><span class="p">(</span><span class="s2">&quot;CV&quot;</span><span class="p">,</span> <span class="s2">&quot;CCVV&quot;</span><span class="p">)</span>
<span class="go">[(&#39;keep C&#39;, &#39;insert C&#39;, &#39;insert V&#39;, &#39;keep V&#39;)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">editops</span><span class="p">(</span><span class="s2">&quot;CV&quot;</span><span class="p">,</span> <span class="s2">&quot;CCVV&quot;</span><span class="p">,</span> <span class="n">howmany_paths</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="go">[(&#39;insert C&#39;, &#39;keep C&#39;, &#39;insert V&#39;, &#39;keep V&#39;), (&#39;insert C&#39;, &#39;keep C&#39;, &#39;keep V&#39;, &#39;insert V&#39;)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">editops</span><span class="p">(</span><span class="s2">&quot;CV&quot;</span><span class="p">,</span> <span class="s2">&quot;CCVV&quot;</span><span class="p">,</span> <span class="n">howmany_paths</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="go">[(&#39;insert C&#39;, &#39;keep C&#39;, &#39;insert V&#39;, &#39;keep V&#39;), (&#39;insert C&#39;, &#39;keep C&#39;, &#39;keep V&#39;, &#39;insert V&#39;), (&#39;keep C&#39;, &#39;insert C&#39;, &#39;insert V&#39;, &#39;keep V&#39;)]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="loanpy.helpers.flatten">
<span class="sig-prename descclassname"><span class="pre">loanpy.helpers.</span></span><span class="sig-name descname"><span class="pre">flatten</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nested_list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.helpers.flatten" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.adrc.Adrc.adapt_phonotactics and loanpy.adrc.Adrc.adapt.
Flatten a nested list and discard empty strings (to prevent feeding empty strings to loanpy.adrc.Adrc.reconstruct, which would throw an Error)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>t</strong> (<em>list of lists</em>) – a nested list</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>flattened list without empty strings as elements</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.helpers</span> <span class="kn">import</span> <span class="n">flatten</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flatten</span><span class="p">([[</span><span class="s2">&quot;wrd1&quot;</span><span class="p">,</span> <span class="s2">&quot;wrd2&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;wrd3&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]])</span>
<span class="go">[&#39;wrd1&#39;, &#39;wrd2&#39;, &#39;wrd3&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="loanpy.helpers.forms2list">
<span class="sig-prename descclassname"><span class="pre">loanpy.helpers.</span></span><span class="sig-name descname"><span class="pre">forms2list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dff</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_language</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.helpers.forms2list" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.helpers.Etym.__init__; Get a list of words of a language from a forms.csv file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dff</strong> (<em>pandas.core.frame.DataFrame</em>) – forms.csv data frame (cldf)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a list of words in the target language</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list | None</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.helpers</span> <span class="kn">import</span> <span class="vm">__file__</span><span class="p">,</span> <span class="n">forms2list</span><span class="p">,</span> <span class="n">read_forms</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2forms</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;forms.csv&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">forms</span> <span class="o">=</span> <span class="n">read_forms</span><span class="p">(</span><span class="n">path2forms</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">forms2list</span><span class="p">(</span><span class="n">forms</span><span class="p">,</span> <span class="n">target_language</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="go">[&#39;xyz&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="loanpy.helpers.gensim_multiword">
<span class="sig-prename descclassname"><span class="pre">loanpy.helpers.</span></span><span class="sig-name descname"><span class="pre">gensim_multiword</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">recip_transl</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">donor_transl</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_wordpair</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wordvectors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'word2vec-google-news-300'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.helpers.gensim_multiword" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.loafinder.Search.loans. Takes two strings as input that represent the meanings of a word. Within the strings, meanings are separated by “, “. It calculates the cosine similarities of the word pairs of the cartesian product and returns the value of the most similar pair. If return_wordpair is True, the words are returned as well.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>recip_transl</strong> (<em>str</em><em>, </em><em>words are separated by &quot;</em><em>, </em><em>&quot;</em>) – translation of the recipient word</p></li>
<li><p><strong>donor_transl</strong> (<em>str</em><em>, </em><em>words are separated by &quot;</em><em>, </em><em>&quot;</em>) – translations of the donor word</p></li>
<li><p><strong>return_wordpair</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Indicate whether the word pair itself should be returned too.</p></li>
<li><p><strong>wordvectors</strong> (<em>'fasttext-wiki-news-subwords-300'</em><em> | </em><em>'conceptnet-numberbatch-17-06-300'</em><em> | </em><em>'word2vec-ruscorpora-300'</em><em> | </em><em>'word2vec-google-news-300'</em><em> | </em><em>'glove-wiki-gigaword-50'</em><em> | </em><em>'glove-wiki-gigaword-100'</em><em> | </em><em>'glove-wiki-gigaword-200'</em><em> | </em><em>'glove-wiki-gigaword-300'</em><em> | </em><em>'glove-twitter-25'</em><em> | </em><em>'glove-twitter-50'</em><em> | </em><em>'glove-twitter-100'</em><em> | </em><em>'glove-twitter-200'</em><em> | </em><em>'__testing_word2vec-matrix-synopsis'</em>) – The name of the pretrained wordvector model to use. For more information see gensim’s documentation at <a class="reference external" href="https://radimrehurek.com/gensim/downloader.html">https://radimrehurek.com/gensim/downloader.html</a></p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The similarity score of the most similar word pair plus the word pair itself if return_wordpair was True.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int or (int, str, str)</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.helpers</span> <span class="kn">import</span> <span class="n">gensim_multiword</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sense1</span><span class="p">,</span> <span class="n">sense2</span> <span class="o">=</span> <span class="s2">&quot;hovercraft, full, eels&quot;</span><span class="p">,</span> <span class="s2">&quot;nipples, explode, delight&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gensim_multiword</span><span class="p">(</span><span class="n">sense1</span><span class="p">,</span> <span class="n">sense2</span><span class="p">,</span> <span class="n">return_wordpair</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">0.21005636</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.helpers</span> <span class="kn">import</span> <span class="n">gensim_multiword</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sense1</span><span class="p">,</span> <span class="n">sense2</span> <span class="o">=</span> <span class="s2">&quot;drop, panties, William&quot;</span><span class="p">,</span> <span class="s2">&quot;cannot, wait, lunchtime&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gensim_multiword</span><span class="p">(</span><span class="n">sense1</span><span class="p">,</span> <span class="n">sense2</span><span class="p">,</span> <span class="n">return_wordpair</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">(0.18870175, &#39;drop&#39;, &#39;wait&#39;)</span>
</pre></div>
</div>
<p>For more infos about available models/datasets run:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">gensim.downloader</span> <span class="k">as</span> <span class="nn">api</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">api</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>  <span class="c1"># for general information</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">api</span><span class="o">.</span><span class="n">info</span><span class="p">()[</span><span class="s1">&#39;models&#39;</span><span class="p">])</span>  <span class="c1"># to list all models</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="loanpy.helpers.get_howmany">
<span class="sig-prename descclassname"><span class="pre">loanpy.helpers.</span></span><span class="sig-name descname"><span class="pre">get_howmany</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">step</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_phonotactics_ceiling</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_paths_ceiling</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.helpers.get_howmany" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.adrc.Adrc.adapt and loanpy.sanity.eval_one. Put marbles into three pots, one by one, with following conditions: if the product of the number of marbles per pot is higher than step, stop. Don’t put more marbles in pot 2 and 3 than the ceiling variables indicate. The idea is that loanpy.adrc.Adrc.adapt gets a parameter &lt;howmany&gt; that indicates the total number of predictions, which flows into this function’s &lt;step&gt; parameter. This has to be split into three: The first is the number of combinations we want to get from phoneme substitutions. The second the maximum number of combinations from the number of different phonotactic structures chosen, to which to adapt. The third the number of paths through which each structure can be be reached. So if we want to make 100 predictions for a word but not pick more than 2 structures to which to adapt and 2 paths through which to reach those structures, we’ll have to make 25 predictions from sound substitutions for 2 times 2 different paths to make 100 predictions. The loop breaks <em>after</em> we have stepped over the product because the left over will be sliced away in loanpy.adrc.Adrc.adapt.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>step</strong> (<em>int</em>) – the product of the three pots. Stop if reached.</p></li>
<li><p><strong>hm_phonotactics_ceiling</strong> (<em>int</em>) – The max nr of marbles for pot 2</p></li>
<li><p><strong>hm_phonotactics_ceiling</strong> – The max nr of marbles for pot 3</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The way the marbles should be split</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(int, int, int)</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.helpers</span> <span class="kn">import</span> <span class="n">get_howmany</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_howmany</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">(3, 2, 2)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_howmany</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">(8, 7, 2)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="loanpy.helpers.get_mtx">
<span class="sig-prename descclassname"><span class="pre">loanpy.helpers.</span></span><span class="sig-name descname"><span class="pre">get_mtx</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.helpers.get_mtx" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.helpers.mtx2graph. Similar to edit_distance_with2ops but without weights (i.e. deletion and insertion both always cost one) and the matrix is returned.</p>
<p>From <a class="reference external" href="https://www.youtube.com/watch?v=AY2DZ4a9gyk">https://www.youtube.com/watch?v=AY2DZ4a9gyk</a>. Draws a matrix of minimum edit distances between every substring of two input strings. The ~secret~ to fill the matrix: If two letters are the same, look at the upper and left hand cell, pick the minimum and add one. If they are the same, pick the value from the upper left diagonal cell.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target</strong> (<em>iterable</em><em>, </em><em>e.g. str</em><em> or </em><em>list</em>) – The target word</p></li>
<li><p><strong>source</strong> (<em>iterable</em><em>, </em><em>e.g. str</em><em> or </em><em>list</em>) – The source word</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A matrix where every cell tells the cost of turning one substring to the other (only delete and insert with cost 1 for both)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.helpers</span> <span class="kn">import</span> <span class="n">get_mtx</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_mtx</span><span class="p">(</span><span class="s2">&quot;bcde&quot;</span><span class="p">,</span> <span class="s2">&quot;de&quot;</span><span class="p">)</span>
<span class="go">array([[0., 1., 2., 3., 4.],</span>
<span class="go">   [1., 2., 3., 2., 3.],</span>
<span class="go">   [2., 3., 4., 3., 2.]])</span>
<span class="gp">&gt;&gt;&gt; </span> <span class="c1"># What in reality happened (example from video):</span>
<span class="go">     # deletion costs 1, insertion costs 1, so the distances are:</span>
<span class="go">  # B C D E  # hashtag stands for empty string</span>
<span class="go"># 0 1 2 3 4  # distance B-#=1, BC-#=2, BCD-#=3, BCDE-#=4</span>
<span class="go">D 1 2 3 2 3  # distance D-#=1, D-B=2, D-BC=3, D-BCD=2, D-BCDE=3</span>
<span class="go">E 2 3 4 3 2  # distance DE-#=2, DE-B=3, DE-BC=4, DE-BCD=3, DE-BCDE=2</span>
<span class="go"># the min. edit distance from BCDE-DE=2: delete B, delete C</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="loanpy.helpers.list2regex">
<span class="sig-prename descclassname"><span class="pre">loanpy.helpers.</span></span><span class="sig-name descname"><span class="pre">list2regex</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sclist</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.helpers.list2regex" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.adrc.Adrc.reconstruct. Turns a list of phonemes into a regular expression.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sclist</strong> (<em>list of str</em>) – a list of phonemes</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the same phonemes as a regular expression. “-” is removed and replaced with a question mark at the end.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.helpers</span> <span class="kn">import</span> <span class="n">list2regex</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">list2regex</span><span class="p">([</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;k&quot;</span><span class="p">,</span> <span class="s2">&quot;v&quot;</span><span class="p">])</span>
<span class="go">&#39;(b|k|v)&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.helpers</span> <span class="kn">import</span> <span class="n">list2regex</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">list2regex</span><span class="p">([</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;k&quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;v&quot;</span><span class="p">])</span>
<span class="go">&#39;(b|k|v)?&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="loanpy.helpers.make_cvfb">
<span class="sig-prename descclassname"><span class="pre">loanpy.helpers.</span></span><span class="sig-name descname"><span class="pre">make_cvfb</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path2ipa_all</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path2out</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.helpers.make_cvfb" title="Permalink to this definition">¶</a></dt>
<dd><p>Consonants, vowels, front vowels, backvowels.     Transforms the columns of ipa_all.csv to a tuple of two dictionaries.     The first returns “C” for consonants and “V” for vowels,     the second “F” for front vowels and “B” for back vowels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path2ipa_all</strong> (<em>pathlib.PosixPath</em><em> | </em><em>str</em>) – Location of ipa_all.csv (the input file)</p></li>
<li><p><strong>path2out</strong> (<em>pathlib.PosixPath</em><em> | </em><em>str</em>) – path to the desired output file.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Writes a tuple of two dictionaries to indicated path</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="loanpy.helpers.mtx2graph">
<span class="sig-prename descclassname"><span class="pre">loanpy.helpers.</span></span><span class="sig-name descname"><span class="pre">mtx2graph</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">w_del</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">w_ins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">49</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.helpers.mtx2graph" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.helpers.editops. Takes two strings, draws a distance matrix with loanpy.helpers.get_mtx and converts that matrix into a directed graph where horizonal edges are given a customisable weight for insertions and vertical edges are given a customisable weight for deletions. Where we can move diagonally, diagonal edge is inserted and no weight is added, since it means we are keeping the letter. It is necessary to create this type of object to be able to tap networkx’s all_shortest_paths function in loanpy.helpers.editops””</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>s1</strong> (<em>iterable like str</em><em> or </em><em>list</em>) – The first of two iterables to be compared to each other</p></li>
<li><p><strong>s2</strong> (<em>iterable like str</em><em> or </em><em>list</em>) – The second of two iterables to be compared to each other</p></li>
<li><p><strong>w_del</strong> (<em>int</em><em>, </em><em>default=100</em>) – The weight (cost) of deletions (vertical edges)</p></li>
<li><p><strong>w_ins</strong> (<em>int</em><em>, </em><em>default=49</em>) – The weight (cost) of insertions (horizontal edges). In accordance with TCRS, 2 insertions are cheapter than 1 deletion by default.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The directed graph object, its hight and its width</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(networkx.classes.digraph.DiGraph, int, int)</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.helpers</span> <span class="kn">import</span> <span class="n">mtx2graph</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mtx2graph</span><span class="p">(</span><span class="s2">&quot;ló&quot;</span><span class="p">,</span> <span class="s2">&quot;hó&quot;</span><span class="p">)</span>
<span class="go">(&lt;networkx.classes.digraph.DiGraph object at 0x7fb8e5758700&gt;, 3, 3)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="loanpy.helpers.pick_minmax">
<span class="sig-prename descclassname"><span class="pre">loanpy.helpers.</span></span><span class="sig-name descname"><span class="pre">pick_minmax</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_and_nr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">howmany</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func=&lt;built-in</span> <span class="pre">function</span> <span class="pre">min&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_all=False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.helpers.pick_minmax" title="Permalink to this definition">¶</a></dt>
<dd><p>Called in loanpy.helpers.Etym.rank_closest and loanpy.helpers.Etym.rank_closest_phonotactics. Pick only the n smallest numbers from a list. Should be cheaper than sorting the entire list and then taking only the slice we need.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_and_nr</strong> (<em>list of tuples</em>) – inventories and distances</p></li>
<li><p><strong>howmany</strong> (<em>int</em>) – howmany minimums do we want to pick from input-list</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The indicated number of minimal values</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str (separated by “, “)</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.helpers</span> <span class="kn">import</span> <span class="n">pick_minmax</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pick_minmax</span><span class="p">([(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)],</span> <span class="nb">float</span><span class="p">(</span><span class="s2">&quot;inf&quot;</span><span class="p">))</span>
<span class="go">&quot;c, a, b&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pick_minmax</span><span class="p">([(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)],</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">&quot;c&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pick_minmax</span><span class="p">([(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)],</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">&quot;c, a&quot;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="loanpy.helpers.plug_in_model">
<span class="sig-prename descclassname"><span class="pre">loanpy.helpers.</span></span><span class="sig-name descname"><span class="pre">plug_in_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">word2vec_model</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.helpers.plug_in_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Allows to plug in a pretrained word2vec model into global variable loanpy.helpers.model. This is for using vectors that can’t be loaded with gensim’s api. Vectors could be plugged in without this function as well, but this way debugging is easier. For more information see gensim’s documentation, e.g. call help(gensim.downloader.load)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>word2vec_model</strong> – The word2vec model to use</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>global variable &lt;model&gt; gets defined</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None (global model = word2vec_model)</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy</span> <span class="kn">import</span> <span class="n">helpers</span> <span class="k">as</span> <span class="n">hp</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">gensim.test.utils</span> <span class="kn">import</span> <span class="n">common_texts</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">gensim.models</span> <span class="kn">import</span> <span class="n">word2vec</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hp</span><span class="o">.</span><span class="n">plug_in_model</span><span class="p">(</span><span class="n">word2vec</span><span class="o">.</span><span class="n">Word2Vec</span><span class="p">(</span><span class="n">common_texts</span><span class="p">,</span> <span class="n">min_count</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">wv</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hp</span><span class="o">.</span><span class="n">model</span>
<span class="go">&lt;gensim.models.keyedvectors.KeyedVectors object at 0x7f85fe36d9d0&gt;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy</span> <span class="kn">import</span> <span class="n">helpers</span> <span class="k">as</span> <span class="n">hp</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">gensim.downloader</span> <span class="kn">import</span> <span class="n">load</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hp</span><span class="o">.</span><span class="n">plug_in_model</span><span class="p">(</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;glove-twitter-25&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hp</span><span class="o">.</span><span class="n">model</span>
<span class="go">(This should take only a few seconds to load)</span>
<span class="go">&lt;gensim.models.keyedvectors.KeyedVectors object at 0x7ff728663880&gt;</span>
</pre></div>
</div>
<p>For more information see gensim’s documentation:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">gensim.download</span> <span class="kn">import</span> <span class="n">load</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">help</span><span class="p">(</span><span class="n">load</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="loanpy.helpers.read_cvfb">
<span class="sig-prename descclassname"><span class="pre">loanpy.helpers.</span></span><span class="sig-name descname"><span class="pre">read_cvfb</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.helpers.read_cvfb" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.helpers.Etym.__init__;Reads file cvfb.txt that was generated based on ipa_all.csv by loanpy.helpers.make_cvfb. Its a tuple of two dictionaries. Keys are same as col “ipa” in ipa_all.csv. Vals of first dict are “C” if consonant and “V” if vowel (6358 keys). Vals of 2nd dict are “F” if front vowel and “B” if back vowel (1240 keys). Only called by Etym.__init__ to define self.phon2cv and self.vow2fb, which in turn is used by word2struc and many others. This file could be read directly when importing, but this way debugging is easier.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>two dictionaries, the first defining consonants and vowels (cv), the second defining front and back vowels (fb).</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(dict, dict)</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.helpers</span> <span class="kn">import</span> <span class="n">read_cvfb</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">read_cvfb</span><span class="p">()</span>
<span class="go">(two dictionaries of length 6358 and 1240)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="loanpy.helpers.read_dst">
<span class="sig-prename descclassname"><span class="pre">loanpy.helpers.</span></span><span class="sig-name descname"><span class="pre">read_dst</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dst_msr</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.helpers.read_dst" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.helpers.Etym.__init__; Returns a function that calculates the phonetic distance between strings from panphon.distance.Distance. This will be used to calculate the most similar phonemes of the phoneme_inventory compared to a given phoneme from ipa_all.csv</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dst_msr</strong> (<em>None</em><em>, </em><em>&quot;doglo_prime_distance&quot;</em><em> | </em><em>&quot;dolgo_prime_distance_div_maxlen&quot;</em><em> | </em><em>&quot;fast_levenshtein_distance&quot;</em><em> | </em><em>&quot;fast_levenshtein_distance_div_maxlen&quot;</em><em> | </em><em>&quot;feature_difference&quot;</em><em> | </em><em>&quot;feature_edit_distance&quot;</em><em> | </em><em>&quot;feature_edit_distance_div_maxlen&quot;</em><em> | </em><em>&quot;hamming_feature_edit_distance&quot;</em><em> | </em><em>&quot;hamming_feature_edit_distance_div_maxlen&quot;</em><em> | </em><em>&quot;hamming_substitution_cost&quot;</em><em> | </em><em>&quot;jt_feature_edit_distance&quot;</em><em> | </em><em>&quot;jt_feature_edit_distance_div_maxlen&quot;</em><em> | </em><em>&quot;jt_hamming_feature_edit_distance&quot;</em><em> | </em><em>&quot;jt_hamming_feature_edit_distance_div_maxlen&quot;</em><em> | </em><em>&quot;jt_weighted_feature_edit_distance&quot;</em><em> | </em><em>&quot;jt_weighted_feature_edit_distance_div_maxlen&quot;</em><em> | </em><em>&quot;levenshtein_distance&quot;</em>) – The name of the distance measure, which has to be a method of panphon.distance.Distance</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a function that calculates the phonological distance between ipa-strings</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>function | None</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.helpers</span> <span class="kn">import</span> <span class="n">read_dst</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">read_dst</span><span class="p">(</span><span class="s2">&quot;fast_levenshtein_distance&quot;</span><span class="p">)</span>
<span class="go">&lt;bound method Distance.fast_levenshtein_distance of &lt;panphon.distance.Distance object at 0x7f7f21fe95b0&gt;&gt;</span>
</pre></div>
</div>
<p>For more information see PanPhon’s documentation:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">panphon.distance</span> <span class="kn">import</span> <span class="n">Distance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">help</span><span class="p">(</span><span class="n">Distance</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="loanpy.helpers.read_forms">
<span class="sig-prename descclassname"><span class="pre">loanpy.helpers.</span></span><span class="sig-name descname"><span class="pre">read_forms</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dff</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.helpers.read_forms" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.helpers.Etym.__init__; Reads forms.csv (cldf), keeps only columns Segement, Cognacy and Language ID, drops spaces in Segments to internally re-tokenise later. Only called by Etym.__init__ to create local variable dff (data frame forms). Returns None if dff is None. So that class can be initiated without args too.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dff</strong> (<em>pathlib.PosixPath</em><em> | </em><em>str</em><em> | </em><em>None</em>) – path to forms.csv</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a workable version of forms.csv as a pandas data frame</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>&lt;class ‘pandas.core.frame.DataFrame’&gt; | None</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.helpers</span> <span class="kn">import</span> <span class="vm">__file__</span><span class="p">,</span> <span class="n">read_forms</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2file</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;integration&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;forms.csv&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">read_forms</span><span class="p">(</span><span class="n">path2file</span><span class="p">)</span>
<span class="go">       Language_ID Segments  Cognacy</span>
<span class="go">0            1      abc        1</span>
<span class="go">1            2      xyz        1</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="loanpy.helpers.tuples2editops">
<span class="sig-prename descclassname"><span class="pre">loanpy.helpers.</span></span><span class="sig-name descname"><span class="pre">tuples2editops</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">op_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.helpers.tuples2editops" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.helpers.editops. The path how string1 is converted to string2 is given in form of tuples that contain the x and y coordinates of every step through the matrix shaped graph. This function converts those numerical instructions to human readable ones. The x values stand for horizontal movement, y values for vertical one. Vertical movement means deletion, horizontal means insertion. Diagonal means we are keeping the value. If we are moving horizontally and vertically after each other we’re substituting.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>op_list</strong> (<em>list of tuples of 2 int</em>) – The numeric list of edit operations</p></li>
<li><p><strong>s1</strong> (<em>str</em>) – The first of two strings to be compared to each other</p></li>
<li><p><strong>s2</strong> (<em>str</em>) – The second of two strings to be compared to each other</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of human readable edit operations</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list of strings</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.helpers</span> <span class="kn">import</span> <span class="n">tuples2editops</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tuples2editops</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)],</span> <span class="s2">&quot;ló&quot;</span><span class="p">,</span> <span class="s2">&quot;hó&quot;</span><span class="p">)</span>
<span class="go">[&#39;substitute l by h&#39;, &#39;keep ó&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span> <span class="c1"># What happened under the hood:</span>
<span class="go"># (0, 0), (0, 1): move 1 vertically = 1 deletion</span>
<span class="go"># (0, 1), (1, 1): move 1 horizontally = 1 insertion</span>
<span class="go"># insertion and deletion after each other equals substitution</span>
<span class="go"># (1, 1), (2, 2): move 1 diagonally = keep the sound</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="id1">
<h2>qfysc.py<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<section id="read-mode">
<h3>read mode<a class="headerlink" href="#read-mode" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="loanpy.qfysc.read_mode">
<span class="sig-prename descclassname"><span class="pre">loanpy.qfysc.</span></span><span class="sig-name descname"><span class="pre">read_mode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.qfysc.read_mode" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.qfysc.Qfy.__init__</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mode</strong> (<em>None</em><em> | </em><em>&quot;adapt&quot;</em><em> | </em><em>&quot;reconstruct&quot;</em>) – The mode in which the data should be quantified. If set to “None”, default mode jumps to “adapt”. This option is available if there is no time to think and we’re setting all params we can to None.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>WrongModeError</strong> – The mode can only be “adapt” or “reconstruct”</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>“adapt” | “reconstruct”</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.qfysc</span> <span class="kn">import</span> <span class="n">read_mode</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">read_mode</span><span class="p">(</span><span class="s2">&quot;adapt&quot;</span><span class="p">)</span>
<span class="go">&quot;adapt&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">read_mode</span><span class="p">(</span><span class="s2">&quot;reconstruct&quot;</span><span class="p">)</span>
<span class="go">&quot;reconstruct&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">read_mode</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
<span class="go">&quot;adapt&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">read_mode</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
<span class="go">&quot;adapt&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">read_mode</span><span class="p">(</span><span class="s2">&quot;bla&quot;</span><span class="p">)</span>
<span class="go">loanpy.qfysc.WrongModeError: parameter &lt;mode&gt; must be &#39;adapt&#39; or &#39;reconstruct&#39;</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="read-connector">
<h3>read connector<a class="headerlink" href="#read-connector" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="loanpy.qfysc.read_connector">
<span class="sig-prename descclassname"><span class="pre">loanpy.qfysc.</span></span><span class="sig-name descname"><span class="pre">read_connector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connector</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.qfysc.read_connector" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.qfysc.Qfy.__init__</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>connector</strong> (<em>iterable of str</em>) – An iterable that defines the two symbols that connect the words on the left and the right side of the etymology if we are adapting vs. when we are reconstructing. If None is passed, “&lt;” is used for adapting and “&lt;*” for reconstructing.</p></li>
<li><p><strong>mode</strong> (<em>&quot;adapt&quot;</em><em> | </em><em>&quot;reconstruct&quot;</em>) – the mode to choose the connector for, if “reconstruct”, then the second element of the iterable will be chosen. If “adapt”, the 1st.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The string that connects the left and right side of an etymology.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.qfysc</span> <span class="kn">import</span> <span class="n">read_connector</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">read_connector</span><span class="p">(</span><span class="n">connector</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;adapt&quot;</span><span class="p">)</span>
<span class="go">&quot;&lt;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">read_connector</span><span class="p">(</span><span class="n">connector</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="go">&quot;&lt;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">read_connector</span><span class="p">(</span><span class="n">connector</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;reconstruct&quot;</span><span class="p">)</span>
<span class="go">&quot;&lt;*&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">read_connector</span><span class="p">(</span><span class="n">connector</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot; from &quot;</span><span class="p">,</span> <span class="s2">&quot; from *&quot;</span><span class="p">),</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;reconstruct&quot;</span><span class="p">)</span>
<span class="go">&quot; from *&quot;</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="read-sound-correspondence-dictionary-base">
<h3>read sound correspondence dictionary base<a class="headerlink" href="#read-sound-correspondence-dictionary-base" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="loanpy.qfysc.read_scdictbase">
<span class="sig-prename descclassname"><span class="pre">loanpy.qfysc.</span></span><span class="sig-name descname"><span class="pre">read_scdictbase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scdictbase</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.qfysc.read_scdictbase" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.qfysc.Qfy.__init__</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>scdictbase</strong> (<em>Provide the path to the file - this is the preferred setting since the file is rather large</em><em> (</em><em>1.6MB</em><em>) </em><em>and should therefore be generated only once.</em>) – The sound change dictionary base. Has to be generated with loanpy.helpers.Etym.get_scdictbase first. Can be plugged in via a file, by directly providing a dictionary, or by letting get_scdictbase assign the vairable to self.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dictionary representing a heuristic approach to sound substitution. Returns empty dictionary if set to None. For more details see loanpy.helpers.Etym.get_scdictbase.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dictionary</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.qfysc</span> <span class="kn">import</span> <span class="n">read_scdictbase</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">base</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="s2">&quot;o&quot;</span><span class="p">],</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;p&quot;</span><span class="p">,</span> <span class="s2">&quot;v&quot;</span><span class="p">]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">read_scdictbase</span><span class="p">(</span><span class="n">base</span><span class="p">)</span>  <span class="c1"># plug in dictionary directly</span>
<span class="go">{&quot;a&quot;: [&quot;e&quot;, &quot;o&quot;], &quot;b&quot;: [&quot;p&quot;, &quot;v&quot;]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.qfysc</span> <span class="kn">import</span> <span class="vm">__file__</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">remove</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;test_read_scdictbase.txt&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">base</span><span class="p">))</span>  <span class="c1"># write test file</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">read_scdictbase</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>  <span class="c1"># read dictionary from file</span>
<span class="go">{&quot;a&quot;: [&quot;e&quot;, &quot;o&quot;], &quot;b&quot;: [&quot;p&quot;, &quot;v&quot;]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">remove</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>  <span class="c1"># delete the test file again</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="align">
<h3>align<a class="headerlink" href="#align" title="Permalink to this headline">¶</a></h3>
<dl class="py method">
<dt class="sig sig-object py" id="loanpy.qfysc.Qfy.align">
<span class="sig-prename descclassname"><span class="pre">Qfy.</span></span><span class="sig-name descname"><span class="pre">align</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">left</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">right</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.qfysc.Qfy.align" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.qfysc.Qfy.get_sound_corresp. Selects alignment with lingpy if we are adapting and its own alignment if we are reconstructing. The alignment function/wrapper can be looked up at loanpy.qfysc.Qfy.align_lingpy and loanpy.qfysc.Qfy.align_clusterwise</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>left</strong> (<em>str</em>) – The string on the left side of the etymology to align.</p></li>
<li><p><strong>right</strong> (<em>str</em>) – The string on the right side of the etymology to align.</p></li>
</ul>
</dd>
</dl>
<p>In an earlier version, some additional parameters were passed on to         lingpy.align.pairwise.Pairwise and lingpy.align.pairwise.Pairwise.align. That feature is not supported in the current version because they bload the script and find only little practical use at the moment. If necessary, they have to be inserted directly in the source code, where Pairwise() gets initiated and Pairwise.align() called.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a pandas data frame with two columns named “keys” and “vals” with one phoneme and it’s aligned counter part in each row.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pandas.core.frame.DataFrame</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.qfysc</span> <span class="kn">import</span> <span class="n">Qfy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qfy_obj</span> <span class="o">=</span> <span class="n">Qfy</span><span class="p">()</span>  <span class="c1"># default mode is &quot;adapt&quot;, so lingpy aligns</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qfy_obj</span><span class="o">.</span><span class="n">align</span><span class="p">(</span><span class="s2">&quot;Budapest&quot;</span><span class="p">,</span> <span class="s2">&quot;Budimpeʃta&quot;</span><span class="p">)</span>
<span class="go">  keys vals</span>
<span class="go">0    B    B</span>
<span class="go">1    u    u</span>
<span class="go">2    d    d</span>
<span class="go">3    i    a</span>
<span class="go">4    m    C</span>
<span class="go">5    p    p</span>
<span class="go">6    e    e</span>
<span class="go">7    ʃ    s</span>
<span class="go">8    t    t</span>
<span class="go">9    a    V</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">qfy_obj</span> <span class="o">=</span> <span class="n">Qfy</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;reconstruct&quot;</span><span class="p">)</span>  <span class="c1"># use own alignment</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qfy_obj</span><span class="o">.</span><span class="n">align</span><span class="p">(</span><span class="s2">&quot;Budapest&quot;</span><span class="p">,</span> <span class="s2">&quot;Budimpeʃta&quot;</span><span class="p">)</span>
<span class="go">  keys vals  # left&amp;right col is flipped b/c source&amp;target is flipped</span>
<span class="go">0   #-    -</span>
<span class="go">1   #B    B</span>
<span class="go">2    u    u</span>
<span class="go">3    d    d</span>
<span class="go">4    a    i</span>
<span class="go">5    p   mp</span>
<span class="go">6    e    e</span>
<span class="go">7  st#   ʃt</span>
<span class="go">8   -#    a</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="align-with-lingpy">
<h3>align with lingpy<a class="headerlink" href="#align-with-lingpy" title="Permalink to this headline">¶</a></h3>
<dl class="py method">
<dt class="sig sig-object py" id="loanpy.qfysc.Qfy.align_lingpy">
<span class="sig-prename descclassname"><span class="pre">Qfy.</span></span><span class="sig-name descname"><span class="pre">align_lingpy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">left</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">right</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.qfysc.Qfy.align_lingpy" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.qfysc.Qfy.align. Initiate a lingpy.align.pairwise.Pairwise object with the two strings to align. Turn the resulting string into two lists and insert them into two columns of a data frame. The columns are called keys and vals because these are going to be the future keys in the sound change dictionary. This alignment is intended for predicting loanword adaptation. Therefore the keys are equal to the phonemes of the donor word, which usually stands on the right side in traditional etymological notation (e.g. in “kiki&lt;hihi” “hihi” is the donor word). One difference to lingpy is that “-” for “no phoneme” is replace by “C” if the corresponding other sound is a consonant and “V” if it’s a vowel.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>left</strong> (<em>str</em>) – The word that stands on the left side of the connector</p></li>
<li><p><strong>right</strong> (<em>str</em>) – The word that stands on the right side of the connector</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>data frame where the phonemes of the word on the right go to the column on the left (“keys”) because those are the phonemes we want to look up later in scdict to make predictions, i.e. computational source is on the right, target on the left. (An alternative solution for this problem would have been to flip the connector and have the computational source always on the left, already when inputting. But the problem with this is that the star would have to move in the reconstructions: “kiki&lt;*hihi” is ok but if we want to flip this, we can’t just flip left and right and flip the connector because “hihi*&gt;kiki” would be wrong notation. It would have to be “*hihi&gt;kiki”. And moving around this star is unexpectedly tricky. That’s why the computational source is once on the left side, once on the right, and gets flipped internally.)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.core.frame.DataFrame</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.qfysc</span> <span class="kn">import</span> <span class="n">Qfy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qfy_obj</span> <span class="o">=</span> <span class="n">Qfy</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qfy_obj</span><span class="o">.</span><span class="n">align_lingpy</span><span class="p">(</span><span class="s2">&quot;Budapest&quot;</span><span class="p">,</span> <span class="s2">&quot;Budimpeʃta&quot;</span><span class="p">)</span>
<span class="go">  keys vals</span>
<span class="go">0    B    B</span>
<span class="go">1    u    u</span>
<span class="go">2    d    d</span>
<span class="go">3    i    a</span>
<span class="go">4    m    C</span>
<span class="go">5    p    p</span>
<span class="go">6    e    e</span>
<span class="go">7    ʃ    s</span>
<span class="go">8    t    t</span>
<span class="go">9    a    V</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qfy_obj</span><span class="o">.</span><span class="n">align_lingpy</span><span class="p">(</span><span class="s2">&quot;Budimpeʃta&quot;</span><span class="p">,</span> <span class="s2">&quot;Budapest&quot;</span><span class="p">)</span>
<span class="go">  keys vals</span>
<span class="go">0    B    B</span>
<span class="go">1    u    u</span>
<span class="go">2    d    d</span>
<span class="go">3    a    i</span>
<span class="go">4    C    m</span>
<span class="go">5    p    p</span>
<span class="go">6    e    e</span>
<span class="go">7    s    ʃ</span>
<span class="go">8    t    t</span>
<span class="go">9    V    a</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="align-clusterwise">
<h3>align clusterwise<a class="headerlink" href="#align-clusterwise" title="Permalink to this headline">¶</a></h3>
<dl class="py method">
<dt class="sig sig-object py" id="loanpy.qfysc.Qfy.align_clusterwise">
<span class="sig-prename descclassname"><span class="pre">Qfy.</span></span><span class="sig-name descname"><span class="pre">align_clusterwise</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">left</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">right</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.qfysc.Qfy.align_clusterwise" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Called by loanpy.qfysc.Qfy.align. Align with own formula: 1. split string into consonant and vowel cluster_inventory. 2. Tag first and last cluster with “#” to indicate its word initial or word final position. 3. Slap “#-” and “-#” to front and back of list of cluster_inventory to capture affixes that might have disappeared or appeared. 4. If one string starts with a consonant and the other with a vowel, shift the one starting with a consonant by one, so that the first vowel cluster serves as an anchor. 5. Sequentially align the upcomming cluster_inventory with each other until the shorter word ends. 6. Squeeze leftover phonemes into one string.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>left</strong> (<em>str</em>) – The string on the left side of the connecting symbol of an etymology, e.g. “kiki” if the etymology is “kiki&lt;*hihi”.</p></li>
<li><p><strong>right</strong> – The string on the right side of the connecting symbol of an etymology, e.g. “kiki” if the etymology is “hihi&lt;kiki”.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>data frame where the phonemes of the word on the left go to the column on the left (“keys”) because those are the phonemes we want to look up later in scdict to make predictions, i.e. computational source is on the left, target on the right.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.core.frame.DataFrame</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.qfysc</span> <span class="kn">import</span> <span class="n">Qfy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qfy_obj</span> <span class="o">=</span> <span class="n">Qfy</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qfy_obj</span><span class="o">.</span><span class="n">align_clusterwise</span><span class="p">(</span><span class="s2">&quot;budapestt&quot;</span><span class="p">,</span> <span class="s2">&quot;uadast&quot;</span><span class="p">)</span>
<span class="go">    keys vals</span>
<span class="go">0     #b    -</span>
<span class="go">1      u   ua</span>
<span class="go">2      d    d</span>
<span class="go">3      a    a</span>
<span class="go">4      p   st</span>
<span class="go">5  estt#    -</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="get-structure-correspondences">
<h3>get structure correspondences<a class="headerlink" href="#get-structure-correspondences" title="Permalink to this headline">¶</a></h3>
<dl class="py method">
<dt class="sig sig-object py" id="loanpy.qfysc.Qfy.get_phonotactics_corresp">
<span class="sig-prename descclassname"><span class="pre">Qfy.</span></span><span class="sig-name descname"><span class="pre">get_phonotactics_corresp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">write_to</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.qfysc.Qfy.get_phonotactics_corresp" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.qfysc.Qfy.get_sound_corresp. Similar to loanpy.qfysc.get_sound_corresp but here, no alignment is needed. We just capture which phonotactic profile turns into which in the data, how often that happens and in which cognate sets.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>write_to</strong> (<em>None</em><em> | </em><em>pathlib.PosixPath</em><em> | </em><em>str</em><em>, </em><em>default=None</em>) – Indicate if results should be written to a text file. If yes, provide the path. None means that no file will be written.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of 3 dicts that capture phonotactical correspondences, how often each correspondence occurs in the data and in which cognate sets each correspondence occurs.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>[dict, dict, dict]</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.qfysc</span> <span class="kn">import</span> <span class="n">Qfy</span><span class="p">,</span> <span class="vm">__file__</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2forms</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;forms.csv&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qfy_obj</span> <span class="o">=</span> <span class="n">Qfy</span><span class="p">(</span><span class="n">forms_csv</span><span class="o">=</span><span class="n">path2forms</span><span class="p">,</span> <span class="n">source_language</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">target_language</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qfy_obj</span><span class="o">.</span><span class="n">get_phonotactics_corresp</span><span class="p">()</span>
<span class="go">[{&#39;VCC&#39;: [&#39;CVC&#39;]}, {&#39;CVC&lt;VCC&#39;: 1}, {&#39;CVC&lt;VCC&#39;: [1]}]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span> <span class="c1"># now reconstruct instead of adapt, and write file</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ast</span> <span class="kn">import</span> <span class="n">literal_eval</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">remove</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2scdict</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;example_scdict2delete.txt&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qfy_obj</span> <span class="o">=</span> <span class="n">Qfy</span><span class="p">(</span><span class="n">forms_csv</span><span class="o">=</span><span class="n">path2forms</span><span class="p">,</span> <span class="n">source_language</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">target_language</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;reconstruct&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qfy_obj</span><span class="o">.</span><span class="n">get_phonotactics_corresp</span><span class="p">(</span><span class="n">write_to</span><span class="o">=</span><span class="n">path2scdict</span><span class="p">)</span>
<span class="go">[{&#39;VCC&#39;: [&#39;CVC&#39;]}, {&#39;VCC&lt;*CVC&#39;: 1}, {&#39;VCC&lt;*CVC&#39;: [1]}]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">literal_eval</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">path2scdict</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="go">[{&#39;VCC&#39;: [&#39;CVC&#39;]}, {&#39;VCC&lt;*CVC&#39;: 1}, {&#39;VCC&lt;*CVC&#39;: [1]}]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">remove</span><span class="p">(</span><span class="n">path2scdict</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
</section>
<section id="id2">
<h2>adrc.py<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<section id="read-sound-correspondence-dictionary-list">
<h3>read sound correspondence dictionary list<a class="headerlink" href="#read-sound-correspondence-dictionary-list" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="loanpy.adrc.read_scdictlist">
<span class="sig-prename descclassname"><span class="pre">loanpy.adrc.</span></span><span class="sig-name descname"><span class="pre">read_scdictlist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scdictlist</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.adrc.read_scdictlist" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.adrc.Adrc.__init__. Reads sound correspondence dictionary list generated by loanpy.qfysc.Qfy.get_sound_corresp from a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>scdictlist</strong> (<em>pathlib.PosixPath</em><em> | </em><em>str</em><em> | </em><em>None</em>) – The path to the sound correspondence dictionaries</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Only the first 4 of the 6 dicts because the last two are not used in any computations at the moment. Returns 4 times None if input is None.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>[None, None, None, None] | [dict, dict, dict, dict]</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.adrc</span> <span class="kn">import</span> <span class="n">read_scdictlist</span><span class="p">,</span> <span class="vm">__file__</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">read_scdictlist</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
<span class="go">[None, None, None, None]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2sc</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;sc_ad_3cogs.txt&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">read_scdictlist</span><span class="p">(</span><span class="n">path2sc</span><span class="p">)</span>
<span class="go">[{&#39;a&#39;: [&#39;a&#39;], &#39;d&#39;: [&#39;d&#39;], &#39;j&#39;: [&#39;j&#39;], &#39;l&#39;: [&#39;l&#39;], &#39;n&#39;: [&#39;n&#39;], &#39;t͡ʃː&#39;: [&#39;t͡ʃ&#39;], &#39;ɣ&#39;: [&#39;ɣ&#39;], &#39;ɯ&#39;: [&#39;i&#39;]}, {&#39;a&lt;a&#39;: 6, &#39;d&lt;d&#39;: 1, &#39;i&lt;ɯ&#39;: 1, &#39;j&lt;j&#39;: 1, &#39;l&lt;l&#39;: 1, &#39;n&lt;n&#39;: 1, &#39;t͡ʃ&lt;t͡ʃː&#39;: 1, &#39;ɣ&lt;ɣ&#39;: 2}, {&#39;a&lt;a&#39;: [1, 2, 3], &#39;d&lt;d&#39;: [2], &#39;i&lt;ɯ&#39;: [1], &#39;j&lt;j&#39;: [3], &#39;l&lt;l&#39;: [2], &#39;n&lt;n&#39;: [3], &#39;t͡ʃ&lt;t͡ʃː&#39;: [1], &#39;ɣ&lt;ɣ&#39;: [1, 2]}, {&#39;VCCVC&#39;: [&#39;VCCVC&#39;], &#39;VCVC&#39;: [&#39;VCVC&#39;], &#39;VCVCV&#39;: [&#39;VCVCV&#39;]}]</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="move-sound-correspondences">
<h3>move sound correspondences<a class="headerlink" href="#move-sound-correspondences" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="loanpy.adrc.move_sc">
<span class="sig-prename descclassname"><span class="pre">loanpy.adrc.</span></span><span class="sig-name descname"><span class="pre">move_sc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sclistlist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">whichsound</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.adrc.move_sc" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.adrc.Adrc.read_sc.     Moves sound correspondences. A list of stacks where param &lt;whichsound&gt; indicates which stack to pick. Append its second element to out and pop its first.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sclistlist</strong> (<em>list of lists</em>) – A word where every phoneme has been replaced with a list of ALL possible sound correspondences ranked by likelihood, i.e. how often each sound correspondence occured in the data. (Heuristic correspondences have frequency 0.)</p></li>
<li><p><strong>whichsound</strong> (<em>index</em>) – The index of the phoneme to move from sclistlist to the output</p></li>
<li><p><strong>out</strong> (<em>list of lists</em>) – The future output of loanpy.adrc.Adrc.adapt/reconstruct</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List with the selected stack popped, and the new out variable.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple: (list of lists, list of lists)</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.adrc</span> <span class="kn">import</span> <span class="n">move_sc</span>
<span class="gp">&gt;&gt;&gt; </span> <span class="c1"># Transfer phoneme #1 of list #0 from sclistlist to out</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">move_sc</span><span class="p">(</span><span class="n">sclistlist</span><span class="o">=</span><span class="p">[[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">]],</span> <span class="n">whichsound</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="p">[[]])</span>
<span class="go">([[&quot;x&quot;]], [[&quot;x&quot;]])</span>
<span class="gp">&gt;&gt;&gt; </span> <span class="c1"># Transfer phoneme #1 of list #0 from sclistlist to out</span>
<span class="go">move_sc(sclistlist=[[&quot;x&quot;, &quot;x&quot;], [&quot;y&quot;, &quot;y&quot;], [&quot;z&quot;]], whichsound=0, out=[[&quot;a&quot;], [&quot;b&quot;], [&quot;c&quot;]])</span>
<span class="go">([[&quot;x&quot;], [&quot;y&quot;, &quot;y&quot;], [&quot;z&quot;]], [[&quot;a&quot;, &quot;x&quot;], [&quot;b&quot;], [&quot;c&quot;]])</span>
<span class="gp">&gt;&gt;&gt; </span> <span class="c1"># Transfer phoneme #1 of list #2 from sclistlist to out</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">move_sc</span><span class="p">(</span><span class="n">sclistlist</span><span class="o">=</span><span class="p">[[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;$&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;$&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;Z&quot;</span><span class="p">,</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="s2">&quot;$&quot;</span><span class="p">]],</span> <span class="n">whichsound</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="p">[[</span><span class="s2">&quot;o&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;r&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;f&quot;</span><span class="p">]])</span>
<span class="go">[[&quot;&quot;, &quot;$&quot;], [&quot;&quot;, &quot;$&quot;], [&quot;2&quot;, &quot;$&quot;]], [[&quot;o&quot;], [&quot;r&quot;], [&quot;f&quot;, &quot;2&quot;]])</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="get-difference">
<h3>get difference<a class="headerlink" href="#get-difference" title="Permalink to this headline">¶</a></h3>
<dl class="py method">
<dt class="sig sig-object py" id="loanpy.adrc.Adrc.get_diff">
<span class="sig-prename descclassname"><span class="pre">Adrc.</span></span><span class="sig-name descname"><span class="pre">get_diff</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sclistlist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ipa</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.adrc.Adrc.get_diff" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Called by loanpy.adrc.Adrc.read_sc. Tells how much it would cost to move each sound correspondence by looking up the number of occurences of the current and the next phoneme in the sum-of-example dictionary and subtracting the latter from the former. (They were sorted by decreasing frequency by loanpy.qfysc.Qfy.get_sound_corresp) The bigger the difference the greater the cost to move it. Since the higher the sum of examples for each phoneme in a word, the more credible its etymology.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sclistlist</strong> (<em>list of lists</em>) – A word where every phoneme has been replaced with a list of possible sound correspondences ranked by likelihood, i.e. how often each sound correspondence occured in the data.</p></li>
<li><p><strong>ipa</strong> (<em>list</em>) – The tokenised/clusterised input string</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of integers where the integers indicate the cost of moving the phoneme that is at the same index in the sound correspondence list.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list of int</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.adrc</span> <span class="kn">import</span> <span class="n">Adrc</span><span class="p">,</span> <span class="vm">__file__</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2folder</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2sc</span> <span class="o">=</span> <span class="n">path2folder</span> <span class="o">/</span> <span class="s2">&quot;sc_ad_3cogs.txt&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2forms</span> <span class="o">=</span> <span class="n">path2folder</span> <span class="o">/</span> <span class="s2">&quot;forms_3cogs_wot.csv&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span> <span class="o">=</span> <span class="n">Adrc</span><span class="p">(</span><span class="n">scdictlist</span><span class="o">=</span><span class="n">path2sc</span><span class="p">,</span> <span class="n">forms_csv</span><span class="o">=</span><span class="n">path2forms</span><span class="p">,</span> <span class="n">source_language</span><span class="o">=</span><span class="s2">&quot;WOT&quot;</span><span class="p">,</span> <span class="n">target_language</span><span class="o">=</span><span class="s2">&quot;EAH&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">get_diff</span><span class="p">(</span><span class="n">sclistlist</span><span class="o">=</span><span class="p">[[</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;$&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;$&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;$&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;$&quot;</span><span class="p">]],</span> <span class="n">ipa</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">])</span>
<span class="go">[1, 6, 1, 6]</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="read-sound-correspondences">
<h3>read sound correspondences<a class="headerlink" href="#read-sound-correspondences" title="Permalink to this headline">¶</a></h3>
<dl class="py method">
<dt class="sig sig-object py" id="loanpy.adrc.Adrc.read_sc">
<span class="sig-prename descclassname"><span class="pre">Adrc.</span></span><span class="sig-name descname"><span class="pre">read_sc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ipa</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">howmany</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.adrc.Adrc.read_sc" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.adrc.Adrc.adapt and loanpy.adrc.Adrc.reconstruct. Replaces every phoneme of a word with a list of phonemes that it can correspond to, meeting following conditions: a. The product of the length of each list is just minimally above the number indicated in param &lt;howmany&gt; (leftover will be sliced away later). b. Those phonemes are chosen that diminsh the sum of examples of the predicted word the least. (Sum of example means adding together how many times each phoneme of the predicted reconstruction corresponded to the aligned phoneme of the source word in the etymological data.)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ipa</strong> (<em>list</em>) – a tokenised/clusterised word</p></li>
<li><p><strong>howmany</strong> (<em>int</em><em>, </em><em>default=1</em>) – Howmany words would this be, if combinatorics were applied. This is the false positive rate if the prediction is wrong but the false positive rate -1 if the prediction is right. (Say I make 1 guess and its correct, then there are 0 false positives, i.e. howmany-1. If I make one guess and it’s wrong then I’ll have 1 false positive.)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The information to which sounds each input sound can correspond.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list of lists</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.adrc</span> <span class="kn">import</span> <span class="n">Adrc</span><span class="p">,</span> <span class="vm">__file__</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2folder</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;integration&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2sc</span> <span class="o">=</span> <span class="n">path2folder</span> <span class="o">/</span> <span class="s2">&quot;sc_ad_handmade.txt&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span> <span class="o">=</span> <span class="n">Adrc</span><span class="p">(</span><span class="n">scdictlist</span><span class="o">=</span><span class="n">path2sc</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">read_sc</span><span class="p">(</span><span class="n">ipa</span><span class="o">=</span><span class="s2">&quot;dade&quot;</span><span class="p">,</span> <span class="n">howmany</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># 1*1*1*1 = 1</span>
<span class="go">[[&quot;d&quot;], [&quot;a&quot;], [&quot;d&quot;], [&quot;y&quot;]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">read_sc</span><span class="p">(</span><span class="n">ipa</span><span class="o">=</span><span class="s2">&quot;dade&quot;</span><span class="p">,</span> <span class="n">howmany</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>  <span class="c1"># 2*2*1*1 = 4</span>
<span class="go">[[&quot;d&quot;, &quot;tʰ&quot;], [&quot;a&quot;, &quot;e&quot;], [&quot;d&quot;], [&quot;y&quot;]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">read_sc</span><span class="p">(</span><span class="n">ipa</span><span class="o">=</span><span class="s2">&quot;dade&quot;</span><span class="p">,</span> <span class="n">howmany</span><span class="o">=</span><span class="mi">160</span><span class="p">)</span>  <span class="c1"># 4*5*4*2 = 160</span>
<span class="go">[[&quot;d&quot;, &quot;tʰ&quot;, &quot;t&quot;, &quot;tː&quot;], [&quot;a&quot;, &quot;e&quot;, &quot;i&quot;, &quot;o&quot;, &quot;u&quot;], [&quot;d&quot;, &quot;tʰ&quot;, &quot;t&quot;, &quot;tː&quot;], [&quot;y&quot;, &quot;u&quot;]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">read_sc</span><span class="p">(</span><span class="n">ipa</span><span class="o">=</span><span class="s2">&quot;dade&quot;</span><span class="p">,</span> <span class="n">howmany</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="s2">&quot;inf&quot;</span><span class="p">))</span>  <span class="c1"># all possible</span>
<span class="go">[[&quot;d&quot;, &quot;tʰ&quot;, &quot;t&quot;, &quot;tː&quot;], [&quot;a&quot;, &quot;e&quot;, &quot;i&quot;, &quot;o&quot;, &quot;u&quot;], [&quot;d&quot;, &quot;tʰ&quot;, &quot;t&quot;, &quot;tː&quot;], [&quot;y&quot;, &quot;u&quot;, &quot;e&quot;]]</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="adapt-structure">
<h3>adapt structure<a class="headerlink" href="#adapt-structure" title="Permalink to this headline">¶</a></h3>
<dl class="py method">
<dt class="sig sig-object py" id="loanpy.adrc.Adrc.adapt_phonotactics">
<span class="sig-prename descclassname"><span class="pre">Adrc.</span></span><span class="sig-name descname"><span class="pre">adapt_phonotactics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ipastr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_repaired_phonotactics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_paths2repaired_phonotactics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deletion_cost</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">insertion_cost</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">49</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_workflow</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.adrc.Adrc.adapt_phonotactics" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.adrc.Adrc.adapt. Repairs the phonotactic structure of a word.</p>
<dl class="field-list simple">
<dt class="field-odd">Pararm ipastr</dt>
<dd class="field-odd"><p>The input word. Will be tokenised if string.</p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>max_repaired_phonotactics</strong> (<em>int</em><em>, </em><em>default=2</em>) – The maximum number of target phonotactic structures into which we want to turn the source structure.</p></li>
<li><p><strong>max_paths2repaired_phonotactics</strong> (<em>int</em><em>, </em><em>default=1</em>) – The maximum number of different cheapest ways to turn the source structure into the target structure</p></li>
<li><p><strong>deletion_cost</strong> (<em>int</em><em>, </em><em>float</em><em>, </em><em>default=100</em>) – The cost of deleting a segment</p></li>
<li><p><strong>insertion_cost</strong> (<em>int</em><em>, </em><em>float</em><em>, </em><em>default=49</em>) – The cost of inserting a segment</p></li>
<li><p><strong>show_workflow</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Indicate whether 2 steps from this process should be added to self.workflow (useful for debugging): the calculated phonotactic profile of the input-string and the predicted repaired structures.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a list of phonotactically repaired words</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list of str</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.adrc</span> <span class="kn">import</span> <span class="n">Adrc</span><span class="p">,</span> <span class="vm">__file__</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2folder</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;integration&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2sc</span> <span class="o">=</span> <span class="n">path2folder</span> <span class="o">/</span> <span class="s2">&quot;sc_ad_handmade.txt&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2forms</span> <span class="o">=</span> <span class="n">path2folder</span> <span class="o">/</span> <span class="s2">&quot;forms_3cogs_wot.csv&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span> <span class="o">=</span> <span class="n">Adrc</span><span class="p">(</span><span class="n">scdictlist</span><span class="o">=</span><span class="n">path2sc</span><span class="p">,</span> <span class="n">forms_csv</span><span class="o">=</span><span class="n">path2forms</span><span class="p">,</span> <span class="n">source_language</span><span class="o">=</span><span class="s2">&quot;WOT&quot;</span><span class="p">,</span> <span class="n">target_language</span><span class="o">=</span><span class="s2">&quot;EAH&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">adapt_phonotactics</span><span class="p">(</span><span class="n">ipastr</span><span class="o">=</span><span class="s2">&quot;kiki&quot;</span><span class="p">,</span> <span class="n">max_repaired_phonotactics</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="go">[[&#39;k&#39;, &#39;i&#39;, &#39;k&#39;, &#39;i&#39;]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">adapt_phonotactics</span><span class="p">(</span><span class="n">ipastr</span><span class="o">=</span><span class="s2">&quot;kiki&quot;</span><span class="p">,</span> <span class="n">max_repaired_phonotactics</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="go">[[&#39;k&#39;, &#39;i&#39;, &#39;k&#39;], [&#39;k&#39;, &#39;i&#39;, &#39;C&#39;, &#39;k&#39;, &#39;i&#39;]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">adapt_phonotactics</span><span class="p">(</span><span class="n">ipastr</span><span class="o">=</span><span class="s2">&quot;kiki&quot;</span><span class="p">,</span> <span class="n">max_repaired_phonotactics</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">max_paths2repaired_phonotactics</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#C can get inserted before or after k</span>
<span class="go">[[&#39;k&#39;, &#39;i&#39;, &#39;k&#39;], [&#39;k&#39;, &#39;i&#39;, &#39;C&#39;, &#39;k&#39;, &#39;i&#39;], [&#39;k&#39;, &#39;i&#39;, &#39;k&#39;, &#39;C&#39;, &#39;i&#39;]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">scdict_phonotactics</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># empty sound corresp data triggers heuristics</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">adapt_phonotactics</span><span class="p">(</span><span class="n">ipastr</span><span class="o">=</span><span class="s2">&quot;kiki&quot;</span><span class="p">,</span> <span class="n">max_repaired_phonotactics</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">show_workflow</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">[[&#39;V&#39;, &#39;k&#39;, &#39;i&#39;, &#39;k&#39;, &#39;i&#39;], [&#39;i&#39;, &#39;k&#39;, &#39;i&#39;, &#39;C&#39;]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">workflow</span>
<span class="go">OrderedDict([(&#39;donor_phonotactics&#39;, [&#39;CVCV&#39;]), (&#39;predicted_phonotactics&#39;, [[&#39;VCVCV&#39;, &#39;VCVC&#39;]])])</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="get-normalised-sum-of-examples">
<h3>get normalised sum of examples<a class="headerlink" href="#get-normalised-sum-of-examples" title="Permalink to this headline">¶</a></h3>
<dl class="py method">
<dt class="sig sig-object py" id="loanpy.adrc.Adrc.get_nse">
<span class="sig-prename descclassname"><span class="pre">Adrc.</span></span><span class="sig-name descname"><span class="pre">get_nse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">left</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">right</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.adrc.Adrc.get_nse" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.adrc.Adrc.adapt, loanpy.adrc.Adrc.reconstruct, loanpy.loanfinder.Search, loanpy.loanfinder.likeliestphonmatch. Returns 0 if one of the sound correspondences is not documented in the sound correspondence dictionary. By default we are calculating the nse: Check in the sound correspondence dictionary how often each sound correspondence occured, add them together, divide by number of phonemes in the word. If show_workflow is set to True, a tuple will be returned with (normalised sum of examples, sum of examples, list of number of examples for each phoneme). If se=False, instead of the number of examples, the list of cognate sets in which each sound correspondence occurs will be accessed. The return value then is a list of lists. show_workflow does not do anything if se=False.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>left</strong> (<em>str</em>) – The string on the left side of the etymology to align.</p></li>
<li><p><strong>right</strong> (<em>str</em>) – The string on the right side of the etymology to align.</p></li>
<li><p><strong>se</strong> (<em>bool</em><em>, </em><em>default=True</em>) – Calculations based on sum-of-examples dict. If set to False, examples dict will be accessed instead to add extra info but make no calculations.</p></li>
<li><p><strong>show_workflow</strong> (<em>bool</em><em>, </em><em>default=False</em>) – If set to True, this will output how the nse was calculated.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>int | list of int | tuple | list of list</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.adrc</span> <span class="kn">import</span> <span class="n">Adrc</span><span class="p">,</span> <span class="vm">__file__</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2folder</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;integration&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2sc</span> <span class="o">=</span> <span class="n">path2folder</span> <span class="o">/</span> <span class="s2">&quot;sc_ad_handmade.txt&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2forms</span> <span class="o">=</span> <span class="n">path2folder</span> <span class="o">/</span> <span class="s2">&quot;forms_3cogs_wot.csv&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span> <span class="o">=</span> <span class="n">Adrc</span><span class="p">(</span><span class="n">scdictlist</span><span class="o">=</span><span class="n">path2sc</span><span class="p">,</span> <span class="n">forms_csv</span><span class="o">=</span><span class="n">path2forms</span><span class="p">,</span> <span class="n">source_language</span><span class="o">=</span><span class="s2">&quot;WOT&quot;</span><span class="p">,</span> <span class="n">target_language</span><span class="o">=</span><span class="s2">&quot;EAH&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">get_nse</span><span class="p">(</span><span class="s2">&quot;dade&quot;</span><span class="p">,</span> <span class="s2">&quot;dady&quot;</span><span class="p">)</span>
<span class="go">33.25</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">get_nse</span><span class="p">(</span><span class="s2">&quot;dade&quot;</span><span class="p">,</span> <span class="s2">&quot;dady&quot;</span><span class="p">,</span> <span class="n">se</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">[[1, 2], [0], [1, 2], [3]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">get_nse</span><span class="p">(</span><span class="s2">&quot;dade&quot;</span><span class="p">,</span> <span class="s2">&quot;dady&quot;</span><span class="p">,</span> <span class="n">show_workflow</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">(33.25, 133, [1, 6, 1, 125])</span>
</pre></div>
</div>
</dd></dl>

</section>
</section>
<section id="id3">
<h2>sanity.py<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<section id="cache">
<h3>cache<a class="headerlink" href="#cache" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="loanpy.sanity.cache">
<span class="sig-prename descclassname"><span class="pre">loanpy.sanity.</span></span><span class="sig-name descname"><span class="pre">cache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.sanity.cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple decorator function to check if function was already run with given arguments. And to store the results in a csv-file. For more details see loanpy.sanity.check_cache and loanpy.sanity.write_to_cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Always returns None.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.sanity</span> <span class="kn">import</span> <span class="n">cache</span><span class="p">,</span> <span class="vm">__file__</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mockpath2cache</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;output_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;mock_cache.csv&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">mockfunc</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span> <span class="k">return</span> <span class="s2">&quot;bla&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mockfunc</span> <span class="o">=</span> <span class="n">cache</span><span class="p">(</span><span class="n">mockfunc</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mockfunc</span><span class="p">(</span><span class="n">path2cache</span><span class="o">=</span><span class="n">mockpath2cache</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="s2">&quot;hi&quot;</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="s2">&quot;bye&quot;</span><span class="p">)</span>
<span class="go">[Inspect results in mock_cache.csv in folder tests/output_files]</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="loop-thru-data">
<h3>loop_thru_data<a class="headerlink" href="#loop-thru-data" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="loanpy.sanity.loop_thru_data">
<span class="sig-prename descclassname"><span class="pre">loanpy.sanity.</span></span><span class="sig-name descname"><span class="pre">loop_thru_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.sanity.loop_thru_data" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Called by loanpy.sanity.eval_all.
Loops through the input data frame. Crossvalidates and writes down sound changes and inventories if indicated so. Calls loanpy.sanity.eval_one after concluding inventories and sound changes. If crossvalidation is chosen, the row for prediction is isolated from the training data from which sound changes and inventories are calculated. Isolation of that row is reversed at the end of the loop latest - i.e. the taken out elements are all plugged in again so the loop can continue. Last two args (12, 13) will be popped, so only 0-12 are passed on to eval_one. The first argument must be an instance of loanpy.adrc.Adrc. This will also be the return value. The sourcre word is inserted at index 1 of the list of arguments. This is necessary so that all positional arguments are in the right place when passing them to loanpy.adrc.Adrc.adapt and loanpy.adrc.Adrc.reconstruct in loanpy.sanity.eval_adapt and loanpy.santiy.eval_recon.</p>
<dl class="field-list simple">
<dt class="field-odd">param args</dt>
<dd class="field-odd"><p>Arguments 0-14 that were passed to loanpy.sanity.eval_all     (14 not included)</p>
</dd>
<dt class="field-even">type args</dt>
<dd class="field-even"><p>mixed, see details below</p>
</dd>
<dt class="field-odd">param args[0]</dt>
<dd class="field-odd"><p>This is instanciated in loanpy.sanity.eval_all with its     first 9 args</p>
</dd>
<dt class="field-even">type args[0]</dt>
<dd class="field-even"><p>loanpy.adrc.Adrc</p>
</dd>
<dt class="field-odd">param args[1:14]</dt>
<dd class="field-odd"><p>See param &lt;clusters&gt; - &lt;show_workflow&gt;     in loanpy.sanity.eval_all.</p>
</dd>
<dt class="field-even">type args[1:14]</dt>
<dd class="field-even"><p>bool, int</p>
</dd>
<dt class="field-odd">returns</dt>
<dd class="field-odd"><p>The (cross-)validated predictions. Serves as input for loanpy.sanity.postprocess.</p>
</dd>
<dt class="field-even">rtype</dt>
<dd class="field-even"><p>loanpy.adrc.Adrc</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</div></blockquote>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.adrc</span> <span class="kn">import</span> <span class="n">Adrc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.sanity</span> <span class="kn">import</span> <span class="n">loop_thru_data</span><span class="p">,</span> <span class="vm">__file__</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2forms</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;forms_3cogs_wot.csv&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span> <span class="o">=</span> <span class="n">Adrc</span><span class="p">(</span><span class="n">forms_csv</span><span class="o">=</span><span class="n">path2forms</span><span class="p">,</span> <span class="n">source_language</span><span class="o">=</span><span class="s2">&quot;WOT&quot;</span><span class="p">,</span> <span class="n">target_language</span><span class="o">=</span><span class="s2">&quot;EAH&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">loop_thru_data</span><span class="p">(</span><span class="n">adrc_obj</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">49</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">1000</span><span class="p">],</span> <span class="s1">&#39;adapt&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">dfety</span>
<span class="go">      Target_Form Source_Form  Cognacy  guesses best_guess</span>
<span class="go">    0     aɣat͡ʃi    aɣat͡ʃːɯ        1      inf   KeyError</span>
<span class="go">    1       aldaɣ       aldaɣ        2      inf   KeyError</span>
<span class="go">    2        ajan        ajan        3      inf   KeyError</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="evaluate-one">
<h3>evaluate one<a class="headerlink" href="#evaluate-one" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="loanpy.sanity.eval_one">
<span class="sig-prename descclassname"><span class="pre">loanpy.sanity.</span></span><span class="sig-name descname"><span class="pre">eval_one</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tgtwrd</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.sanity.eval_one" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.sanity.loop_thru_data.
Loop through the guesslist and adapts/reconstructs (depending on mode) until either the correct prediction was made or the guesslist has reached its end. Arguments &lt;guesslist&gt; and &lt;mode&gt; are removed from list of args, &lt;howmany&gt; is inserted at index 2.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tgtwrd</strong> (<em>str</em>) – The target word. This needs to be hit by the predictions.     By hit we mean prediction and target must be identical,     i.e. with an edit distance of zero.</p></li>
<li><p><strong>args</strong><strong>[</strong><strong>0</strong><strong>]</strong> (<em>loanpy.adrc.Adrc</em>) – This is instanciated in loanpy.sanity.eval_all with its     first 9 args and passed on to this function via     loanpy.sanity.loop_thru_data. It will be passed on to     loanpy.adrc.Adrc.adapt and loanpy.adrc.Adrc.reconstruct as param &lt;self&gt;     via     loanpy.sanity.eval_adapt and loanpy.santiy.eval_recon.</p></li>
<li><p><strong>args</strong><strong>[</strong><strong>1</strong><strong>]</strong> (<em>str</em>) – The input/source word from which predictions will     be made.     This was inserted into the list of args in lonapy.sanity.loop_thru_data     and will be passed on to param &lt;ipastr&gt; in     loanpy.adrc.Adrc.adapt and loanpy.adrc.Adrc.reconstruct via     loanpy.sanity.eval_adapt and loanpy.sanity.eval_recon</p></li>
<li><p><strong>args</strong><strong>[</strong><strong>2:6</strong><strong>]</strong> – These 4 args will go to both,     loanpy.adrc.Adrc.adapt and loanpy.adrc.Adrc.reconstruct via     loanpy.sanity.eval_adapt and loanpy.sanity.eval_recon. For more details     see param &lt;clusters&gt; - &lt;sort_by_nse&gt;     in loanpy.sanity.eval_all.</p></li>
<li><p><strong>args</strong><strong>[</strong><strong>6:11</strong><strong>]</strong> – These 5 args will go only to     loanpy.adrc.Adrc.adapt via     loanpy.sanity.eval_adapt if param &lt;mode&gt; was set to     “adapt” in loanpy.santiy.eval_all (the default setting).     If mode was set to “reconstruct”, these args will not be passed on.     For more details     see param &lt;max_repaired_phonotactics&gt; - &lt;show_workflow&gt;     in loanpy.sanity.eval_all.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dictionary with at least two keys: Key “guesses” tells     either the index of the target word in the list of predictions, or,     if target was hit through a regular expression, it tells the integer     that was passed on to pararm &lt;howmany&gt;     in loanpy.adrc.Adrc.adapt and loanpy.adrc.Adrc.reconstruct     to make the correct prediction. Infinity means the target     was not hit, either due to a KeyError, or because of wrong predictions.     KeyErrors are more common when param &lt;crossvalidate&gt; = True, since     certain phonemes, clusters, or structures occur only in the word that     is being isolated, i.e. they are missing from the training data and     therefore their keys are missing from the trained model.     Key “best_guess” shows the target word     if target word was hit, else it shows the first guess in the list of     predictions if predictions were made but target missed,     else it shows “KeyError” in case     param  &lt;mode&gt; was set to “adapt” (default) and a KeyError occured     (This commonly happens if param  &lt;scdictbase&gt; in loanpy.sanity.eval_all     is set to None or {} (default), else ipa characters missing from the     trained model would be caught by the heuristics in scdictbase, which     is generated separately with loanpy.helpers.Etym.get_scdictbase) else     if mode was set to “reconstruct” it shows the characters missing from     the trained model together with the string “not old.”     The best setting for param &lt;sort_by_nse&gt; = 1: The     actual best guess goes to the beginning of the list and will show     up in this dictionary, the rest of the     guesses remain unsorted to save time and energy.     If param &lt;show_workflow&gt; was set to “True” the dictionary will contain     additional keys that show the single steps through which the input word     was transformed. The number of workflow-keys varies, depending on the     settings passed on to loanpy.adrc.Adrc.adapt.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.adrc</span> <span class="kn">import</span> <span class="n">Adrc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.sanity</span> <span class="kn">import</span> <span class="n">eval_one</span><span class="p">,</span> <span class="vm">__file__</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2forms</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;forms_3cogs_wot.csv&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2sc_ad</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;sc_ad_3cogs.txt&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span> <span class="o">=</span> <span class="n">Adrc</span><span class="p">(</span><span class="n">forms_csv</span><span class="o">=</span><span class="n">path2forms</span><span class="p">,</span> <span class="n">source_language</span><span class="o">=</span><span class="s2">&quot;WOT&quot;</span><span class="p">,</span> <span class="n">target_language</span><span class="o">=</span><span class="s2">&quot;EAH&quot;</span><span class="p">,</span> <span class="n">scdictlist</span><span class="o">=</span><span class="n">path2sc_ad</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">eval_one</span><span class="p">(</span><span class="s2">&quot;dada&quot;</span><span class="p">,</span> <span class="n">adrc_obj</span><span class="p">,</span> <span class="s2">&quot;dada&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">49</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;adapt&quot;</span><span class="p">)</span>
<span class="go">{&#39;guesses&#39;: 1,</span>
<span class="go">&#39;best_guess&#39;: &#39;dada&#39;,</span>
<span class="go">&#39;tokenised&#39;: &quot;[&#39;d&#39;, &#39;a&#39;, &#39;d&#39;, &#39;a&#39;]&quot;,</span>
<span class="go">&#39;adapted_phonotactics&#39;: &quot;[[&#39;d&#39;, &#39;a&#39;, &#39;d&#39;, &#39;a&#39;]]&quot;,</span>
<span class="go">&#39;before_combinatorics&#39;: &quot;[[[&#39;d&#39;], [&#39;a&#39;], [&#39;d&#39;], [&#39;a&#39;]]]&quot;}</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="evaluate-adapt">
<h3>evaluate adapt<a class="headerlink" href="#evaluate-adapt" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="loanpy.sanity.eval_adapt">
<span class="sig-prename descclassname"><span class="pre">loanpy.sanity.</span></span><span class="sig-name descname"><span class="pre">eval_adapt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tgtwrd</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.sanity.eval_adapt" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.sanity.eval_one.
Checks if target was hit by predictions made by loanpy.adrc.Adrc.adapt</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tgtwrd</strong> (<em>str</em>) – See loanpy.sanity.eval_one</p></li>
<li><p><strong>args</strong><strong>[</strong><strong>:2</strong><strong>]</strong> (<em>loanpy.adrc.Adrc</em><em>, </em><em>str</em>) – See loanpy.sanity.eval_one &lt;args[0]&gt;, &lt;args[1]&gt;</p></li>
<li><p><strong>args</strong><strong>[</strong><strong>2</strong><strong>]</strong> (<em>list of int</em>) – The number of guesses to be made. Will be passed on to     loanpy.adrc.Adrc.adapt’s param     &lt;howmany&gt;. This number was concluded from param &lt;guesslist&gt; in     loanpy.sanity.eval_one.</p></li>
<li><p><strong>args</strong><strong>[</strong><strong>3:</strong><strong>]</strong> – Remaining args that need to be passed on to     loanpy.adrc.Adrc.adapt.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dictionary with at least two keys: Key “guesses” tells     the index of the target word in the list of predictions.     Infinity means the target     was not hit, either due to a KeyError, or because of wrong predictions.     KeyErrors are more common when param &lt;crossvalidate&gt; = True, since     certain phonemes, clusters, or structures occur only in the word that     is being isolated, i.e. they are missing from the training data and     therefore their keys are missing from the trained model.     Key “best_guess” shows the target word     if target word was hit, else it shows the first guess in the list of     predictions if predictions were made but target missed,     else it shows the string “KeyError” in case     a KeyError occured     (This commonly happens if param  &lt;scdictbase&gt; in loanpy.sanity.eval_all     is set to None or {} (default), else ipa characters missing from the     trained model would be caught by the heuristics in scdictbase, which     is generated separately with loanpy.helpers.Etym.get_scdictbase).     The best setting for param &lt;sort_by_nse&gt; = 1: The     actual best guess goes to the beginning of the list and will show     up in this dictionary, the rest of the     guesses remain unsorted to save time and energy.     If param &lt;show_workflow&gt; was set to “True” the dictionary will contain     additional keys that show the single steps through which the input word     was transformed. The number of workflow-keys varies between 2-5,     depending on the     settings passed on to loanpy.adrc.Adrc.adapt, whose documentation of     param &lt;show_workflow&gt; provides more information.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.adrc</span> <span class="kn">import</span> <span class="n">Adrc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.sanity</span> <span class="kn">import</span> <span class="n">eval_adapt</span><span class="p">,</span> <span class="vm">__file__</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2forms</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;forms_3cogs_wot.csv&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2sc_ad</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;sc_ad_3cogs.txt&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span> <span class="o">=</span> <span class="n">Adrc</span><span class="p">(</span><span class="n">forms_csv</span><span class="o">=</span><span class="n">path2forms</span><span class="p">,</span> <span class="n">source_language</span><span class="o">=</span><span class="s2">&quot;WOT&quot;</span><span class="p">,</span> <span class="n">target_language</span><span class="o">=</span><span class="s2">&quot;EAH&quot;</span><span class="p">,</span> <span class="n">scdictlist</span><span class="o">=</span><span class="n">path2sc_ad</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">eval_adapt</span><span class="p">(</span><span class="s2">&quot;daʃa&quot;</span><span class="p">,</span> <span class="n">adrc_obj</span><span class="p">,</span> <span class="s2">&quot;aldajd&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">49</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<span class="go">{&#39;guesses&#39;: inf,</span>
<span class="go">&#39;best_guess&#39;: &#39;aldad&#39;,</span>
<span class="go">&#39;tokenised&#39;: &quot;[&#39;a&#39;, &#39;l&#39;, &#39;d&#39;, &#39;a&#39;, &#39;j&#39;, &#39;d&#39;]&quot;,</span>
<span class="go">&#39;donor_phonotactics&#39;: &#39;VCCVCC&#39;,</span>
<span class="go">&#39;predicted_phonotactics&#39;: &quot;[&#39;VCCVC&#39;]&quot;,</span>
<span class="go">&#39;adapted_phonotactics&#39;: &quot;[[&#39;a&#39;, &#39;l&#39;, &#39;d&#39;, &#39;a&#39;, &#39;d&#39;]]&quot;,</span>
<span class="go">&#39;before_combinatorics&#39;: &quot;[[[&#39;a&#39;], [&#39;l&#39;], [&#39;d&#39;], [&#39;a&#39;], [&#39;d&#39;]]]&quot;}</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="evaluate-reconstruct">
<h3>evaluate reconstruct<a class="headerlink" href="#evaluate-reconstruct" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="loanpy.sanity.eval_recon">
<span class="sig-prename descclassname"><span class="pre">loanpy.sanity.</span></span><span class="sig-name descname"><span class="pre">eval_recon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tgtwrd</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.sanity.eval_recon" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.sanity.eval_one.
Checks if target was hit by predictions made by     loanpy.adrc.Adrc.reconstruct</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tgtwrd</strong> (<em>str</em>) – See loanpy.sanity.eval_one</p></li>
<li><p><strong>args</strong><strong>[</strong><strong>:2</strong><strong>]</strong> (<em>loanpy.adrc.Adrc</em><em>, </em><em>str</em>) – See loanpy.sanity.eval_one &lt;args[0]&gt;, &lt;args[1]&gt;</p></li>
<li><p><strong>args</strong><strong>[</strong><strong>2</strong><strong>]</strong> (<em>list of int</em>) – The number of guesses to be made. Will be passed on to     loanpy.adrc.Adrc.reconstruct’s param     &lt;howmany&gt;. This number was concluded from param &lt;guesslist&gt; in     loanpy.sanity.eval_one.</p></li>
<li><p><strong>args</strong><strong>[</strong><strong>3:7</strong><strong>]</strong> (<em>mixed</em>) – Remaining args that need to be passed on to     loanpy.adrc.Adrc.reconstruct.</p></li>
<li><p><strong>args</strong><strong>[</strong><strong>7:</strong><strong>]</strong> (<em>mixed</em>) – These do nothing. It’s just slicker to pass     on all args to loanpy.adrc.Adrc.reconstruct     than having to slice them first.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dictionary with exactly two keys: Key “guesses” tells     either the index of the target word in the list of predictions, or,     if target was hit through a regular expression, the integer     that was passed on to pararm &lt;howmany&gt;     in loanpy.adrc.Adrc.reconstruct     to make the correct prediction. Infinity means the target     was not hit, either due to a KeyError, or because of wrong predictions.     KeyErrors are more common when param &lt;crossvalidate&gt; = True, since     certain phonemes, clusters, or structures occur only in the word that     is being isolated, i.e. they are missing from the training data and     therefore their keys are missing from the trained model.     Key “best_guess” shows the target word     if target word was hit, else it shows the first guess in the list of     predictions if predictions were made but target missed,     else if a KeyError occured, it shows the characters missing from     the trained model together with the string “not old.”     The best setting for param &lt;sort_by_nse&gt; = 1: The     actual best guess goes to the beginning of the list and will show     up in this dictionary, the rest of the     guesses remain unsorted to save time and energy.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.adrc</span> <span class="kn">import</span> <span class="n">Adrc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.sanity</span> <span class="kn">import</span> <span class="n">eval_recon</span><span class="p">,</span> <span class="vm">__file__</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2forms</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;forms_3cogs_wot.csv&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2sc_rc</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;sc_rc_3cogs.txt&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span> <span class="o">=</span> <span class="n">Adrc</span><span class="p">(</span><span class="n">forms_csv</span><span class="o">=</span><span class="n">path2forms</span><span class="p">,</span> <span class="n">source_language</span><span class="o">=</span><span class="s2">&quot;H&quot;</span><span class="p">,</span> <span class="n">target_language</span><span class="o">=</span><span class="s2">&quot;EAH&quot;</span><span class="p">,</span> <span class="n">scdictlist</span><span class="o">=</span><span class="n">path2sc_rc</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">eval_recon</span><span class="p">(</span><span class="s2">&quot;anaat͡ʃi&quot;</span><span class="p">,</span> <span class="n">adrc_obj</span><span class="p">,</span> <span class="s2">&quot;aːruː&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<span class="go">{&#39;guesses&#39;: 1, &#39;best_guess&#39;: &#39;anaat͡ʃi&#39;}</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="get-non-crossvalidated-sound-correspondences">
<h3>get non-crossvalidated sound correspondences<a class="headerlink" href="#get-non-crossvalidated-sound-correspondences" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="loanpy.sanity.get_noncrossval_sc">
<span class="sig-prename descclassname"><span class="pre">loanpy.sanity.</span></span><span class="sig-name descname"><span class="pre">get_noncrossval_sc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">adrc_obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">writesc</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.sanity.get_noncrossval_sc" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.sanity.loop_thru_data.     Get non-crossvalidated sound changes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>adrc_obj</strong> (<em>loanpy.adrc.Adrc</em>) – This is instanciated in loanpy.sanity.eval_all with its     first 9 args</p></li>
<li><p><strong>writesc</strong> – Should sound changes be written?     Provide a path to a <em>folder</em> (!) if yes. For pitfalls see     sanity.eval_all param &lt;writesc&gt;.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>an Adrc object with sound correspondences     plugged into attribute     &lt;scdict&gt;, sum of examples into &lt;sedict&gt; and phonotactic correspondecnes     into &lt;scdict_phonotactics&gt;.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>loanpy.adrc.Adrc</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.adrc</span> <span class="kn">import</span> <span class="n">Adrc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.sanity</span> <span class="kn">import</span> <span class="n">get_noncrossval_sc</span><span class="p">,</span> <span class="vm">__file__</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2forms</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;forms_3cogs_wot.csv&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span> <span class="o">=</span> <span class="n">Adrc</span><span class="p">(</span><span class="n">forms_csv</span><span class="o">=</span><span class="n">path2forms</span><span class="p">,</span> <span class="n">source_language</span><span class="o">=</span><span class="s2">&quot;WOT&quot;</span><span class="p">,</span> <span class="n">target_language</span><span class="o">=</span><span class="s2">&quot;EAH&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span> <span class="o">=</span> <span class="n">get_noncrossval_sc</span><span class="p">(</span><span class="n">adrc_obj</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">scdict</span>
<span class="go">{&#39;a&#39;: [&#39;a&#39;], &#39;d&#39;: [&#39;d&#39;], &#39;j&#39;: [&#39;j&#39;], &#39;l&#39;: [&#39;l&#39;],</span>
<span class="go">&#39;n&#39;: [&#39;n&#39;], &#39;t͡ʃː&#39;: [&#39;t͡ʃ&#39;], &#39;ɣ&#39;: [&#39;ɣ&#39;], &#39;ɯ&#39;: [&#39;i&#39;]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">sedict</span>
<span class="go">{&#39;a&lt;a&#39;: 6, &#39;d&lt;d&#39;: 1, &#39;i&lt;ɯ&#39;: 1, &#39;j&lt;j&#39;: 1,</span>
<span class="go">&#39;l&lt;l&#39;: 1, &#39;n&lt;n&#39;: 1, &#39;t͡ʃ&lt;t͡ʃː&#39;: 1, &#39;ɣ&lt;ɣ&#39;: 2}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">scdict_phonotactics</span>
<span class="go">{&#39;VCCVC&#39;: [&#39;VCCVC&#39;, &#39;VCVC&#39;, &#39;VCVCV&#39;],</span>
<span class="go"> &#39;VCVC&#39;: [&#39;VCVC&#39;, &#39;VCCVC&#39;, &#39;VCVCV&#39;],</span>
<span class="go"> &#39;VCVCV&#39;: [&#39;VCVCV&#39;, &#39;VCVC&#39;, &#39;VCCVC&#39;]}</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="get-crossvalidated-data">
<h3>get crossvalidated data<a class="headerlink" href="#get-crossvalidated-data" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="loanpy.sanity.get_crossval_data">
<span class="sig-prename descclassname"><span class="pre">loanpy.sanity.</span></span><span class="sig-name descname"><span class="pre">get_crossval_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">adrc_obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">writesc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.sanity.get_crossval_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.sanity.loop_thru_data. Get sound changes by dropping the indicated row to isolate from the dataframe, and extracting sound correspondences from the data without the dropped row.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>adrc_obj</strong> (<em>loanpy.adrc.Adrc</em>) – loanpy.adrc.Adrc. Contains self.dfety, which is the etymological data for training.</p></li>
<li><p><strong>idx</strong> (<em>int</em>) – Index of the row to drop from the etymological data</p></li>
<li><p><strong>writesc</strong> (<em>None</em><em> | </em><em>pathlib.PosixPath</em><em> (</em><em>to folder!</em><em>) </em><em>| </em><em>str</em>) – Indicate whether the sound correspondece     files (results of training) should be written. If None, they will not be written. If they should be written, a path to a <em>folder</em> has to be provided since this function will be called for every round of the main loop in loanpy.sanity.eval_all and multiple files will be written. See param writesc in eval_all for more details.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The same instance of the Adrc-class but with the cross-validated model passed into its attributes for looking up sound correspondences.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>loanpy.adrc.Adrc</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.adrc</span> <span class="kn">import</span> <span class="n">Adrc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.sanity</span> <span class="kn">import</span> <span class="n">get_crossval_data</span><span class="p">,</span> <span class="vm">__file__</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2forms</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;forms_3cogs_wot.csv&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span> <span class="o">=</span> <span class="n">Adrc</span><span class="p">(</span><span class="n">forms_csv</span><span class="o">=</span><span class="n">path2forms</span><span class="p">,</span> <span class="n">source_language</span><span class="o">=</span><span class="s2">&quot;WOT&quot;</span><span class="p">,</span> <span class="n">target_language</span><span class="o">=</span><span class="s2">&quot;EAH&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span> <span class="o">=</span> <span class="n">get_crossval_data</span><span class="p">(</span><span class="n">adrc_obj</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># first cog isolated, missing sc: a ɣ a t͡ʃ i - a ɣ a t͡ʃː ɯ</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">scdict</span>
<span class="go">{&#39;a&#39;: [&#39;a&#39;], &#39;d&#39;: [&#39;d&#39;], &#39;j&#39;: [&#39;j&#39;], &#39;l&#39;: [&#39;l&#39;], &#39;n&#39;: [&#39;n&#39;], &#39;ɣ&#39;: [&#39;ɣ&#39;]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">sedict</span>
<span class="go">{&#39;a&lt;a&#39;: 4, &#39;d&lt;d&#39;: 1, &#39;j&lt;j&#39;: 1, &#39;l&lt;l&#39;: 1, &#39;n&lt;n&#39;: 1, &#39;ɣ&lt;ɣ&#39;: 1}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">scdict_phonotactics</span>
<span class="go">{&#39;VCCVC&#39;: [&#39;VCCVC&#39;, &#39;VCVC&#39;], &#39;VCVC&#39;: [&#39;VCVC&#39;, &#39;VCCVC&#39;]}</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="postprocess">
<h3>postprocess<a class="headerlink" href="#postprocess" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="loanpy.sanity.postprocess">
<span class="sig-prename descclassname"><span class="pre">loanpy.sanity.</span></span><span class="sig-name descname"><span class="pre">postprocess</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">adrc_obj</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.sanity.postprocess" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.sanity.eval_all.     Takes the return value of sanity.loop_thru_data as input. Needs columns     “guesses” and “best guess” to make calculations, which are:     a) Calculates the nses between Source and Target words, as well as     Source words and best guesses. This results in 2*4=8 columns, since     workflow will be returned as well. b) Checks if the correct phonotactics     were predicted or not,     in case param &lt;show_workflow&gt; = True and &lt;max_repaired_phonotactics&gt; &gt; 0 in     loanpy.sanity.eval_all.     c) calculates the Levenshtein Distance and its     normalised version between Source words and best guesses.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>adrc_obj</strong> (<em>loanpy.adrc.Adrc</em>) – This is returned by sanity.loop_thru_data</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An adrc_obj with 10-11 additional columns: 2*4=8 about nse.     1 optional one called “phonotactics_predicted” and 2 about the Levenshtein distances.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>loanpy.adrc.Adrc</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.adrc</span> <span class="kn">import</span> <span class="n">Adrc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.sanity</span> <span class="kn">import</span> <span class="n">postprocess</span><span class="p">,</span> <span class="vm">__file__</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2forms</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;forms_3cogs_wot.csv&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2sc_ad</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;sc_ad_3cogs.txt&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span> <span class="o">=</span> <span class="n">Adrc</span><span class="p">(</span><span class="n">forms_csv</span><span class="o">=</span><span class="n">path2forms</span><span class="p">,</span> <span class="n">source_language</span><span class="o">=</span><span class="s2">&quot;WOT&quot;</span><span class="p">,</span> <span class="n">target_language</span><span class="o">=</span><span class="s2">&quot;EAH&quot;</span><span class="p">,</span> <span class="n">scdictlist</span><span class="o">=</span><span class="n">path2sc_ad</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># pretend guesses are already made</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">dfety</span><span class="p">[</span><span class="s2">&quot;best_guess&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;aɣa&quot;</span><span class="p">,</span> <span class="s2">&quot;bla&quot;</span><span class="p">,</span> <span class="s2">&quot;ajan&quot;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">postprocess</span><span class="p">(</span><span class="n">adrc_obj</span><span class="p">)</span><span class="o">.</span><span class="n">dfety</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">])</span>
<span class="go">0    aɣat͡ʃi</span>
<span class="go">1      aldaɣ</span>
<span class="go">2       ajan</span>
<span class="go">Name: Target_Form, dtype: object</span>
<span class="go">0    aɣat͡ʃːɯ</span>
<span class="go">1       aldaɣ</span>
<span class="go">2        ajan</span>
<span class="go">Name: Source_Form, dtype: object</span>
<span class="go">0    1</span>
<span class="go">1    2</span>
<span class="go">2    3</span>
<span class="go">Name: Cognacy, dtype: int64</span>
<span class="go">0     aɣa</span>
<span class="go">1     bla</span>
<span class="go">2    ajan</span>
<span class="go">Name: best_guess, dtype: object</span>
<span class="go">0    3.2</span>
<span class="go">1    3.2</span>
<span class="go">2    3.5</span>
<span class="go">Name: NSE_Source_Target_Form, dtype: float64</span>
<span class="go">0    16</span>
<span class="go">1    16</span>
<span class="go">2    14</span>
<span class="go">Name: SE_Source_Target_Form, dtype: int64</span>
<span class="go">0    [6, 2, 6, 1, 1]</span>
<span class="go">1    [6, 1, 1, 6, 2]</span>
<span class="go">2       [6, 1, 6, 1]</span>
<span class="go">Name: E_distr_Source_Target_Form, dtype: object</span>
<span class="go">0    [&#39;a&lt;a&#39;, &#39;ɣ&lt;ɣ&#39;, &#39;a&lt;a&#39;, &#39;t͡ʃ&lt;t͡ʃː&#39;, &#39;i&lt;ɯ&#39;]</span>
<span class="go">1         [&#39;a&lt;a&#39;, &#39;l&lt;l&#39;, &#39;d&lt;d&#39;, &#39;a&lt;a&#39;, &#39;ɣ&lt;ɣ&#39;]</span>
<span class="go">2                [&#39;a&lt;a&#39;, &#39;j&lt;j&#39;, &#39;a&lt;a&#39;, &#39;n&lt;n&#39;]</span>
<span class="go">Name: align_Source_Target_Form, dtype: object</span>
<span class="go">0    2.80</span>
<span class="go">1    1.17</span>
<span class="go">2    3.50</span>
<span class="go">Name: NSE_Source_best_guess, dtype: float64</span>
<span class="go">0    14</span>
<span class="go">1     7</span>
<span class="go">2    14</span>
<span class="go">Name: SE_Source_best_guess, dtype: int64</span>
<span class="go">0       [6, 2, 6, 0, 0]</span>
<span class="go">1    [0, 0, 1, 0, 6, 0]</span>
<span class="go">2          [6, 1, 6, 1]</span>
<span class="go">Name: E_distr_Source_best_guess, dtype: object</span>
<span class="go">0        [&#39;a&lt;a&#39;, &#39;ɣ&lt;ɣ&#39;, &#39;a&lt;a&#39;, &#39;C&lt;t͡ʃː&#39;, &#39;V&lt;ɯ&#39;]</span>
<span class="go">1    [&#39;V&lt;a&#39;, &#39;b&lt;C&#39;, &#39;l&lt;l&#39;, &#39;C&lt;d&#39;, &#39;a&lt;a&#39;, &#39;C&lt;ɣ&#39;]</span>
<span class="go">2                  [&#39;a&lt;a&#39;, &#39;j&lt;j&#39;, &#39;a&lt;a&#39;, &#39;n&lt;n&#39;]</span>
<span class="go">Name: align_Source_best_guess, dtype: object</span>
<span class="go">0    4</span>
<span class="go">1    3</span>
<span class="go">2    0</span>
<span class="go">Name: fast_levenshtein_distance_best_guess_Target_Form, dtype: int64</span>
<span class="go">0    0.57</span>
<span class="go">1    0.60</span>
<span class="go">2    0.00</span>
<span class="go">Name: fast_levenshtein_distance_div_maxlen_best_guess_Target_Form, dtype: float64</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="postprocess2">
<h3>postprocess2<a class="headerlink" href="#postprocess2" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="loanpy.sanity.postprocess2">
<span class="sig-prename descclassname"><span class="pre">loanpy.sanity.</span></span><span class="sig-name descname"><span class="pre">postprocess2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">adrc_obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">guesslist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">write_to</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.sanity.postprocess2" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.sanity.eval_all.
2nd postprocessing. Calls loanpy.sanity.get_tpr_fpr_opt to get the     true positive rate, false positive rate and the optimum. Calculates     statistics from that, writes output files as .csv and .jpg if     indicated so.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>adrc_obj</strong> (<em>loanpy.adrc.Adrc</em>) – The return value of loanpy.sanity.postprocess.</p></li>
<li><p><strong>guesslist</strong> (<em>list of int</em>) – The list of number of guesses that are     looped through in loanpy.sanity.eval_one and passed on to     param  &lt;howmany&gt; in loanpy.adrc.Adrc.adapt and     loanpy.adrc.Adrc.reconstruct via loanpy.sanity.eval_adapt and     loanpy.sanity.eval_recon. Defined in loanpy.sanity.eval_all.</p></li>
<li><p><strong>mode</strong> (<em>&quot;adapt&quot;</em><em> (</em><em>default</em><em>)</em><em>, </em><em>&quot;reconstruct&quot;</em>) – Defined in loanpy.sanity.eval_all.</p></li>
<li><p><strong>write_to</strong> (<em>pathlib.PosixPath</em><em> | </em><em>str</em><em> | </em><em>None</em>) – None, if no output should be written - this is the     preferred setting if loanpy.sanity.eval_all is run from a loop.     Else a path to a file including the “.csv” extension in the file name     should be provided. There will be another file written with the same     name but with a .jpg ending instead.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The return value of loanpy.sanity.make_stat</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple of int, str, str</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.adrc</span> <span class="kn">import</span> <span class="n">Adrc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.sanity</span> <span class="kn">import</span> <span class="n">postprocess2</span><span class="p">,</span> <span class="vm">__file__</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2forms</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;forms_3cogs_wot.csv&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2sc_ad</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;sc_ad_3cogs.txt&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span> <span class="o">=</span> <span class="n">Adrc</span><span class="p">(</span><span class="n">forms_csv</span><span class="o">=</span><span class="n">path2forms</span><span class="p">,</span> <span class="n">source_language</span><span class="o">=</span><span class="s2">&quot;WOT&quot;</span><span class="p">,</span> <span class="n">target_language</span><span class="o">=</span><span class="s2">&quot;EAH&quot;</span><span class="p">,</span> <span class="n">scdictlist</span><span class="o">=</span><span class="n">path2sc_ad</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># pretend guesses are already made</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">dfety</span><span class="p">[</span><span class="s2">&quot;guesses&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">postprocess2</span><span class="p">(</span><span class="n">adrc_obj</span><span class="p">,</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="s2">&quot;adapt&quot;</span><span class="p">)</span>
<span class="go">(5, &#39;3/3&#39;, &#39;100%&#39;)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="get-normalised-sum-of-examples-for-data-frame">
<h3>get normalised sum of examples for data frame<a class="headerlink" href="#get-normalised-sum-of-examples-for-data-frame" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="loanpy.sanity.get_nse4df">
<span class="sig-prename descclassname"><span class="pre">loanpy.sanity.</span></span><span class="sig-name descname"><span class="pre">get_nse4df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">adrc_obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tgt_col</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.sanity.get_nse4df" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.sanity.postprocess.     Calcuclates nse between column Source_Form and given target column</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>adrc_obj</strong> (<em>loanpy.adrc.Adrc</em>) – The return value of loanpy.sanity.loop_thru_data</p></li>
<li><p><strong>tgt_col</strong> (<em>str</em>) – The name of the target column     if adrc_obj.dfety, to which to compare its column     “Source_Form” to, to establish the normalised sum of examples (nse).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The same adrc object as the input was but with 4 columns added:     normalised sum of examples (nse), sum of examples (se), examples (e),     and the alignment.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>loanpy.adrc.Adrc</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.adrc</span> <span class="kn">import</span> <span class="n">Adrc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.sanity</span> <span class="kn">import</span> <span class="n">get_nse4df</span><span class="p">,</span> <span class="vm">__file__</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2forms</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;forms_3cogs_wot.csv&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2sc_ad</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;sc_ad_3cogs.txt&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span> <span class="o">=</span> <span class="n">Adrc</span><span class="p">(</span><span class="n">forms_csv</span><span class="o">=</span><span class="n">path2forms</span><span class="p">,</span> <span class="n">source_language</span><span class="o">=</span><span class="s2">&quot;WOT&quot;</span><span class="p">,</span> <span class="n">target_language</span><span class="o">=</span><span class="s2">&quot;EAH&quot;</span><span class="p">,</span> <span class="n">scdictlist</span><span class="o">=</span><span class="n">path2sc_ad</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_nse4df</span><span class="p">(</span><span class="n">adrc_obj</span><span class="p">,</span> <span class="s2">&quot;Target_Form&quot;</span><span class="p">)</span>
<span class="go">[Similar large output as in the example for loanpy.sanity.postprocess,</span>
<span class="go"> just last two columns missing]</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="phonotactics-predicted">
<h3>phonotactics predicted?<a class="headerlink" href="#phonotactics-predicted" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="loanpy.sanity.phonotactics_predicted">
<span class="sig-prename descclassname"><span class="pre">loanpy.sanity.</span></span><span class="sig-name descname"><span class="pre">phonotactics_predicted</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">adrc_obj</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.sanity.phonotactics_predicted" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.sanity.postprocess.     Checks if phonotactic profile of target word was predicted or not     and adds that information to a new column called     “phonotactics_predicted”. If     column “predicted_phonotactics” is missing from     adrc_obj.dfety a KeyError is     triggered and the input object is returned without any changes.     One way to avoid a KeyError is setting param &lt;show_workflow&gt; to True     and &lt;max_repaired_phonotactics&gt; &gt; 0 in     loanpy.sanity.eval_all because this will create the column     “predicted_phonotactics”.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>adrc_obj</strong> (<em>loanpy.adrc.Adrc</em>) – The output value of loanpy.sanity.get_nse4df</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The same object as inputted, but optionally with an     extra column “phonotactics_predicted”.</p>
</dd>
<dt class="field-odd">Rytpe</dt>
<dd class="field-odd"><p>loanpy.adrc.Adrc</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pandas</span> <span class="kn">import</span> <span class="n">DataFrame</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.adrc</span> <span class="kn">import</span> <span class="n">Adrc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.sanity</span> <span class="kn">import</span> <span class="n">phonotactics_predicted</span><span class="p">,</span> <span class="vm">__file__</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span> <span class="o">=</span> <span class="n">Adrc</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">dfety</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;Target_Form&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;abc&quot;</span><span class="p">,</span> <span class="s2">&quot;def&quot;</span><span class="p">,</span> <span class="s2">&quot;ghi&quot;</span><span class="p">],</span> <span class="s2">&quot;predicted_phonotactics&quot;</span><span class="p">:</span> <span class="p">[[</span><span class="s2">&quot;CCC&quot;</span><span class="p">,</span> <span class="s2">&quot;VVV&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;CVC&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;CCV&quot;</span><span class="p">,</span> <span class="s2">&quot;CCC&quot;</span><span class="p">]]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">phonotactics_predicted</span><span class="p">(</span><span class="n">adrc_obj</span><span class="p">)</span><span class="o">.</span><span class="n">dfety</span>
<span class="go">  Target_Form predicted_phonotactics  phonotactics_predicted</span>
<span class="go">0         abc             [CCC, VVV]                   False</span>
<span class="go">1         def                  [CVC]                    True</span>
<span class="go">2         ghi             [CCV, CCC]                    True</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="get-distances">
<h3>get distances<a class="headerlink" href="#get-distances" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="loanpy.sanity.get_dist">
<span class="sig-prename descclassname"><span class="pre">loanpy.sanity.</span></span><span class="sig-name descname"><span class="pre">get_dist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">adrc_obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dst_msrs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['fast_levenshtein_distance',</span> <span class="pre">'fast_levenshtein_distance_div_maxlen']</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.sanity.get_dist" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.sanity.postprocess.
Calculates the Levenshtein Distance and the normalised Levenshtein     Distance between Target and best guess. This is the best way to     compare the performance of the rule-based model with that of an AI.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>adrc_obj</strong> (<em>loanpy.adrc.Adrc</em>) – The output value of loanpy.sanity.phonotactics_pred</p></li>
<li><p><strong>col</strong> (<em>str</em>) – The name of the column with the words to which the     distance to the target     words should be calculated.</p></li>
<li><p><strong>dst_msrs</strong> – The list of distance measures that should be calculated.     For an exhaustive list of input options see param     &lt;phondist_msr&gt; in loanpy.loanfinder.Search.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The same object as inputted but with the same amount of     extra columns as the list provided in param &lt;dst_msrs&gt; is long.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>loanpy.adrc.Adrc</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pandas</span> <span class="kn">import</span> <span class="n">DataFrame</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.adrc</span> <span class="kn">import</span> <span class="n">Adrc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.sanity</span> <span class="kn">import</span> <span class="n">get_dist</span><span class="p">,</span> <span class="vm">__file__</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span> <span class="o">=</span> <span class="n">Adrc</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adrc_obj</span><span class="o">.</span><span class="n">dfety</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;best_guess&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;will not buy&quot;</span><span class="p">,</span> <span class="s2">&quot;record&quot;</span><span class="p">,</span> <span class="s2">&quot;scratched&quot;</span><span class="p">],</span> <span class="s2">&quot;Target_Form&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;won&#39;t buy&quot;</span><span class="p">,</span> <span class="s2">&quot;tobacconists&quot;</span><span class="p">,</span> <span class="s2">&quot;scratched&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">get_dist</span><span class="p">(</span><span class="n">adrc_obj</span><span class="p">,</span> <span class="s2">&quot;best_guess&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">dfety</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">])</span>
<span class="go">0    will not buy</span>
<span class="go">1          record</span>
<span class="go">2       scratched</span>
<span class="go">Name: best_guess, dtype: object</span>
<span class="go">0       won&#39;t buy</span>
<span class="go">1    tobacconists</span>
<span class="go">2       scratched</span>
<span class="go">Name: Target_Form, dtype: object</span>
<span class="go">0     5</span>
<span class="go">1    10</span>
<span class="go">2     0</span>
<span class="go">Name: fast_levenshtein_distance_best_guess_Target_Form, dtype: int64</span>
<span class="go">0    0.42</span>
<span class="go">1    0.83</span>
<span class="go">2    0.00</span>
<span class="go">Name: fast_levenshtein_distance_div_maxlen_best_guess_Target_Form, dtype: float64</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="make-statistics">
<h3>make statistics<a class="headerlink" href="#make-statistics" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="loanpy.sanity.make_stat">
<span class="sig-prename descclassname"><span class="pre">loanpy.sanity.</span></span><span class="sig-name descname"><span class="pre">make_stat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">opt_fp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">opt_tp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_fp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">len_df</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.sanity.make_stat" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.sanity.postprocess2.
Calculate  statistics from optimum, max nr of guesses and length     of input data frame.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>opt_fp</strong> (<em>float</em>) – The optimal false positive rate as a fraction of the     maximal false positive rate.</p></li>
<li><p><strong>opt_tp</strong> (<em>float</em>) – The optimal true positive rate as a fraction of the     total number of input words for predictions, i.e. length of data frame.</p></li>
<li><p><strong>max_fp</strong> (<em>int</em><em>, </em><em>float</em>) – The maximal false positive rate is the     highest number of possible guesses, i.e. the last element of the list     passed to param &lt;guesslist&gt; in loanpy.sanity.eval_all.</p></li>
<li><p><strong>len_df</strong> (<em>int</em>) – The total number of input words for predictions.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The optimal setting for param &lt;howmany&gt; in     loanpy.adrc.Adrc.adapt or loanpy.adrc.Adrc.reconstruct.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple of int, str, str</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.sanity</span> <span class="kn">import</span> <span class="n">make_stat</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">make_stat</span><span class="p">(</span><span class="n">opt_fp</span><span class="o">=</span><span class="mf">0.099</span><span class="p">,</span> <span class="n">opt_tp</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span> <span class="n">max_fp</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">len_df</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="go">(100, &quot;6/10&quot;, &quot;60%&quot;)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="get-true-positive-rate-false-positive-rate-optimum">
<h3>get true positive rate false positive rate, optimum<a class="headerlink" href="#get-true-positive-rate-false-positive-rate-optimum" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="loanpy.sanity.get_tpr_fpr_opt">
<span class="sig-prename descclassname"><span class="pre">loanpy.sanity.</span></span><span class="sig-name descname"><span class="pre">get_tpr_fpr_opt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">guesses_needed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">guesses_made</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">len_df</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.sanity.get_tpr_fpr_opt" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.sanity.postprocess2.     Get the true positive rate, the false positive rate and the optimum.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>guesses_needed</strong> (<em>pandas.core.series.Series</em><em> | </em><em>list</em><em> | </em><em>iterable     of float</em><em> | </em><em>int</em>) – This is the column “guesses” in adrc_obj.dfety,     as it is calculated by loanpy.sanity.loop_thru_data.</p></li>
<li><p><strong>guesses_made</strong> (<em>pandas.core.series.Series</em><em> | </em><em>list</em><em> | </em><em>iterable     of float</em><em> | </em><em>int</em>) – Value passed on to param     &lt;guesslist&gt; in loanpy.sanity.eval_all.</p></li>
<li><p><strong>len_df</strong> (<em>int</em>) – The length of the first two params passed.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A tuple of the true positive rate, as a list,     the false positive rate as a list (i.e. “if this many guesses were     made, this many words were correctly predicted in total”), and the     optimum, which in turn is again a tuple of the     lowest possible difference between     each point of the true positive rate and the false positive rate     (they are both percentages, so subtraction makes sense), the given     point of the true positive rate and the given point of the false positive     rate.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple of (list of int, list of int, tuple of (int, int, int))</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.sanity</span> <span class="kn">import</span> <span class="n">get_tpr_fpr_opt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gn</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">120</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gm</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">99</span><span class="p">,</span> <span class="mi">999</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_tpr_fpr_opt</span><span class="p">(</span><span class="n">guesses_needed</span><span class="o">=</span><span class="n">gn</span><span class="p">,</span> <span class="n">guesses_made</span><span class="o">=</span><span class="n">gm</span><span class="p">,</span> <span class="n">len_df</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="go">([0.0, 0.0, 0.1, 0.1, 0.3, 0.6, 0.7],</span>
<span class="go">[0.001, 0.003, 0.005, 0.007, 0.009, 0.099, 1.0],</span>
<span class="go">(0.501, 0.6, 0.099))</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="plot-roc-curve">
<h3>plot roc-curve<a class="headerlink" href="#plot-roc-curve" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="loanpy.sanity.plot_roc">
<span class="sig-prename descclassname"><span class="pre">loanpy.sanity.</span></span><span class="sig-name descname"><span class="pre">plot_roc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">guesslist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_to</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tpr_fpr_opt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">opt_howmany</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">opt_tpr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">len_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.sanity.plot_roc" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots an ROC-curve: True positive rate goes on the x-axis, false     positive rate on the y-axis. Optimum is marked with an “x” on the curve.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>guesslist</strong> (<em>list of int</em>) – Value passed on to param     &lt;guesslist&gt; in loanpy.sanity.eval_all.</p></li>
<li><p><strong>plot_to</strong> (<em>pathlib.PosixPath</em><em> | </em><em>str</em>) – Concluded from param     &lt;write_to&gt; in loanpy.sanity.eval_all, by clipping off “.csv” and     replacing it by “.jpg”.</p></li>
<li><p><strong>tpr_fpr_opt</strong> (<em>tuple of</em><em>     (</em><em>list of int</em><em>, </em><em>list of int</em><em>, </em><em>tuple of</em><em> (</em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>)</em><em>)</em>) – Return value of loanpy.sanity.get_tpr_fpr_opt</p></li>
<li><p><strong>opt_howmany</strong> (<em>int</em>) – The optimal setting of parameter &lt;howmany&gt; in     loanpy.adrc.Adrc.adapt or loanpy.adrc.Adrc.reconstruct. The first     element of the tuple returned by loanpy.sanity.make_stat.</p></li>
<li><p><strong>opt_tpr</strong> (<em>float</em>) – The optimal true positive rate. The last element of     the tuple returned by loanpy.sanity.make_stat. Shows the true positive     rate when param &lt;howmany&gt; in loanpy.adrc.Adrc.adapt or     loanpy.adrc.Adrc.reconstruct is set to the optimum.</p></li>
<li><p><strong>len_df</strong> (<em>int</em>) – The length of the input data frame, i.e. how many words     there were to make predictions for</p></li>
<li><p><strong>mode</strong> (<em>&quot;adapt&quot;</em><em> (</em><em>default</em><em>) or </em><em>&quot;reconstruct&quot;</em>) – If we were reconstructing or adapting (horizontal vs.     vertical transfers)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Plots an ROC curve and writes it to a file</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.sanity</span> <span class="kn">import</span> <span class="n">plot_roc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2mockplot</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;output_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;mockplot.jpg&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plot_roc</span><span class="p">(</span><span class="n">guesslist</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plot_to</span><span class="o">=</span><span class="n">path2mockplot</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tpr_fpr_opt</span><span class="o">=</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="mf">0.001</span><span class="p">,</span> <span class="mf">0.003</span><span class="p">,</span> <span class="mf">0.005</span><span class="p">,</span> <span class="mf">0.007</span><span class="p">,</span> <span class="mf">0.009</span><span class="p">,</span> <span class="mf">0.099</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="mf">0.501</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.099</span><span class="p">)),</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">opt_howmany</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">opt_tpr</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span> <span class="n">len_df</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;adapt&quot;</span><span class="p">)</span>
<span class="go">[inspect result in output_file / &quot;mockplot.jpg&quot;]</span>
</pre></div>
</div>
<img alt="_images/mockplot.jpg" src="_images/mockplot.jpg" />
</dd></dl>

</section>
<section id="check-cache">
<h3>check cache<a class="headerlink" href="#check-cache" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="loanpy.sanity.check_cache">
<span class="sig-prename descclassname"><span class="pre">loanpy.sanity.</span></span><span class="sig-name descname"><span class="pre">check_cache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path2cache</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">init_args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.sanity.check_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by loanpy.sanity.eval_all. Checks if cache-file exists, if not: empty file is created, if yes: checks whether init_args occur in one of its rows. If yes: Error is raised. If no, nothing happens. Input args are the output args of loanpy.sanity.eval_all.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path2cache</strong> (<em>pathlib.PosixPath</em><em> | </em><em>str</em>) – The path to the csv-file in which information     about input-parameters and evaluated results is stored. If path points to     a non-existent file, the correct file will be created.     If set to None, it will be written to cldf’s folder etc (concluded from     the path provided in parameter &lt;forms_csv&gt;) and will be called     f”opt_param_{tgt_lg}_{src_lg}”.     For more information see loanpy.sanity.check_cache.</p></li>
<li><p><strong>init_args</strong> (<em>dict</em>) – Dictionary where keys are the arguments of loanpy.sanity.eval_all and vals their assigned value. Generated by locals(). See help(locals).</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ArgumentsAlreadyTested</strong> – If these arguments were already passed to loanpy.sanity.eval_all once, they won’t be calculated again. To solve this error, change the value of some input args, or provide a path to a different cache, or delete the current cache, or delete the particular row that was tested already from the current test (The error message explicitely mentions which row contains the identical args.)</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Just raises an Error or writes an empty cache under certain conditions, else no action</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="write-to-cache">
<h3>write to cache<a class="headerlink" href="#write-to-cache" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="loanpy.sanity.write_to_cache">
<span class="sig-prename descclassname"><span class="pre">loanpy.sanity.</span></span><span class="sig-name descname"><span class="pre">write_to_cache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path2cache</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">init_args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stat</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.sanity.write_to_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes the results of loanpy.sanity.eval_all to a csv and sorts it     by column “opt_tpr”. So that on the top of the .csv we will have     the parameter settings that give us the most accurate predictions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path2cache</strong> (<em>pathlib.PosixPath</em><em> | </em><em>str</em>) – The path to which the cache should be written.</p></li>
<li><p><strong>init_args</strong> (<em>list</em>) – The arguments that were passed on to     loanpy.sanity.eval_all to generate the results.</p></li>
<li><p><strong>stat</strong> (<em>tuple of int</em><em>, </em><em>str</em><em>, </em><em>str</em>) – The return value of loanpy.sanity.make_stat.</p></li>
<li><p><strong>start</strong> (<em>float</em>) – The start time when loanpy.sanity.eval_all started.</p></li>
<li><p><strong>end</strong> (<em>float</em>) – The end time when loanpy.sanity.eval_all ended.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Stores the args with which loanpy.sanity_eval_all was run     and the resultst in a csv-file.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="id4">
<h2>loanfinder.py<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<section id="read-data">
<h3>read data<a class="headerlink" href="#read-data" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="loanpy.loanfinder.read_data">
<span class="sig-prename descclassname"><span class="pre">loanpy.loanfinder.</span></span><span class="sig-name descname"><span class="pre">read_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path2forms</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">adrc_col</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.loanfinder.read_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads a column with adapted or reconstructed words in a forms.csv file, drops empty elements, drops elements with certain keywords used by loanpy.adrc.Adrc.adapt and loanpy.adrc.Adrc.reconstruct, such as “not old”, “wrong phonotactics”, etc. Splits elements by “, ” and assigns every word its own spot in the pandas Series which is returned. Called by loanpy.loanfinder.Search.__init__</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path2forms</strong> (<em>pathlib.PosixPath</em><em> | </em><em>str</em><em> | </em><em>None</em>) – path to forms.csv</p></li>
<li><p><strong>adrc_col</strong> (<em>str</em>) – name of column containing predicted adapted or reconstructed words</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Series object with one word per element. Words can be regexes as well</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.core.series.Series</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.loanfinder</span> <span class="kn">import</span> <span class="vm">__file__</span><span class="p">,</span> <span class="n">read_data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PATH2READ_DATA</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;ad_read_data.csv&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">read_data</span><span class="p">(</span><span class="n">PATH2READ_DATA</span><span class="p">,</span> <span class="s2">&quot;col1&quot;</span><span class="p">)</span>
<span class="go">0       a</span>
<span class="go">1    blub</span>
<span class="go">1    club</span>
<span class="go">Name: col1, dtype: object</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="generator">
<h3>generator<a class="headerlink" href="#generator" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="loanpy.loanfinder.gen">
<span class="sig-prename descclassname"><span class="pre">loanpy.loanfinder.</span></span><span class="sig-name descname"><span class="pre">gen</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">iterable1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">iterable2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">function</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Calculating'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.loanfinder.gen" title="Permalink to this definition">¶</a></dt>
<dd><p>A generator that applies a function to two iterables, incl. tqdm-progressbar with customisable prefix. Called by loanpy.loanfinder.Search.loans to calculate phonological and semantic distances.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>iterable1</strong> (<em>pathlib.PosixPath</em><em> | </em><em>list</em><em> | </em><em>...</em>) – The first iterable, will be zipped with iterable2 and and looped through.</p></li>
<li><p><strong>iterable2</strong> (<em>pathlib.PosixPath</em><em> | </em><em>list</em><em> | </em><em>...</em>) – The second iterable, will be zipped with iterable1 and and looped through.</p></li>
<li><p><strong>function</strong> (<em>function</em>) – The function that should be applied to the elements of the tuples from the two zipped iterables.</p></li>
<li><p><strong>prefix</strong> (<em>str</em><em>, </em><em>default=&quot;Calculating&quot;</em>) – The text that should be displayed by the progressbar</p></li>
<li><p><strong>args</strong> (<em>any type</em>) – positional arguments that shall be passed to the function</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the outputs of the function</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>generator object</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.loanfinder</span> <span class="kn">import</span> <span class="n">gen</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">gen</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">))</span>
<span class="go">Calculating: 100%|███████████████████████████████████| 3/3 [00:00&lt;00:00, 7639.90it/s]</span>
<span class="go">[5, 7, 9]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.loanfinder</span> <span class="kn">import</span> <span class="n">gen</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">gen</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="o">+</span><span class="n">z</span><span class="p">,</span> <span class="s2">&quot;running&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="go">running: 100%|███████████████████████████████████| 3/3 [00:00&lt;00:00, 7639.90it/s]</span>
<span class="go">[6, 8, 10]</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="phonmatch">
<h3>phonmatch<a class="headerlink" href="#phonmatch" title="Permalink to this headline">¶</a></h3>
<dl class="py method">
<dt class="sig sig-object py" id="loanpy.loanfinder.Search.phonmatch">
<span class="sig-prename descclassname"><span class="pre">Search.</span></span><span class="sig-name descname"><span class="pre">phonmatch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">search_for</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dropduplicates</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.loanfinder.Search.phonmatch" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a regular expression is contained in a wordlist and replace it with a number. The wordlist is a pandas Series object that gets initiated in loanpy.loanfinder.Search. To pass a wordlist in through the parameter of this function, use loanpy.loanfinder.Search.phonmatch_small</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>search_for</strong> (<em>str</em>) – The regular expression for which to search in the donor language.</p></li>
<li><p><strong>index</strong> (<em>idx</em>) – The number with which to replace a match.         (This number will be         used to merge the rest of the recipdf data frame, so it should represent         the index in the recipdf data frame.)</p></li>
<li><p><strong>dropduplicates</strong> (<em>bool</em><em>, </em><em>default=True</em>) – If set to True, this will drop matches that have the same         index in the wordlist         (There’s one adapted donordf-word per row, but its index         is the same as the original donordf word’s from which it was adapted.         Therefore one recipdf word can match with the same donordf word through multiple         adaptations. Since the semantics are the same for all of those matches, duplicates can be dropped.         For a more precise search, e.g. to find out         which of all possible matches are the most likely, set dropduplicates=False)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a pandas data frame containing phonological matches. The index         indicates the position of the word in the donordf word list.         The column “L1_idx” indicates         the position of the word in the recipdf word list.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.core.series.Series</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.loanfinder</span> <span class="kn">import</span> <span class="n">Search</span><span class="p">,</span> <span class="vm">__file__</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2read_data</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;ad_read_data.csv&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">search_obj</span> <span class="o">=</span> <span class="n">Search</span><span class="p">(</span><span class="n">path2donordf</span><span class="o">=</span><span class="n">path2read_data</span><span class="p">,</span> <span class="n">donorcol</span><span class="o">=</span><span class="s2">&quot;col1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">search_obj</span><span class="o">.</span><span class="n">phonmatch</span><span class="p">(</span><span class="n">search_for</span><span class="o">=</span><span class="s2">&quot;(b|c)?lub&quot;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="mi">99</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dropduplicates</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">      match  recipdf_idx</span>
<span class="go">1  blub           99</span>
<span class="go">1  club           99</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="id5">
<h3>postprocess<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<dl class="py method">
<dt class="sig sig-object py" id="loanpy.loanfinder.Search.postprocess">
<span class="sig-prename descclassname"><span class="pre">Search.</span></span><span class="sig-name descname"><span class="pre">postprocess</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dfmatches</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.loanfinder.Search.postprocess" title="Permalink to this definition">¶</a></dt>
<dd><p>Will replace every phonological match in the output data frame with its most likely version.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dfmatches</strong> – The entire data frame with potential loanwords</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the same dataframe but with likelier adaptations of donor words</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.core.series.Series</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pandas</span> <span class="kn">import</span> <span class="n">DataFrame</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.loanfinder</span> <span class="kn">import</span> <span class="n">Search</span><span class="p">,</span> <span class="vm">__file__</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PATH2SC_AD</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;sc_ad_likeliest.txt&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PATH2SC_RC</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;sc_rc_likeliest.txt&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">search_obj</span> <span class="o">=</span> <span class="n">Search</span><span class="p">(</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2donordf</span><span class="o">=</span><span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;loans_got.csv&quot;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2recipdf</span><span class="o">=</span><span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;loans_hun.csv&quot;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scdictlist_ad</span><span class="o">=</span><span class="n">PATH2SC_AD</span><span class="p">,</span> <span class="n">scdictlist_rc</span><span class="o">=</span><span class="n">PATH2SC_RC</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">semsim</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dfin</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;match&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;blub&quot;</span><span class="p">],</span> <span class="s2">&quot;recipdf_idx&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s2">&quot;Meaning_x&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;computer, interface&quot;</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s2">&quot;Meaning_y&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;human&quot;</span><span class="p">],</span> <span class="s2">&quot;semsim_msr&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.10940766</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">search_obj</span><span class="o">.</span><span class="n">postprocess</span><span class="p">(</span><span class="n">dfin</span><span class="p">)</span>
<span class="go">postprocessing...</span>
<span class="go">   recipdf_idx            Meaning_x  ...                      align_ad  nse_combined</span>
<span class="go">0            0  computer, interface  ...  [&#39;b&lt;b&#39;, &#39;l&lt;l&#39;, &#39;u&lt;u&#39;, &#39;b&lt;b&#39;]          15.0</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="likeliestphonmatch">
<h3>likeliestphonmatch<a class="headerlink" href="#likeliestphonmatch" title="Permalink to this headline">¶</a></h3>
<dl class="py method">
<dt class="sig sig-object py" id="loanpy.loanfinder.Search.likeliestphonmatch">
<span class="sig-prename descclassname"><span class="pre">Search.</span></span><span class="sig-name descname"><span class="pre">likeliestphonmatch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">donor_ad</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recip_rc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">donor_segment</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recip_segment</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.loanfinder.Search.likeliestphonmatch" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the nse of recip_rc-recip_segment and donor_ad-donor_segment, adds them together and picks the word pair with the highest sum. Adds cols with bonus info.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>recip_rc</strong> (<em>str</em><em> (</em><em>regular expression</em><em>)</em>) – a reconstructed word</p></li>
<li><p><strong>donor_ad</strong> (<em>str</em><em> (</em><em>not a regular expression</em><em>, </em><em>words separated by &quot;</em><em>, </em><em>&quot;</em><em>)</em>) – adapted words in the donor data frame</p></li>
<li><p><strong>donor_segment</strong> – the original (non-adapted) donor word</p></li>
<li><p><strong>recip_segment</strong> (<em>str</em>) – the original (non-reconstructed) recipient word</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The likeliest phonological match</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.core.series.Series</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pandas</span> <span class="kn">import</span> <span class="n">DataFrame</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">loanpy.loanfinder</span> <span class="kn">import</span> <span class="n">Search</span><span class="p">,</span> <span class="vm">__file__</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PATH2SC_AD</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;sc_ad_likeliest.txt&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PATH2SC_RC</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;sc_rc_likeliest.txt&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PATH2READ_DATA</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;tests&quot;</span> <span class="o">/</span> <span class="s2">&quot;input_files&quot;</span> <span class="o">/</span> <span class="s2">&quot;ad_read_data.csv&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">search_obj</span> <span class="o">=</span> <span class="n">Search</span><span class="p">(</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2donordfPATH2READ_DATA</span><span class="p">,</span> <span class="n">donorcol</span><span class="o">=</span><span class="s2">&quot;col1&quot;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scdictlist_ad</span><span class="o">=</span><span class="n">PATH2SC_AD</span><span class="p">,</span> <span class="n">scdictlist_rc</span><span class="o">=</span><span class="n">PATH2SC_RC</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">search_obj</span><span class="o">.</span><span class="n">likeliestphonmatch</span><span class="p">(</span><span class="n">donor_ad</span><span class="o">=</span><span class="s2">&quot;a, blub, club&quot;</span><span class="p">,</span> <span class="n">recip_rc</span><span class="o">=</span><span class="s2">&quot;(b|c)?lub&quot;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">donor_segment</span><span class="o">=</span><span class="s2">&quot;elub&quot;</span><span class="p">,</span> <span class="n">recip_segment</span><span class="o">=</span><span class="s2">&quot;dlub&quot;</span><span class="p">)</span>
<span class="go">    match  nse_rc  se_rc  ...           distr_ad                             align_ad  nse_combined</span>
<span class="go">    0  blub    10.0     50  ...  [0, 0, 10, 10, 0]  [&#39;e&lt;V&#39;, &#39;C&lt;b&#39;, &#39;l&lt;l&#39;, &#39;u&lt;u&#39;, &#39;b&lt;b&#39;]          14.0</span>
<span class="go">    [1 rows x 10 columns]</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="phonmatch-small">
<h3>phonmatch_small<a class="headerlink" href="#phonmatch-small" title="Permalink to this headline">¶</a></h3>
<dl class="py method">
<dt class="sig sig-object py" id="loanpy.loanfinder.Search.phonmatch_small">
<span class="sig-prename descclassname"><span class="pre">Search.</span></span><span class="sig-name descname"><span class="pre">phonmatch_small</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">search_in</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">search_for</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dropduplicates</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.loanfinder.Search.phonmatch_small" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as loanpy.loanfinder.Serch.phonmatch but search_in has to be added as a parameter. Found this to be the most elegant solution b/c loanpy.loanfinder.Search.likeliestphonmatch() inputs lots of small and very different search_in-dfs, while loans() inputs one big df.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>search_in</strong> (<em>pandas Series</em>) – The iterable to search within</p></li>
<li><p><strong>search_for</strong> – The regular expression for which to search in the wordlist</p></li>
<li><p><strong>index</strong> (<em>str</em>) – The number with which to replace a match.         (This number will be         used to merge the rest of the recipdf data frame, so it should represent         the index in the recipdf data frame.)</p></li>
<li><p><strong>dropduplicates</strong> (<em>bool</em><em>, </em><em>default=True</em>) – If set to True, this will drop matches that have the same         index in the wordlist         (There’s one adapted donordf-word per row, but its index         is the same as the original donordf word’s from which it was adapted.         Therefore one recipdf word can match with the same donordf word through multiple         adaptations. Since the semantics are the same for all of those matches, duplicates can be dropped.         For a more precise search, e.g. to find out         which of all possible matches are the most likely, set dropduplicates=False)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a pandas data frame containing phonological matches. The index         indicates the position of the word in the donordf word list.         The column “L1_idx” indicates         the position of the word in the recipdf word list.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.core.series.Series</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="merge-with-rest">
<h3>merge_with_rest<a class="headerlink" href="#merge-with-rest" title="Permalink to this headline">¶</a></h3>
<dl class="py method">
<dt class="sig sig-object py" id="loanpy.loanfinder.Search.merge_with_rest">
<span class="sig-prename descclassname"><span class="pre">Search.</span></span><span class="sig-name descname"><span class="pre">merge_with_rest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dfmatches</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#loanpy.loanfinder.Search.merge_with_rest" title="Permalink to this definition">¶</a></dt>
<dd><p>Merges the output data frame with the remaining columns from both input data frames. This helps to inspect results quickly manually.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dfmatches</strong> (<em>pandas.core.frame.DataFrame</em>) – The output data frame</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>same data frame with extra cols added from both input forms.csv</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.core.frame.DataFrame</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Intro</a></li>
<li><a class="reference internal" href="#for-usage">For usage</a><ul>
<li><a class="reference internal" href="#module-qfysc">qfysc.py</a><ul>
<li><a class="reference internal" href="#qfy">Qfy</a></li>
<li><a class="reference internal" href="#get-sound-correspondences">get sound correspondences</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-adrc">adrc.py</a><ul>
<li><a class="reference internal" href="#adrc">Adrc</a></li>
<li><a class="reference internal" href="#adapt">adapt</a></li>
<li><a class="reference internal" href="#reconstruct">reconstruct</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-sanity">sanity.py</a><ul>
<li><a class="reference internal" href="#evaluate-all">evaluate all</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-loanfinder">loanfinder.py</a><ul>
<li><a class="reference internal" href="#search">Search</a></li>
<li><a class="reference internal" href="#loans">loans</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#for-internal-calls">For internal calls</a><ul>
<li><a class="reference internal" href="#module-loanpy.helpers">helpers.py</a></li>
<li><a class="reference internal" href="#id1">qfysc.py</a><ul>
<li><a class="reference internal" href="#read-mode">read mode</a></li>
<li><a class="reference internal" href="#read-connector">read connector</a></li>
<li><a class="reference internal" href="#read-sound-correspondence-dictionary-base">read sound correspondence dictionary base</a></li>
<li><a class="reference internal" href="#align">align</a></li>
<li><a class="reference internal" href="#align-with-lingpy">align with lingpy</a></li>
<li><a class="reference internal" href="#align-clusterwise">align clusterwise</a></li>
<li><a class="reference internal" href="#get-structure-correspondences">get structure correspondences</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id2">adrc.py</a><ul>
<li><a class="reference internal" href="#read-sound-correspondence-dictionary-list">read sound correspondence dictionary list</a></li>
<li><a class="reference internal" href="#move-sound-correspondences">move sound correspondences</a></li>
<li><a class="reference internal" href="#get-difference">get difference</a></li>
<li><a class="reference internal" href="#read-sound-correspondences">read sound correspondences</a></li>
<li><a class="reference internal" href="#adapt-structure">adapt structure</a></li>
<li><a class="reference internal" href="#get-normalised-sum-of-examples">get normalised sum of examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id3">sanity.py</a><ul>
<li><a class="reference internal" href="#cache">cache</a></li>
<li><a class="reference internal" href="#loop-thru-data">loop_thru_data</a></li>
<li><a class="reference internal" href="#evaluate-one">evaluate one</a></li>
<li><a class="reference internal" href="#evaluate-adapt">evaluate adapt</a></li>
<li><a class="reference internal" href="#evaluate-reconstruct">evaluate reconstruct</a></li>
<li><a class="reference internal" href="#get-non-crossvalidated-sound-correspondences">get non-crossvalidated sound correspondences</a></li>
<li><a class="reference internal" href="#get-crossvalidated-data">get crossvalidated data</a></li>
<li><a class="reference internal" href="#postprocess">postprocess</a></li>
<li><a class="reference internal" href="#postprocess2">postprocess2</a></li>
<li><a class="reference internal" href="#get-normalised-sum-of-examples-for-data-frame">get normalised sum of examples for data frame</a></li>
<li><a class="reference internal" href="#phonotactics-predicted">phonotactics predicted?</a></li>
<li><a class="reference internal" href="#get-distances">get distances</a></li>
<li><a class="reference internal" href="#make-statistics">make statistics</a></li>
<li><a class="reference internal" href="#get-true-positive-rate-false-positive-rate-optimum">get true positive rate false positive rate, optimum</a></li>
<li><a class="reference internal" href="#plot-roc-curve">plot roc-curve</a></li>
<li><a class="reference internal" href="#check-cache">check cache</a></li>
<li><a class="reference internal" href="#write-to-cache">write to cache</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id4">loanfinder.py</a><ul>
<li><a class="reference internal" href="#read-data">read data</a></li>
<li><a class="reference internal" href="#generator">generator</a></li>
<li><a class="reference internal" href="#phonmatch">phonmatch</a></li>
<li><a class="reference internal" href="#id5">postprocess</a></li>
<li><a class="reference internal" href="#likeliestphonmatch">likeliestphonmatch</a></li>
<li><a class="reference internal" href="#phonmatch-small">phonmatch_small</a></li>
<li><a class="reference internal" href="#merge-with-rest">merge_with_rest</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="index.html"
                          title="previous chapter">Welcome to loanpy’s documentation!</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/documentation.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to loanpy’s documentation!"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">loanpy 2.0 beta documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Intro</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2022, Viktor Martinović.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.5.0.
    </div>
  </body>
</html>